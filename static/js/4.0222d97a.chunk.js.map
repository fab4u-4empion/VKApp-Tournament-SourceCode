{"version":3,"sources":["time/TimeComponent.js","time/TimeString.js","notification/notification_subscribe.js","notification/notification_unsubscribe.js","getTournament/Upcoming.js","getTournament/RegistrationStart.js","getTournament/RegistrationFinish.js","getTournament/Running.js","getTournament/Finish.js","getTournament/all.js","getParams/search.js","App.js"],"names":["Time","props","time","Date","timestamp","mode","options","year","month","day","toLocaleDateString","hour","minute","style","fontSize","TimeStr","lastClick","getTime","lastTournament","subscribeResult","tournamentInfo","Promise","resolve","reject","indexOf","tournament_id","push","bridge","send","then","url","window","location","search","request","XMLHttpRequest","open","onload","splice","JSON","parse","responseText","error","onerror","catch","navigator","onLine","unsubscribeResult","positionY","positionX","stylesIsUpdated","buttonHeight","isOpenedFirstTime","tournamentsID","bellArrayButtons","bellArrayModalAndroid","bellArrayModalIOS","activeBells","tournament","TournamentList","reduce","p","e","tournamentInfoRequest","data","teams","map","elem","sessionStorage","setItem","width","height","UpcommingComponent","state","activeModal","modalHistory","popout","snackbar","bellsButtons","bellsAndroid","bellsIOS","sendPost","bind","shareTargetRef","React","createRef","shareLink","closeActionSheet","setState","modalBack","setActiveModal","length","history","back","document","body","overflow","stringify","onClose","duration","before","size","background","fill","start_at","title","registration_start_at","registration_end_at","successSnackbar","this","buildRequest","isDesktop","viewWidth","ViewWidth","MOBILE","errorSnackbar","link","text","event","target","closest","getBoundingClientRect","top","left","actionShet","pushState","iosCloseItem","autoclose","header","toggleRef","current","onClick","modal","getItem","console","log","hash","Number","slice","setTimeout","checkSubscriptions","getElementsByClassName","MutationObserver","mutations","documentElement","clientHeight","observe","attributes","attributeFilter","addEventListener","isMobile","platform","Modal","id","IOS","subscribeToNotification","ANDROID","right","className","marginLeft","display","alignItems","color","end_at","fontWeight","max","description","List","status","paddingTop","getRootRef","openShareActionSheet","Component","Upcomming","withPlatform","withAdaptivity","RegStartComponent","total","confirmed","RegStart","RegFinishComponent","RegFinish","RunningComponent","Running","FinishComponent","openShareActionSheetFinish","Finish","All","Upcoming","getLaunchParams","replace","split","a","decodeURIComponent","isOpen","Application","contextOpened","activeTab","params","vk_are_notifications_enabled","layout","action","onActionClick","enableNotifications","content","subscribe","detail","type","onfocus","x","scrollX","y","scrollY","scroll","vertical","filled","showArrows","getScrollToLeft","i","getScrollToRight","scrollTo","selected","wide"],"mappings":"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","file":"static/js/4.0222d97a.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction Time(props) {\r\n\r\n    var time = new Date((props.timestamp) * 1000);\r\n\r\n    switch (props.mode) {\r\n        case \"day\":\r\n            var options = {year: 'numeric', month: 'long', day: 'numeric'};\r\n            options.timeZone = 'Europe/Moscow';\r\n            return ( <span>{time.toLocaleDateString('ru-RU', options)}</span> )\r\n\r\n        case \"time\":\r\n            var options = {hour: 'numeric', minute: 'numeric' };\r\n            options.timeZone = 'Europe/Moscow';\r\n            return ( <span>{ time.toLocaleDateString('ru-RU', options)}<span style={{fontSize: \"12px\"}}> (МСК)</span></span> )\r\n\r\n        case \"dayAndTime\":\r\n            var options = {month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' };\r\n            options.timeZone = 'Europe/Moscow';\r\n            return ( <span>{ time.toLocaleDateString('ru-RU', options)}<span style={{fontSize: \"12px\"}}> (МСК)</span></span> )    \r\n            \r\n        default:            \r\n            var options = {month: 'numeric', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric' }; \r\n            options.timeZone = 'Europe/Moscow';\r\n            return ( <span>{ time.toLocaleDateString('ru-RU', options)}<span style={{fontSize: \"12px\"}}> (МСК)</span></span> ); \r\n    }  \r\n}\r\n\r\nexport default Time","function TimeStr (timestamp, mode) {\r\n    var time = new Date(timestamp * 1000)\r\n\r\n    switch (mode) {\r\n        case \"day\":\r\n            var options = {year: 'numeric', month: 'long', day: 'numeric'};\r\n            options.timeZone = 'Europe/Moscow';\r\n            return (time.toLocaleDateString('ru-RU', options) + \" (МСК)\")\r\n\r\n        case \"time\":\r\n            var options = {hour: 'numeric', minute: 'numeric' };\r\n            options.timeZone = 'Europe/Moscow';\r\n            return ( time.toLocaleDateString('ru-RU', options) + \" (МСК)\")\r\n\r\n        case \"dayAndTime\":\r\n            var options = {month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' };\r\n            options.timeZone = 'Europe/Moscow';\r\n            return ( time.toLocaleDateString('ru-RU', options) + \" (МСК)\")    \r\n            \r\n        default:          \r\n            var options = {month: 'numeric', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric' }; \r\n            options.timeZone = 'Europe/Moscow'; \r\n            return ( time.toLocaleDateString('ru-RU', options) + \" (МСК)\"); \r\n    }  \r\n}\r\n\r\nexport default TimeStr","import bridge from \"@vkontakte/vk-bridge\"\r\n\r\nvar lastClick = new Date().getTime()\r\nvar lastTournament = []\r\n\r\nfunction subscribeResult(tournamentInfo) {\r\n    var subscribe = new Promise((resolve, reject) => {\r\n        var currentTime = new Date().getTime()\r\n        if (currentTime - lastClick > 1500 && lastTournament.indexOf(tournamentInfo.tournament_id) == -1) {\r\n            lastClick = new Date().getTime()\r\n            lastTournament.push(tournamentInfo.tournament_id)\r\n            bridge\r\n            .send(\"VKWebAppAllowNotifications\")\r\n            .then(() => {\r\n                var url = `https://wotbtournamentvkapp.ru/vkapp/subscribe${window.location.search}&tournament_id=${tournamentInfo.tournament_id}`\r\n                var request = new XMLHttpRequest()\r\n                request.open('GET', url, true)\r\n                request.send()\r\n                request.onload = () => {\r\n                    lastTournament.splice(lastTournament.indexOf(tournamentInfo.tournament_id), 1)\r\n                    try {\r\n                        if (JSON.parse(request.responseText) == 200)\r\n                            resolve()\r\n                        else\r\n                            if (JSON.parse(request.responseText) == 300)\r\n                                resolve()\r\n                            else    \r\n                                reject()       \r\n                    } catch (error) {\r\n                        reject()\r\n                    }\r\n                }\r\n                request.onerror = () => {\r\n                    lastTournament.splice(lastTournament.indexOf(tournamentInfo.tournament_id), 1)\r\n                    reject()\r\n                }\r\n            })\r\n            .catch(() => {\r\n                lastTournament.splice(lastTournament.indexOf(tournamentInfo.tournament_id), 1)\r\n                if (!navigator.onLine) {\r\n                    reject()   \r\n                }\r\n            })        \r\n        }   \r\n    })\r\n    return subscribe\r\n}\r\n\r\nexport default subscribeResult","function unsubscribeResult(tournamentInfo) {\r\n    var unsubscribe = new Promise((resolve, reject) => {\r\n        var url = `https://wotbtournamentvkapp.ru/vkapp/unsubscribe${window.location.search}&tournament_id=${tournamentInfo.tournament_id}`\r\n        var request = new XMLHttpRequest()\r\n        request.open('GET', url, true)\r\n        request.send()\r\n        request.onload = () => {\r\n            try {\r\n                if (JSON.parse(request.responseText) == 200)\r\n                    resolve()\r\n                else\r\n                    reject()\r\n            } catch (error) {\r\n                reject()\r\n            }\r\n        }\r\n        request.onerror = () => {\r\n            reject()\r\n        }  \r\n    })\r\n    return unsubscribe\r\n}\r\n\r\nexport default unsubscribeResult","import React from 'react';\r\nimport {Root, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, withAdaptivity, ViewWidth, withPlatform, ANDROID, PanelHeaderClose, IOS} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar, ActionSheetItem, ActionSheet} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\nimport subscribeResult from '../notification/notification_subscribe'\r\nimport unsubscribeResult from '../notification/notification_unsubscribe';\r\nimport { Icon28NotificationAddOutline } from '@vkontakte/icons';\r\nimport { Icon24NotificationCheckOutline } from '@vkontakte/icons';\r\n\r\nvar isOpenedFirstTime = false \r\nvar tournamentsID = []  \r\nvar positionY \r\nvar positionX\r\nvar stylesIsUpdated\r\nvar buttonHeight\r\nvar bellArrayButtons = {}\r\nvar bellArrayModalAndroid = {}\r\nvar bellArrayModalIOS = {}\r\nvar activeBells = []\r\n\r\nfunction getPosition() {\r\n    stylesIsUpdated = false\r\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n}\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=upcoming\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\n    TournamentList['data'].map((elem) => {\r\n        tournamentsID.push(elem.tournament_id)\r\n        sessionStorage.setItem(elem.tournament_id, true)\r\n    })\r\n\r\n    bellArrayButtons = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>   \r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalAndroid = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalIOS = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\nclass UpcommingComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            activeModal: null,\r\n            modalHistory: [],\r\n            popout: null,\r\n            snackbar: null,\r\n            elem: null,\r\n            bellsButtons: bellArrayButtons,\r\n            bellsAndroid: bellArrayModalAndroid,\r\n            bellsIOS: bellArrayModalIOS\r\n        };\r\n        \r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareTargetRef = React.createRef()\r\n        this.shareLink = this.shareLink.bind(this)\r\n\r\n        this.closeActionSheet = () => {\r\n            this.setState({ popout: null })\r\n        }\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n            history.back()\r\n            document.body.style.overflow = \"visible\";\r\n        };\r\n    }\r\n\r\n    subscribeToNotification(elem) {\r\n        var snackbar\r\n        if (activeBells.indexOf(elem.tournament_id) == -1) {\r\n            subscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.push(elem.tournament_id)\r\n                    sessionStorage.setItem('activeSubscriptions', JSON.stringify(activeBells))\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => this.setState({ snackbar: null })}\r\n                            duration=\"2000\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Вы будете уведомлены о начале регистрации на турнир\r\n                        </Snackbar>\r\n                    this.setState({snackbar : snackbar})    \r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при подписке на уведомление\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})       \r\n                })\r\n        } else {\r\n            unsubscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.splice(activeBells.indexOf(elem.tournament_id), 1)\r\n                    sessionStorage.setItem('activeSubscriptions', JSON.stringify(activeBells))\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при отписке от уведомления\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})     \r\n                })\r\n        }\r\n    }\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message = TimeStr(elem.start_at, \"day\") + \" запланирован турнир \\\"\" + elem.title + \"\\\"\" +\r\n                      \"\\n\\nНачало регистрации: \" + TimeStr(elem.registration_start_at, \"dayAndTime\") +\r\n                      \"\\nОкончание регистрации: \" + TimeStr(elem.registration_end_at, \"dayAndTime\") +\r\n                      \"\\n\\nНачало боев: \" + TimeStr(elem.start_at, \"dayAndTime\") +\r\n                      \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n\r\n        bridge\r\n            .send(\"VKWebAppShowWallPostBox\", request)\r\n            .then(data => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})\r\n            })    \r\n    }\r\n\r\n    shareLink() {\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ссылка скопирована' : 'Ссылка отправлена'}\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ошибка при копировании ссылки' : 'Ошибка при отправке ссылки'}\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        if (isDesktop) {\r\n            bridge\r\n            .send(\"VKWebAppCopyText\", {text: link})\r\n            .then(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})    \r\n            })   \r\n            .catch(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})    \r\n            })    \r\n        } else {\r\n            bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .then(data => {\r\n                const isDesktop = this.props.viewWidth > ViewWidth.MOBILE\r\n                if (isDesktop) {\r\n                    if (this.state.snackbar) return\r\n                    this.setState({snackbar: successSnackbar})    \r\n                }\r\n            })\r\n        }       \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        if (!isDesktop) {\r\n            var state = {actionShet: e.tournament_id}\r\n            var title = ''\r\n            history.pushState(state, title)\r\n        }\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => {\r\n                    this.setState({ popout: null })\r\n                    if (!isDesktop) {\r\n                        history.back()\r\n                    }    \r\n                }}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    {isDesktop ? 'Скопировать ссылку' : 'Отправить ссылку'}\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n            modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n            modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n            activeModal,\r\n            modalHistory\r\n        });\r\n\r\n        if (this.state.activeModal == null) {\r\n            var state = {modal: 'modal'}\r\n            var title = ''\r\n            document.body.style.overflow = \"hidden\";\r\n            history.pushState(state, title)\r\n        }\r\n    };\r\n\r\n    checkSubscriptions() {\r\n        try {\r\n            activeBells = JSON.parse(sessionStorage.getItem('activeSubscriptions'))  \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n        bellArrayButtons = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1) \r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                else\r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                return p\r\n            }, {}\r\n        )\r\n        bellArrayModalAndroid = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1)\r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                else\r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n                return p\r\n            }, {}\r\n        )\r\n        bellArrayModalIOS = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1)\r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                else    \r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                return p\r\n            }, {}\r\n        ) \r\n        this.setState({bellsAndroid: bellArrayModalAndroid})\r\n        this.setState({bellsIOS: bellArrayModalIOS})\r\n        this.setState({bellsButtons: bellArrayButtons})\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n        setTimeout(() => {\r\n            this.checkSubscriptions()\r\n        }, 500)\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 200) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5    \r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        window.addEventListener('scroll', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n        })\r\n\r\n        window.addEventListener('orientationchange', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()    \r\n        })\r\n\r\n        window.addEventListener('popstate', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n            setTimeout(() => {\r\n                if (this.state.activeModal != null)\r\n                this.modalBack()\r\n            }, 400)    \r\n        })\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader \r\n                                        left={\r\n                                            (isMobile && platform === IOS && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsIOS[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>)\r\n                                        }\r\n                                        right={\r\n                                            isMobile && (platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton> )\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (<PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                        }\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                Запланирован\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        \r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                        </div>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Registration\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16CheckCircleOutline style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.registration_start_at}/>\r\n                                                                </span>\r\n                                                                <br/>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16CancelCircleOutline style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.registration_end_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Начало боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16Recent style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time timestamp={elem.start_at} mode=\"dayAndTime\"/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-InfoButton\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsButtons[elem.tournament_id]}</Button>\r\n                                                </div> \r\n                                            </div>\r\n                                    </Card>\r\n                            \r\n                            )\r\n                        }\r\n                    </CardGrid> \r\n                    {this.state.snackbar}\r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет запланированных турниров</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst Upcomming = withPlatform(withAdaptivity(UpcommingComponent, { viewWidth: true }))\r\n\r\nexport default Upcomming;","import React from 'react';\r\nimport {ActionSheet, ActionSheetItem, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, Root, withAdaptivity, ViewWidth, withPlatform, IOS, PanelHeaderClose, ANDROID} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\nimport subscribeResult from '../notification/notification_subscribe'\r\nimport unsubscribeResult from '../notification/notification_unsubscribe';\r\nimport { Icon28NotificationAddOutline } from '@vkontakte/icons';\r\nimport { Icon24NotificationCheckOutline } from '@vkontakte/icons';\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=registration_started\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\nvar isOpenedFirstTime = false \r\nvar tournamentsID = []  \r\nvar positionY \r\nvar positionX\r\nvar stylesIsUpdated\r\nvar buttonHeight\r\nvar bellArrayButtons = {}\r\nvar bellArrayModalAndroid = {}\r\nvar bellArrayModalIOS = {}\r\nvar activeBells = []\r\n\r\nTournamentList['data'].map((elem) => {\r\n    tournamentsID.push(elem.tournament_id)\r\n    sessionStorage.setItem(elem.tournament_id, true)\r\n})\r\n\r\nfunction getPosition() {\r\n    stylesIsUpdated = false\r\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n}  \r\n\r\nbellArrayButtons = TournamentList['data'].reduce(\r\n    (p, e) => {\r\n        p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>   \r\n        return p\r\n    }, {}\r\n)\r\n\r\nbellArrayModalAndroid = TournamentList['data'].reduce(\r\n    (p, e) => {\r\n        p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n        return p\r\n    }, {}\r\n)\r\n\r\nbellArrayModalIOS = TournamentList['data'].reduce(\r\n    (p, e) => {\r\n        p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n        return p\r\n    }, {}\r\n)\r\n\r\nclass RegStartComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            activeModal: null,\r\n            modalHistory: [],\r\n            popout: null,\r\n            snackbar: null,\r\n            elem: null,\r\n            bellsButtons: bellArrayButtons,\r\n            bellsAndroid: bellArrayModalAndroid,\r\n            bellsIOS: bellArrayModalIOS\r\n        };\r\n\r\n        this.shareTargetRef = React.createRef();\r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareLink = this.shareLink.bind(this)\r\n\r\n        this.closeActionSheet = () => {\r\n            this.setState({ popout: null })\r\n        }\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n            history.back()\r\n            document.body.style.overflow = \"visible\";\r\n        };\r\n    }\r\n\r\n    subscribeToNotification(elem) {\r\n        var snackbar\r\n        if (activeBells.indexOf(elem.tournament_id) == -1) {\r\n            subscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.push(elem.tournament_id)\r\n                    sessionStorage.setItem('activeSubscriptions', JSON.stringify(activeBells))\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => this.setState({ snackbar: null })}\r\n                            duration=\"2000\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Вы будете уведомлены о начале боёв турнира\r\n                        </Snackbar>\r\n                    this.setState({snackbar : snackbar})    \r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при подписке на уведомление\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})       \r\n                })\r\n        } else {\r\n            unsubscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.splice(activeBells.indexOf(elem.tournament_id), 1)\r\n                    sessionStorage.setItem('activeSubscriptions', JSON.stringify(activeBells))\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при отписке от уведомления\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})     \r\n                })\r\n        }\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n            modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n            modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n            activeModal,\r\n            modalHistory\r\n        });\r\n\r\n        if (this.state.activeModal == null) {\r\n            var state = {modal: 'modal'}\r\n            var title = ''\r\n            document.body.style.overflow = \"hidden\";\r\n            history.pushState(state, title)\r\n        }\r\n    };\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message =   \"Началась регистрация на турнир \\\"\" + elem.title + \"\\\"\" +\r\n                        \"\\nОкончание регистрации: \" + TimeStr(elem.registration_end_at, \"dayAndTime\") +\r\n                        \"\\nНачало боев: \" + TimeStr(elem.start_at, \"dayAndTime\") +\r\n                        \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n        bridge\r\n        .send(\"VKWebAppShowWallPostBox\", request)\r\n        .then(data => {\r\n            if (this.state.snackbar) return\r\n            this.setState({snackbar: successSnackbar})\r\n        })     \r\n    }\r\n\r\n    shareLink() {\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ссылка скопирована' : 'Ссылка отправлена'}\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ошибка при копировании ссылки' : 'Ошибка при отправке ссылки'}\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        if (isDesktop) {\r\n            bridge\r\n            .send(\"VKWebAppCopyText\", {text: link})\r\n            .then(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})    \r\n            })   \r\n            .catch(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})    \r\n            })     \r\n        } else {\r\n            bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .then(data => {\r\n                const isDesktop = this.props.viewWidth > ViewWidth.MOBILE\r\n                if (isDesktop) {\r\n                    if (this.state.snackbar) return\r\n                    this.setState({snackbar: successSnackbar})    \r\n                }\r\n            })\r\n        }         \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        if (!isDesktop) {\r\n            var state = {actionShet: e.tournament_id}\r\n            var title = ''\r\n            history.pushState(state, title)\r\n        }\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => {\r\n                    this.setState({ popout: null })\r\n                    if (!isDesktop) {\r\n                        history.back()\r\n                    }    \r\n                }}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    {isDesktop ? 'Скопировать ссылку' : 'Отправить ссылку'}\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    checkSubscriptions() {\r\n        try {\r\n            activeBells = JSON.parse(sessionStorage.getItem('activeSubscriptions'))  \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n        bellArrayButtons = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1) \r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                else\r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                return p\r\n            }, {}\r\n        )\r\n        bellArrayModalAndroid = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1)\r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                else\r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n                return p\r\n            }, {}\r\n        )\r\n        bellArrayModalIOS = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1)\r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                else    \r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                return p\r\n            }, {}\r\n        ) \r\n        this.setState({bellsAndroid: bellArrayModalAndroid})\r\n        this.setState({bellsIOS: bellArrayModalIOS})\r\n        this.setState({bellsButtons: bellArrayButtons})\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n        setTimeout(() => {\r\n            this.checkSubscriptions()\r\n        }, 500)\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 200) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5\r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        window.addEventListener('scroll', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n        })\r\n\r\n        window.addEventListener('orientationchange', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()    \r\n        })\r\n\r\n        window.addEventListener('popstate', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n            setTimeout(() => {\r\n                if (this.state.activeModal != null)\r\n                this.modalBack()\r\n            }, 400)   \r\n        })\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader \r\n                                        left={\r\n                                            (isMobile && platform === IOS && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsIOS[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>)\r\n                                        }\r\n                                        right={\r\n                                            isMobile && (platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton> )\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (<PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                        }\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                            <div style={{marginLeft: 5}}>\r\n                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                    Идёт регистрация\r\n                                                </span>\r\n                                            </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        \r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Создано команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Подтвердило участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].confirmed == null ? 0 : tournamentInfo[elem[\"tournament_id\"]].confirmed}\r\n                                            </span>\r\n                                        </div>\r\n                                        \r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Registration\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16CheckCircleOutline style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.registration_start_at}/>\r\n                                                                </span>\r\n                                                                <br/>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16CancelCircleOutline style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.registration_end_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Начало боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16Recent style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.start_at} mode=\"dayAndTime\"/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-InfoButton\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\"onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsButtons[elem.tournament_id]}</Button>\r\n                                                </div> \r\n                                            </div>\r\n                                    </Card>\r\n                                \r\n                            )\r\n                        }\r\n                    </CardGrid>\r\n                    {this.state.snackbar}\r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет турниров с начавшейся регистрацией</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst RegStart = withPlatform(withAdaptivity(RegStartComponent, {viewWidth: true}))\r\n\r\nexport default RegStart;","import React from 'react';\r\nimport {Root, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, withAdaptivity, ViewWidth, withPlatform, IOS, ANDROID, PanelHeaderClose} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar, ActionSheetItem, ActionSheet} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\nimport subscribeResult from '../notification/notification_subscribe'\r\nimport unsubscribeResult from '../notification/notification_unsubscribe';\r\nimport { Icon28NotificationAddOutline } from '@vkontakte/icons';\r\nimport { Icon24NotificationCheckOutline } from '@vkontakte/icons';\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=registration_finished\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\n    var isOpenedFirstTime = false \r\n    var tournamentsID = []  \r\n    var positionY \r\n    var positionX\r\n    var stylesIsUpdated\r\n    var buttonHeight\r\n    var bellArrayButtons = {}\r\n    var bellArrayModalAndroid = {}\r\n    var bellArrayModalIOS = {}\r\n    var activeBells = []\r\n\r\n    function getPosition() {\r\n        stylesIsUpdated = false\r\n        buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n        positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n        positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n    }\r\n    \r\n    TournamentList['data'].map((elem) => {\r\n        tournamentsID.push(elem.tournament_id)\r\n        sessionStorage.setItem(elem.tournament_id, true)\r\n    })\r\n\r\n    bellArrayButtons = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>   \r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalAndroid = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalIOS = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n            return p\r\n        }, {}\r\n    )\r\n    \r\n\r\nclass RegFinishComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            activeModal: null,\r\n            modalHistory: [],\r\n            popout: null,\r\n            snackbar: null,\r\n            elem: null,\r\n            bellsButtons: bellArrayButtons,\r\n            bellsAndroid: bellArrayModalAndroid,\r\n            bellsIOS: bellArrayModalIOS\r\n        };\r\n\r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareTargetRef = React.createRef();\r\n        this.shareLink = this.shareLink.bind(this)\r\n\r\n        this.closeActionSheet = () => {\r\n            this.setState({ popout: null })\r\n        }\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n            history.back()\r\n            document.body.style.overflow = \"visible\";\r\n        };\r\n    }\r\n\r\n    subscribeToNotification(elem) {\r\n        var snackbar\r\n        if (activeBells.indexOf(elem.tournament_id) == -1) {\r\n            subscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.push(elem.tournament_id)\r\n                    sessionStorage.setItem('activeSubscriptions', JSON.stringify(activeBells))\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => this.setState({ snackbar: null })}\r\n                            duration=\"2000\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Вы будете уведомлены о начале боёв турнира\r\n                        </Snackbar>\r\n                    this.setState({snackbar : snackbar})    \r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при подписке на уведомление\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})       \r\n                })\r\n        } else {\r\n            unsubscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.splice(activeBells.indexOf(elem.tournament_id), 1)\r\n                    sessionStorage.setItem('activeSubscriptions', JSON.stringify(activeBells))\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при отписке от уведомления\r\n                        </Snackbar> \r\n                    if (this.state.snackbar) return\r\n                    this.setState({snackbar : snackbar})     \r\n                })\r\n        }\r\n    }\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message = \"Завершилась регистрация на турнир \\\"\" + elem.title + \"\\\"\" +\r\n                      \"\\nНачало боев: \" + TimeStr(elem.start_at) +\r\n                      \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n\r\n        bridge\r\n            .send(\"VKWebAppShowWallPostBox\", request)\r\n            .then(data => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})\r\n            })      \r\n    }\r\n\r\n    shareLink() {\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ссылка скопирована' : 'Ссылка отправлена'}\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ошибка при копировании ссылки' : 'Ошибка при отправке ссылки'}\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        if (isDesktop) {\r\n            bridge\r\n            .send(\"VKWebAppCopyText\", {text: link})\r\n            .then(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})    \r\n            })   \r\n            .catch(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})    \r\n            })    \r\n        } else {\r\n            bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .then(data => {\r\n                const isDesktop = this.props.viewWidth > ViewWidth.MOBILE\r\n                if (isDesktop) {\r\n                    if (this.state.snackbar) return\r\n                    this.setState({snackbar: successSnackbar})    \r\n                }\r\n            })\r\n        }         \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        if (!isDesktop) {\r\n            var state = {actionShet: e.tournament_id}\r\n            var title = ''\r\n            history.pushState(state, title)\r\n        }\r\n        if (!isDesktop) {\r\n            var state = {actionShet: e.tournament_id}\r\n            var title = ''\r\n            history.pushState(state, title)\r\n        }\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => {\r\n                    this.setState({ popout: null })\r\n                    if (!isDesktop) {\r\n                        history.back()\r\n                    }    \r\n                }}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    {isDesktop ? 'Скопировать ссылку' : 'Отправить ссылку'}\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n            modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n            modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n            activeModal,\r\n            modalHistory\r\n        });\r\n\r\n        if (this.state.activeModal == null) {\r\n            var state = {modal: 'modal'}\r\n            var title = ''\r\n            document.body.style.overflow = \"hidden\";\r\n            history.pushState(state, title)\r\n        }\r\n    };\r\n\r\n    checkSubscriptions() {\r\n        try {\r\n            activeBells = JSON.parse(sessionStorage.getItem('activeSubscriptions'))  \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n        bellArrayButtons = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1) \r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                else\r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                return p\r\n            }, {}\r\n        )\r\n        bellArrayModalAndroid = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1)\r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                else\r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n                return p\r\n            }, {}\r\n        )\r\n        bellArrayModalIOS = TournamentList['data'].reduce(\r\n            (p, e) => {\r\n                if (activeBells.indexOf(e.tournament_id) != -1)\r\n                    p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                else    \r\n                    p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                return p\r\n            }, {}\r\n        ) \r\n        this.setState({bellsAndroid: bellArrayModalAndroid})\r\n        this.setState({bellsIOS: bellArrayModalIOS})\r\n        this.setState({bellsButtons: bellArrayButtons})\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n        setTimeout(() => {\r\n            this.checkSubscriptions()\r\n        }, 500)\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 150) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5\r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        window.addEventListener('scroll', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n        })\r\n\r\n        window.addEventListener('orientationchange', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()    \r\n        })\r\n\r\n        window.addEventListener('popstate', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n            setTimeout(() => {\r\n                if (this.state.activeModal != null)\r\n                this.modalBack()\r\n            }, 400)\r\n        })\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader\r\n                                        left={\r\n                                            (isMobile && platform === IOS && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsIOS[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>)\r\n                                        }\r\n                                        right={\r\n                                            isMobile && (platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton> )\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (<PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                        }\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                Регистрация завершена\r\n                                            </span>\r\n                                        </div>    \r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Создано команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Подтвердило участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].confirmed}\r\n                                            </span>\r\n                                        </div>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main TournamentCard__Info-Main-OneItem\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Начало боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16CheckCircleOutline style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.start_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-InfoButton\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\"onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsButtons[elem.tournament_id]}</Button>\r\n                                                </div> \r\n                                            </div>\r\n                                    </Card>\r\n                                \r\n                            )\r\n                        }\r\n                    </CardGrid>\r\n                    {this.state.snackbar} \r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет турниров с завершённой регистрацией</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst RegFinish = withPlatform(withAdaptivity(RegFinishComponent, {viewWidth: true}))\r\n\r\nexport default RegFinish;","import React from 'react';\r\nimport {ActionSheet, Root, ActionSheetItem, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, ViewWidth, withAdaptivity, withPlatform, ANDROID, PanelHeaderClose, IOS} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=running\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\nvar isOpenedFirstTime = false \r\nvar tournamentsID = []  \r\nvar positionY \r\nvar positionX\r\nvar stylesIsUpdated\r\nvar buttonHeight\r\n\r\nTournamentList['data'].map((elem) => {\r\n    tournamentsID.push(elem.tournament_id)\r\n    sessionStorage.setItem(elem.tournament_id, true)\r\n})\r\n\r\nfunction getPosition() {\r\n    stylesIsUpdated = false\r\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n}   \r\n\r\nclass RunningComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n          activeModal: null,\r\n          modalHistory: [],\r\n          popout: null,\r\n          snackbar: null,\r\n          elem: null\r\n        };\r\n\r\n        this.shareTargetRef = React.createRef();\r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareLink = this.shareLink.bind(this)\r\n\r\n        this.closeActionSheet = () => {\r\n            this.setState({ popout: null })\r\n        }\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n            history.back()\r\n            document.body.style.overflow = \"visible\";\r\n        };\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n          modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n          modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n          modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n          activeModal,\r\n          modalHistory\r\n        });\r\n\r\n        if (this.state.activeModal == null) {\r\n            var state = {modal: 'modal'}\r\n            var title = ''\r\n            document.body.style.overflow = \"hidden\";\r\n            history.pushState(state, title)\r\n        }\r\n    };\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message =   \"Начался турнир \\\"\" + elem.title + \"\\\"\" +\r\n                        \"\\nОкончание боев: \" + TimeStr(elem.end_at, \"dayAndTime\") +\r\n                        \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n        bridge\r\n        .send(\"VKWebAppShowWallPostBox\", request)\r\n        .then(data => {\r\n            if (this.state.snackbar) return\r\n            this.setState({snackbar: successSnackbar})\r\n        })     \r\n    }\r\n\r\n    shareLink() {\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ссылка скопирована' : 'Ссылка отправлена'}\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ошибка при копировании ссылки' : 'Ошибка при отправке ссылки'}\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        if (isDesktop) {\r\n            bridge\r\n            .send(\"VKWebAppCopyText\", {text: link})\r\n            .then(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})    \r\n            })   \r\n            .catch(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})    \r\n            })    \r\n        } else {\r\n            bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .then(data => {\r\n                const isDesktop = this.props.viewWidth > ViewWidth.MOBILE\r\n                if (isDesktop) {\r\n                    if (this.state.snackbar) return\r\n                    this.setState({snackbar: successSnackbar})    \r\n                }\r\n            })\r\n        }        \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        if (!isDesktop) {\r\n            var state = {actionShet: e.tournament_id}\r\n            var title = ''\r\n            history.pushState(state, title)\r\n        }\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => {\r\n                    this.setState({ popout: null })\r\n                    if (!isDesktop) {\r\n                        history.back()\r\n                    }    \r\n                }}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    {isDesktop ? 'Скопировать ссылку' : 'Отправить ссылку'}\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 200) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5    \r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        window.addEventListener('scroll', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n        })\r\n\r\n        window.addEventListener('orientationchange', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()    \r\n        })\r\n\r\n        window.addEventListener('popstate', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n            setTimeout(() => {\r\n                if (this.state.activeModal != null)\r\n                this.modalBack()\r\n            }, 400)    \r\n        })\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader\r\n                                        right={isMobile && platform == IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton>}\r\n                                        left={isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>}\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                            <div style={{marginLeft: 5}}>\r\n                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                    Идут бои\r\n                                                </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Создано команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Подтвердило участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].confirmed}\r\n                                            </span>\r\n                                        </div>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main TournamentCard__Info-Main-OneItem\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16CheckCircleOutline style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.start_at}/>\r\n                                                                </span>\r\n                                                                <br/>\r\n                                                                <span style={{display: \"inline-flex\"}}>\r\n                                                                    <Icon16CancelCircleOutline style={{paddingTop: \"2.5px\"}} width={17} height={17}/><Time mode=\"dayAndTime\" timestamp={elem.end_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-InfoButton\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                </div>  \r\n                                            </div>\r\n                                    </Card>\r\n                                \r\n                            )\r\n                        }\r\n                    </CardGrid>\r\n                    {this.state.snackbar}                    \r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет начавшихся турниров</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst Running = withPlatform(withAdaptivity(RunningComponent, { viewWidth: true }))\r\n\r\nexport default Running;","import React from 'react';\r\nimport {CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, IOS, ANDROID, withPlatform, Group, Placeholder, ActionSheet, ActionSheetItem, Root, ViewWidth, withAdaptivity, PanelHeaderClose} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=finished\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );   \r\n\r\nvar isOpenedFirstTime = false \r\nvar tournamentsID = []  \r\nvar positionY \r\nvar positionX\r\nvar stylesIsUpdated\r\nvar buttonHeight\r\n\r\nTournamentList['data'].map((elem) => {\r\n    tournamentsID.push(elem.tournament_id)\r\n    sessionStorage.setItem(elem.tournament_id, true)\r\n})\r\n\r\nfunction getPosition() {\r\n    stylesIsUpdated = false\r\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n}\r\n    \r\nclass FinishComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n          activeModal: null,\r\n          modalHistory: [],\r\n          popout: null,\r\n          snackbar: null,\r\n          elem: null\r\n        };\r\n\r\n        this.shareTargetRef = React.createRef();\r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareLink = this.shareLink.bind(this)\r\n\r\n        this.closeActionSheet = () => {\r\n            this.setState({ popout: null })\r\n        }\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n            history.back()\r\n            document.body.style.overflow = \"visible\";\r\n        };\r\n    }\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message = TimeStr(elem.end_at, \"day\") + \" прошел турнир \\\"\" + elem.title + \"\\\"\" +\r\n                      \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n\r\n        bridge\r\n            .send(\"VKWebAppShowWallPostBox\", request)\r\n            .then(data => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})\r\n            })      \r\n    }\r\n\r\n    shareLink() {\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ссылка скопирована' : 'Ссылка отправлена'}\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                {isDesktop ? 'Ошибка при копировании ссылки' : 'Ошибка при отправке ссылки'}\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        if (isDesktop) {\r\n            bridge\r\n            .send(\"VKWebAppCopyText\", {text: link})\r\n            .then(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})    \r\n            })   \r\n            .catch(() => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})    \r\n            })   \r\n        } else {\r\n            bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .then(data => {\r\n                const isDesktop = this.props.viewWidth > ViewWidth.MOBILE\r\n                if (isDesktop) {\r\n                    if (this.state.snackbar) return\r\n                    this.setState({snackbar: successSnackbar})    \r\n                }\r\n            })\r\n        }   \r\n    }\r\n\r\n    openShareActionSheetFinish(e) {\r\n        getPosition()\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        if (!isDesktop) {\r\n            var state = {actionShet: e.tournament_id}\r\n            var title = ''\r\n            history.pushState(state, title)\r\n        }\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => {\r\n                    this.setState({ popout: null })\r\n                    if (!isDesktop) {\r\n                        history.back()\r\n                    }    \r\n                }}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    {isDesktop ? 'Скопировать ссылку' : 'Отправить ссылку'}\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n            modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n            modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n          activeModal,\r\n          modalHistory\r\n        });\r\n\r\n        if (this.state.activeModal == null) {\r\n            var state = {modal: 'modal'}\r\n            var title = ''\r\n            document.body.style.overflow = \"hidden\";\r\n            history.pushState(state, title)\r\n        }\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 200) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5    \r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        window.addEventListener('scroll', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n        })\r\n\r\n        window.addEventListener('orientationchange', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()    \r\n        })\r\n\r\n        window.addEventListener('popstate', () => {\r\n            if (this.state.popout != null)\r\n                this.closeActionSheet()\r\n            setTimeout(() => {\r\n                if (this.state.activeModal != null)\r\n                this.modalBack()\r\n            }, 400)    \r\n        })\r\n        \r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform;\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader \r\n                                        right={isMobile && platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton>}\r\n                                        left={isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}/>}\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                Турнир завершён\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Приняло участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\r\n                                            </span>\r\n                                        </div>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n\r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                <Card mode=\"outline\">\r\n                                        <div className={elem.status + \" border\"}></div>\r\n                                        <div className=\"TournamentCard\">\r\n                                            <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                            <div className=\"TornamentCard__Info\">\r\n                                                <div className=\"TornamentCard__Info-Start\">\r\n                                                    <Icon20CalendarOutline width={23} height={23}/>\r\n                                                    <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                        <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TournamentCard__Info-Main\">\r\n                                                    Турнир завершён\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"TornamentCard__Footer\">\r\n                                                <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-InfoButton\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheetFinish(elem)}><Icon16ReplyOutline/></Button>\r\n                                            </div> \r\n                                        </div>\r\n                                </Card>\r\n                            \r\n                            )\r\n                        }\r\n                    </CardGrid>\r\n                    {this.state.snackbar}\r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет завершённых турниров</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst Finish = withPlatform(withAdaptivity(FinishComponent, { viewWidth: true }));\r\n\r\nexport default Finish;","import React from 'react';\r\nimport Upcoming from \"./Upcoming\";\r\nimport RegStart from \"./RegistrationStart\";\r\nimport RegFinish from \"./RegistrationFinish\";\r\nimport Running from \"./Running\";\r\nimport Finish from \"./Finish\";\r\n\r\nclass All extends React.Component {\r\n    render() {\r\n        return(\r\n            <div>\r\n                <RegStart mode=\"none\"/>\r\n                <Upcoming mode=\"none\"/>\r\n                <RegFinish mode=\"none\"/>\r\n                <Running mode=\"none\"/>\r\n                <Finish mode=\"none\"/>\r\n            </div>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default All;","function getLaunchParams() {\r\n    var launchParams\r\n    return launchParams = \r\n        window\r\n            .location\r\n            .search\r\n            .replace('?', '')\r\n            .split('&')\r\n            .reduce(\r\n                (p, e) => {\r\n                    var a = e.split('=')\r\n                    p[decodeURIComponent(a[0])] = decodeURIComponent(a[1])\r\n                    return p\r\n                },\r\n                {}\r\n            )\r\n}\r\n\r\nexport default getLaunchParams","import React from 'react';\r\nimport {Avatar, Snackbar, PanelHeader, Group, Tabs, HorizontalScroll, ConfigProvider, TabsItem, FixedLayout, Separator, withPlatform, ViewWidth} from '@vkontakte/vkui';\r\nimport Upcoming from \"./getTournament/Upcoming\";\r\nimport All from \"./getTournament/all\";\r\nimport RegStart from \"./getTournament/RegistrationStart\";\r\nimport RegFinish from \"./getTournament/RegistrationFinish\";\r\nimport Running from \"./getTournament/Running\";\r\nimport Finish from \"./getTournament/Finish\";\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport getLaunchParams from './getParams/search'\r\nimport { Icon16Done } from '@vkontakte/icons';\r\n\r\nvar isOpen = false\r\n\r\nclass Application extends React.Component {\r\n\tconstructor(props) {\r\n\t  super(props);\r\n\r\n\t  this.state = {\r\n        contextOpened: false,\r\n        mode: 'all',\r\n\t\tactiveTab: 'all',\r\n\t\tsnackbar: null\r\n\t  };\r\n\t}\r\n\r\n\tenableNotifications() {\r\n\t\tthis.setState({snackbar: null})\r\n\t\tbridge\r\n\t\t\t.send(\"VKWebAppAllowNotifications\")\r\n\t\t\t.then(() => {\r\n\t\t\t\tconst snackbar =\r\n\t\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\t\tonClose={() => this.setState({ snackbar: null })}\r\n\t\t\t\t\t\t\tduration=\"1650\"\r\n\t\t\t\t\t\t\tbefore={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tВы включили уведомления\r\n\t\t\t\t\t\t</Snackbar>\r\n\t\t\t\tthis.setState({snackbar: snackbar})\t\t\t\r\n\t\t\t})\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n        if (window.location.hash != '' && !isOpen && !sessionStorage.getItem(window.location.hash.slice(1))) {\r\n            const errorSnackbar =\r\n\t\t\t\t<Snackbar\r\n\t\t\t\t\tonClose={() => \r\n\t\t\t\t\t\tthis.setState({ snackbar: null })\r\n\t\t\t\t\t}\r\n\t\t\t\t\tduration=\"2000\"\r\n\t\t\t\t\tbefore={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n\t\t\t\t>\r\n\t\t\t\t\tНет информации о турнире\r\n\t\t\t\t</Snackbar>\r\n\t\t\tthis.setState({snackbar: errorSnackbar})\t\t\r\n            isOpen = true\r\n        }\r\n\r\n\t\tvar params = getLaunchParams()\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tconsole.log(sessionStorage.getItem('activeSubscriptions'))\r\n\t\t\tif (window.location.hash == '' && !JSON.parse(sessionStorage.getItem('activeSubscriptions')).length == 0 && params.vk_are_notifications_enabled == 0) {\r\n\t\t\t\tconst errorSnackbar =\r\n\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\tonClose={() => \r\n\t\t\t\t\t\t\tthis.setState({ snackbar: null })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\t\tduration=\"2650\"\r\n\t\t\t\t\t\taction=\"Включить уведомления\"\r\n\t\t\t\t\t\tonActionClick={() => {\r\n\t\t\t\t\t\t\tthis.enableNotifications()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tbefore={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tУ вас есть активные подписки, но вы отключили уведомления <br/> Уведомления о нужных турнирах не придут \r\n\t\t\t\t\t</Snackbar>\r\n\t\t\t\tthis.setState({snackbar: errorSnackbar})\t\t\r\n\t\t\t}\r\n\t\t}, 500)\r\n    }\r\n\r\n\trender() {\r\n\t\tconst isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n\r\n\t\tbridge.subscribe((e) => {\r\n\t\t\tif (e.detail.type === \"VKWebAppDenyNotificationsResult\") {\r\n\t\t\t\tconst errorSnackbar =\r\n\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\tonClose={() => \r\n\t\t\t\t\t\t\tthis.setState({ snackbar: null })\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tduration=\"2500\"\r\n\t\t\t\t\t\tlayout=\"vertical\"\r\n\t\t\t\t\t\taction=\"Включить уведомления\"\r\n\t\t\t\t\t\tonActionClick={() => {\r\n\t\t\t\t\t\t\tthis.enableNotifications()\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tbefore={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tВы отключили уведомления от приложения <br/> Уведомления о нужных турнирах не придут \r\n\t\t\t\t\t</Snackbar>\r\n\t\t\t\tthis.setState({snackbar: errorSnackbar})\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (isDesktop) {\r\n\t\t\twindow.onfocus = (e) => {\r\n\t\t\t\tlet x = window.scrollX\r\n\t\t\t\tlet y = window.scrollY\r\n\r\n\t\t\t\tdocument.body.style.height = \"105%\"\r\n\t\t\t\twindow.scroll(x, y + 5)\r\n\t\t\t\twindow.scroll(x, y - 5)\r\n\t\t\t\tdocument.body.style.height = \"100%\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet content;\r\n\t\tif (this.state.activeTab === 'all') {\r\n\t\t\tcontent = <All/>\r\n\t\t}\r\n\t\tif (this.state.activeTab === 'upcoming') {\r\n\t\t\tcontent = <Upcoming/>;\r\n\t\t}\r\n\t\tif (this.state.activeTab === 'registration_started') {\r\n\t\t\tcontent = <RegStart/>;\r\n\t\t}\r\n\t\tif (this.state.activeTab === 'registration_finished') {\r\n\t\t\tcontent = <RegFinish/>;\r\n\t\t}\r\n\t\tif (this.state.activeTab === 'running') {\r\n\t\t\tcontent = <Running/>;\r\n\t\t}\r\n\t\tif (this.state.activeTab === 'finish') {\r\n\t\t\tcontent = <Finish/>;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t//<ConfigProvider platform=\"ios\">\r\n\t\t\t<span>\r\n\t\t\t\t<PanelHeader>Tурниры WoT Blitz</PanelHeader>\r\n\t\t\t\t<Group style={{paddingTop: 40}}>\r\n\t\t\t\t\t<FixedLayout vertical=\"top\" filled>\r\n\t\t\t\t\t\t<Tabs>\r\n\t\t\t\t\t\t\t<HorizontalScroll showArrows getScrollToLeft={i => i - 120} getScrollToRight={i => i + 120}>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'all'})\r\n\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'all'}\r\n\t\t\t\t\t\t\t\t>Все</TabsItem>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'registration_started'})\r\n\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'registration_started'}\r\n\t\t\t\t\t\t\t\t>Идёт регистрация</TabsItem>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'upcoming'})\r\n\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'upcoming'}\r\n\t\t\t\t\t\t\t\t>Запланированные</TabsItem>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tonClick={() => { \r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'registration_finished'})\r\n\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'registration_finished'}\r\n\t\t\t\t\t\t\t\t>Регистрация завершена</TabsItem>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'running'})\r\n\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'running'}\r\n\t\t\t\t\t\t\t\t>Идут бои</TabsItem>\r\n\t\t\t\t\t\t\t\t<TabsItem\r\n\t\t\t\t\t\t\t\t\tonClick={() => { \r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'finish'})\r\n\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'finish'}\r\n\t\t\t\t\t\t\t\t>Бои завершены</TabsItem>\r\n\t\t\t\t\t\t\t</HorizontalScroll>\r\n\t\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t\t<Separator wide />\r\n\t\t\t\t\t</FixedLayout>\r\n\t\t\t\t\t{content}\r\n\t\t\t\t\t{this.state.snackbar} \r\n\t\t\t\t</Group>\r\n\t\t\t</span>\r\n\t\t\t//</ConfigProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst App = () => {\r\n\treturn (\r\n\t\t<Application/>\t\r\n\t);\r\n}\r\n\r\nexport default withPlatform(App);\r\n\r\n"],"sourceRoot":""}