(this.webpackJsonptournemnt=this.webpackJsonptournemnt||[]).push([[0],{266:function(t,e,n){},267:function(t,e,n){"use strict";n.r(e);n(178),n(205),n(207),n(208),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247);var a=n(2),s=n.n(a),i=n(60),r=n.n(i),c=n(16),o=n.n(c),l=(n(255),n(29)),d=n(30),j=n(32),u=n(31),h=n(1),b=n(43),m=n(22),O=n(40),x=n.n(O),f=n(35),p=n.n(f),v=n(23),g=n.n(v),_=n(33),k=n.n(_),y=n(42),w=n.n(y),T=n(41),C=n.n(T),S=n(0);var B=function(t){var e=new Date(1e3*t.timestamp),n=e.getHours(),a=e.getMinutes(),s=e.getDate(),i=e.getMonth()+1,r=e.getFullYear(),c=i;switch(a<10&&(a="0"+a),i<10&&(c="0"+i),s<10&&(s="0"+s),t.mode){case"day":return Object(S.jsx)("span",{children:s+" "+["default","\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"][i]+" "+r});case"time":return Object(S.jsx)("span",{children:n+":"+a});case"dayAndTime":return Object(S.jsx)("span",{children:s+"."+c+", "+n+":"+a});default:return Object(S.jsx)("span",{children:s+"."+c+"."+r+", "+n+":"+a})}};var N=function(t,e){var n=new Date(1e3*t),a=n.getHours(),s=n.getMinutes(),i=n.getDate(),r=n.getMonth()+1,c=n.getFullYear(),o=r;switch(s<10&&(s="0"+s),r<10&&(o="0"+r),i<10&&(i="0"+i),e){case"day":return n.getDate()+" "+["default","\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"][r]+" "+c;case"time":return a+":"+s;case"dayAndTime":return i+"."+o+", "+a+":"+s;default:return i+"."+o+"."+c+", "+a+":"+s}},I=n(21),M=n.n(I),L=n(25),A=n.n(L),R=n(270);var W=function(t){return new Promise((function(e,n){o.a.send("VKWebAppAllowNotifications").then((function(){var a="https://wotbtournamentvkapp.ru/vkapp/subscribe".concat(window.location.search,"&tournament_id=").concat(t.tournament_id),s=new XMLHttpRequest;s.open("GET",a,!0),s.send(),s.onload=function(){try{200==JSON.parse(s.responseText)?e():n()}catch(t){n()}},s.onerror=function(){n()}}))}))};var H,P,z,E,F=function(t){return new Promise((function(e,n){var a="https://wotbtournamentvkapp.ru/vkapp/unsubscribe".concat(window.location.search,"&tournament_id=").concat(t.tournament_id),s=new XMLHttpRequest;s.open("GET",a,!0),s.send(),s.onload=function(){try{200==JSON.parse(s.responseText)?e():n()}catch(t){n()}},s.onerror=function(){n()}}))},q=n(269),G=n(268),D=!1,J=[],X={},K={},V={},U=[];var Y=new XMLHttpRequest;Y.open("POST","https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=upcoming",!1),Y.send();var Q=JSON.parse(Y.responseText),Z=Q.data.reduce((function(t,e){var n=new XMLHttpRequest;return n.open("POST","https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id="+e.tournament_id+"&fields=teams",!1),n.send(),t[e.tournament_id]=JSON.parse(n.responseText).data[e.tournament_id].teams,t}),{});Q.data.map((function(t){J.push(t.tournament_id)})),X=Q.data.reduce((function(t,e){return-1!=U.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),t}),{}),K=Q.data.reduce((function(t,e){return-1!=U.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}):t[e.tournament_id]=Object(S.jsx)(q.a,{}),t}),{}),V=Q.data.reduce((function(t,e){return-1!=U.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),t}),{});var $=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={activeModal:null,modalHistory:[],popout:null,snackbar:null,elem:null,bellsButtons:X,bellsAndroid:K,bellsIOS:V},a.sendPost=a.sendPost.bind(Object(m.a)(a)),a.shareTargetRef=s.a.createRef(),a.shareLink=a.shareLink.bind(Object(m.a)(a)),a.closeActionSheet=function(){a.setState({popout:null})},a.modalBack=function(){a.setActiveModal(a.state.modalHistory[a.state.modalHistory.length-2])},a}return Object(d.a)(n,[{key:"subscribeToNotification",value:function(t){var e,n=this;-1==U.indexOf(t.tournament_id)?W(t).then((function(){U.push(t.tournament_id),K[t.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}),V[t.tournament_id]=Object(S.jsx)(G.a,{}),X[t.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}),n.setState({bellsAndroid:K}),n.setState({bellsIOS:V}),n.setState({bellsButtons:X}),e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u044b \u043e \u043d\u0430\u0447\u0430\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043d\u0430 \u0442\u0443\u0440\u043d\u0438\u0440"}),n.setState({snackbar:e})})).catch((function(){e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"1500",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0435 \u043d\u0430 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435"}),n.setState({snackbar:e})})):F(t).then((function(){U.splice(U.indexOf(t.tournament_id),1),K[t.tournament_id]=Object(S.jsx)(q.a,{}),V[t.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),X[t.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),n.setState({bellsAndroid:K}),n.setState({bellsIOS:V}),n.setState({bellsButtons:X})})).catch((function(){e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"1500",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0438\u0441\u043a\u0435 \u043e\u0442 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"}),n.setState({snackbar:e})}))}},{key:"buildRequest",value:function(t){return{message:N(t.start_at,"day")+' \u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d \u0442\u0443\u0440\u043d\u0438\u0440 "'+t.title+'"\n\n\u041d\u0430\u0447\u0430\u043b\u043e \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: '+N(t.registration_start_at,"dayAndTime")+"\n\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: "+N(t.registration_end_at,"dayAndTime")+"\n\n\u041d\u0430\u0447\u0430\u043b\u043e \u0431\u043e\u0435\u0432: "+N(t.start_at,"dayAndTime")+"\n\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u0437\u043d\u0430\u0442\u044c \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438:",attachments:"https://vk.com/app7446072#"+t.tournament_id}}},{key:"sendPost",value:function(){var t=this,e=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"}),n=this.buildRequest(this.state.elem);o.a.send("VKWebAppShowWallPostBox",n).then((function(n){t.state.snackbar||t.setState({snackbar:e})}))}},{key:"shareLink",value:function(){var t=this,e=this.props.viewWidth>h.B.MOBILE,n=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:e?"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"}),a=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:e?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0438":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u0441\u044b\u043b\u043a\u0438"}),s="https://vk.com/app7446072#"+this.state.elem.tournament_id;e?navigator.clipboard.writeText(s).then((function(){t.state.snackbar||t.setState({snackbar:n})})).catch((function(){t.state.snackbar||t.setState({snackbar:a})})):o.a.send("VKWebAppShare",{link:s}).then((function(e){if(t.props.viewWidth>h.B.MOBILE){if(t.state.snackbar)return;t.setState({snackbar:n})}}))}},{key:"openShareActionSheet",value:function(t){var e=this;z=!1,E=event.target.closest(".vkuiButton").getBoundingClientRect().height,H=event.target.closest(".vkuiButton").getBoundingClientRect().top,P=event.target.closest(".vkuiButton").getBoundingClientRect().left;var n=this.props.viewWidth>h.B.MOBILE;this.setState({elem:t}),this.setState({popout:Object(S.jsxs)(h.b,{onClose:function(){return e.setState({popout:null})},iosCloseItem:Object(S.jsx)(h.c,{autoclose:!0,mode:"cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),header:"\u041a\u0430\u043a \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u043c?",toggleRef:this.shareTargetRef.current,children:[Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.sendPost()},children:"\u041d\u0430 \u0441\u0442\u0435\u043d\u0435"}),Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.shareLink()},children:n?"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})})}},{key:"setActiveModal",value:function(t){t=t||null;var e=this.state.modalHistory?Object(b.a)(this.state.modalHistory):[];null===t?e=[]:-1!==e.indexOf(t)?e=e.splice(0,e.indexOf(t)+1):e.push(t),this.setState({activeModal:t,modalHistory:e})}},{key:"componentDidMount",value:function(){var t=this;""==window.location.hash||D||-1==J.indexOf(Number(window.location.hash.slice(1)))||(this.setActiveModal(Number(window.location.hash.slice(1))),D=!0);var e=new XMLHttpRequest;e.open("GET","https://wotbtournamentvkapp.ru/vkapp/activeSubscriptions".concat(window.location.search),!0),e.send(),e.onload=function(){try{U=JSON.parse(e.responseText)}catch(n){console.log(n)}X=Q.data.reduce((function(t,e){return-1!=U.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),t}),{}),K=Q.data.reduce((function(t,e){return-1!=U.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}):t[e.tournament_id]=Object(S.jsx)(q.a,{}),t}),{}),V=Q.data.reduce((function(t,e){return-1!=U.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),t}),{}),t.setState({bellsAndroid:K}),t.setState({bellsIOS:V}),t.setState({bellsButtons:X})}}},{key:"componentDidUpdate",value:function(){var t=document.getElementsByClassName("vkuiActionSheet--desktop");t[0]&&new MutationObserver((function(e){e&&!z&&(document.documentElement.clientHeight-H<200?H=H-t[0].getBoundingClientRect().height-5:H+=E+5,t[0].style.top=H+"px",t[0].style.left=P+"px",z=!0)})).observe(t[0],{attributes:!0,attributeFilter:["style"]})}},{key:"render",value:function(){var t=this;window.addEventListener("scroll",(function(){null!=t.state.popout&&t.closeActionSheet()}));var e=this.props.viewWidth>h.B.MOBILE,n=this.props.viewWidth<=h.B.MOBILE,a=this.props.platform;if(0!==Q.data.length)var s=Object(S.jsx)(h.p,{activeModal:this.state.activeModal,onClose:this.modalBack,children:Q.data.map((function(e){return Object(S.jsx)(h.n,{id:e.tournament_id,onClose:t.modalBack,header:Object(S.jsx)(h.o,{left:n&&a===h.m&&Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsIOS[e.tournament_id]})||n&&a===h.a&&Object(S.jsx)(h.t,{onClick:t.modalBack}),right:n&&a===h.m&&Object(S.jsx)(h.s,{onClick:t.modalBack,children:Object(S.jsx)(R.a,{})})||n&&a===h.a&&Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsAndroid[e.tournament_id]})||Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsAndroid[e.tournament_id]}),children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:Object(S.jsxs)("div",{className:"ModalPage__Content Turnament-Information__Group",children:[Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("h4",{children:e.title})}),Object(S.jsxs)(h.k,{className:"vkuiGroup--custom-separator",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsx)("span",{style:{display:"inline-flex",alignItems:"center"},children:"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d"})}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0431\u043e\u0451\u0432"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"green"}}),Object(S.jsx)(B,{timestamp:e.start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"rgb(200, 0, 0)"}}),Object(S.jsx)(B,{timestamp:e.end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041a\u043e\u043c\u0430\u043d\u0434\u044b"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",Z[e.tournament_id].max]})})]}),Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("p",{className:"Pre",children:e.description})})]})})}))}),i=Object(S.jsxs)(h.v,{modal:s,popout:this.state.popout,children:[Object(S.jsx)(h.i,{size:e?"m":"l",children:Q.data.map((function(e){return Object(S.jsxs)(h.h,{mode:"outline",children:[Object(S.jsx)("div",{className:e.status+" border"}),Object(S.jsxs)("div",{className:"TournamentCard",children:[Object(S.jsx)("div",{className:"TournamentCard__Header",children:e.title}),Object(S.jsxs)("div",{className:"TornamentCard__Info",children:[Object(S.jsxs)("div",{className:"TornamentCard__Info-Start",children:[Object(S.jsx)(x.a,{width:23,height:23}),Object(S.jsx)("div",{className:"TornamentCard__Info-Start-Text",children:Object(S.jsx)(B,{timestamp:e.start_at,mode:"day"})})]}),Object(S.jsxs)("div",{className:"TournamentCard__Info-Main",children:[Object(S.jsxs)("div",{className:"TournamentCard__Info-Main-Registration",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_end_at})]})]})]}),Object(S.jsxs)("div",{className:"TournamentCard__Info-Main-Start",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041d\u0430\u0447\u0430\u043b\u043e \u0431\u043e\u0451\u0432"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.start_at,mode:"dayAndTime"})]})})]})]})]}),Object(S.jsxs)("div",{className:"TornamentCard__Footer",children:[Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button",mode:"outline",before:Object(S.jsx)(C.a,{}),onClick:function(){return t.setActiveModal(e.tournament_id)},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",getRootRef:t.shareTargetRef,onClick:function(){return t.openShareActionSheet(e)},children:Object(S.jsx)(w.a,{})}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsButtons[e.tournament_id]})]})]})]})}))}),this.state.snackbar]});else if("none"==this.props.mode)i=Object(S.jsx)("span",{});else i=Object(S.jsx)(h.u,{children:"\u041d\u0435\u0442 \u0437\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u0432"});return i}}]),n}(s.a.Component),tt=Object(h.D)(Object(h.C)($,{viewWidth:!0})),et=new XMLHttpRequest;et.open("POST","https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=registration_started",!1),et.send();var nt,at,st,it,rt=JSON.parse(et.responseText),ct=rt.data.reduce((function(t,e){var n=new XMLHttpRequest;return n.open("POST","https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id="+e.tournament_id+"&fields=teams",!1),n.send(),t[e.tournament_id]=JSON.parse(n.responseText).data[e.tournament_id].teams,t}),{}),ot=!1,lt=[],dt={},jt={},ut={},ht=[];rt.data.map((function(t){lt.push(t.tournament_id)})),dt=rt.data.reduce((function(t,e){return-1!=ht.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),t}),{}),jt=rt.data.reduce((function(t,e){return-1!=ht.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}):t[e.tournament_id]=Object(S.jsx)(q.a,{}),t}),{}),ut=rt.data.reduce((function(t,e){return-1!=ht.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),t}),{});var bt=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={activeModal:null,modalHistory:[],popout:null,snackbar:null,elem:null,bellsButtons:dt,bellsAndroid:jt,bellsIOS:ut},a.shareTargetRef=s.a.createRef(),a.sendPost=a.sendPost.bind(Object(m.a)(a)),a.shareLink=a.shareLink.bind(Object(m.a)(a)),a.closeActionSheet=function(){a.setState({popout:null})},a.modalBack=function(){a.setActiveModal(a.state.modalHistory[a.state.modalHistory.length-2])},a}return Object(d.a)(n,[{key:"subscribeToNotification",value:function(t){var e,n=this;-1==ht.indexOf(t.tournament_id)?W(t).then((function(){ht.push(t.tournament_id),jt[t.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}),ut[t.tournament_id]=Object(S.jsx)(G.a,{}),dt[t.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}),n.setState({bellsAndroid:jt}),n.setState({bellsIOS:ut}),n.setState({bellsButtons:dt}),e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u044b \u043e \u043d\u0430\u0447\u0430\u043b\u0435 \u0431\u043e\u0451\u0432 \u0442\u0443\u0440\u043d\u0438\u0440\u0430"}),n.setState({snackbar:e})})).catch((function(){e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"1500",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0435 \u043d\u0430 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435"}),n.setState({snackbar:e})})):F(t).then((function(){ht.splice(ht.indexOf(t.tournament_id),1),jt[t.tournament_id]=Object(S.jsx)(q.a,{}),ut[t.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),dt[t.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),n.setState({bellsAndroid:jt}),n.setState({bellsIOS:ut}),n.setState({bellsButtons:dt})})).catch((function(){e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"1500",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0438\u0441\u043a\u0435 \u043e\u0442 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"}),n.setState({snackbar:e})}))}},{key:"setActiveModal",value:function(t){t=t||null;var e=this.state.modalHistory?Object(b.a)(this.state.modalHistory):[];null===t?e=[]:-1!==e.indexOf(t)?e=e.splice(0,e.indexOf(t)+1):e.push(t),this.setState({activeModal:t,modalHistory:e})}},{key:"buildRequest",value:function(t){return{message:'\u041d\u0430\u0447\u0430\u043b\u0430\u0441\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0442\u0443\u0440\u043d\u0438\u0440 \u0442\u0443\u0440\u043d\u0438\u0440 "'+t.title+'"\n\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: '+N(t.registration_end_at,"dayAndTime")+"\n\u041d\u0430\u0447\u0430\u043b\u043e \u0431\u043e\u0435\u0432: "+N(t.start_at,"dayAndTime")+"\n\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u0437\u043d\u0430\u0442\u044c \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438:",attachments:"https://vk.com/app7446072#"+t.tournament_id}}},{key:"sendPost",value:function(){var t=this,e=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"}),n=this.buildRequest(this.state.elem);o.a.send("VKWebAppShowWallPostBox",n).then((function(n){t.state.snackbar||t.setState({snackbar:e})}))}},{key:"shareLink",value:function(){var t=this,e=this.props.viewWidth>h.B.MOBILE,n=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:e?"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"}),a=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u0441\u044b\u043b\u043a\u0438"}),s="https://vk.com/app7446072#"+this.state.elem.tournament_id;e?navigator.clipboard.writeText(s).then((function(){t.state.snackbar||t.setState({snackbar:n})})).catch((function(){t.state.snackbar||t.setState({snackbar:a})})):o.a.send("VKWebAppShare",{link:s}).then((function(e){if(t.props.viewWidth>h.B.MOBILE){if(t.state.snackbar)return;t.setState({snackbar:n})}}))}},{key:"openShareActionSheet",value:function(t){var e=this;st=!1,it=event.target.closest(".vkuiButton").getBoundingClientRect().height,nt=event.target.closest(".vkuiButton").getBoundingClientRect().top,at=event.target.closest(".vkuiButton").getBoundingClientRect().left;var n=this.props.viewWidth>h.B.MOBILE;this.setState({elem:t}),this.setState({popout:Object(S.jsxs)(h.b,{onClose:function(){return e.setState({popout:null})},iosCloseItem:Object(S.jsx)(h.c,{autoclose:!0,mode:"cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),header:"\u041a\u0430\u043a \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u043c?",toggleRef:this.shareTargetRef.current,children:[Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.sendPost()},children:"\u041d\u0430 \u0441\u0442\u0435\u043d\u0435"}),Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.shareLink()},children:n?"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})})}},{key:"componentDidMount",value:function(){var t=this;""==window.location.hash||ot||-1==lt.indexOf(Number(window.location.hash.slice(1)))||(this.setActiveModal(Number(window.location.hash.slice(1))),ot=!0);var e=new XMLHttpRequest;e.open("GET","https://wotbtournamentvkapp.ru/vkapp/activeSubscriptions".concat(window.location.search),!0),e.send(),e.onload=function(){try{ht=JSON.parse(e.responseText)}catch(n){console.log(n)}dt=rt.data.reduce((function(t,e){return-1!=ht.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),t}),{}),jt=rt.data.reduce((function(t,e){return-1!=ht.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}):t[e.tournament_id]=Object(S.jsx)(q.a,{}),t}),{}),ut=rt.data.reduce((function(t,e){return-1!=ht.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),t}),{}),t.setState({bellsAndroid:jt}),t.setState({bellsIOS:ut}),t.setState({bellsButtons:dt})}}},{key:"componentDidUpdate",value:function(){var t=document.getElementsByClassName("vkuiActionSheet--desktop");t[0]&&new MutationObserver((function(e){e&&!st&&(document.documentElement.clientHeight-nt<200?nt=nt-t[0].getBoundingClientRect().height-5:nt+=it+5,t[0].style.top=nt+"px",t[0].style.left=at+"px",st=!0)})).observe(t[0],{attributes:!0,attributeFilter:["style"]})}},{key:"render",value:function(){var t=this;window.addEventListener("scroll",(function(){null!=t.state.popout&&t.closeActionSheet()}));var e=this.props.viewWidth>h.B.MOBILE,n=this.props.viewWidth<=h.B.MOBILE,a=this.props.platform;if(0!==rt.data.length)var s=Object(S.jsx)(h.p,{activeModal:this.state.activeModal,onClose:this.modalBack,children:rt.data.map((function(e){return Object(S.jsx)(h.n,{id:e.tournament_id,onClose:t.modalBack,header:Object(S.jsx)(h.o,{left:n&&a===h.m&&Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsIOS[e.tournament_id]})||n&&a===h.a&&Object(S.jsx)(h.t,{onClick:t.modalBack}),right:n&&a===h.m&&Object(S.jsx)(h.s,{onClick:t.modalBack,children:Object(S.jsx)(R.a,{})})||n&&a===h.a&&Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsAndroid[e.tournament_id]})||Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsAndroid[e.tournament_id]}),children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:Object(S.jsxs)("div",{className:"ModalPage__Content Turnament-Information__Group",children:[Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("h4",{children:e.title})}),Object(S.jsxs)(h.k,{className:"vkuiGroup--custom-separator",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsx)("span",{style:{display:"inline-flex",alignItems:"center"},children:"\u0418\u0434\u0451\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0431\u043e\u0451\u0432"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"green"}}),Object(S.jsx)(B,{timestamp:e.start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"rgb(200, 0, 0)"}}),Object(S.jsx)(B,{timestamp:e.end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041a\u043e\u043c\u0430\u043d\u0434\u044b"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",ct[e.tournament_id].max]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",ct[e.tournament_id].total]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u043e \u0443\u0447\u0430\u0441\u0442\u0438\u0435:\xa0"})," ",ct[e.tournament_id].confirmed]})]})]}),Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("p",{className:"Pre",children:e.description})})]})})}))}),i=Object(S.jsxs)(h.v,{modal:s,popout:this.state.popout,children:[Object(S.jsx)(h.i,{size:e?"m":"l",children:rt.data.map((function(e){return Object(S.jsxs)(h.h,{mode:"outline",children:[Object(S.jsx)("div",{className:e.status+" border"}),Object(S.jsxs)("div",{className:"TournamentCard",children:[Object(S.jsx)("div",{className:"TournamentCard__Header",children:e.title}),Object(S.jsxs)("div",{className:"TornamentCard__Info",children:[Object(S.jsxs)("div",{className:"TornamentCard__Info-Start",children:[Object(S.jsx)(x.a,{width:23,height:23}),Object(S.jsx)("div",{className:"TornamentCard__Info-Start-Text",children:Object(S.jsx)(B,{timestamp:e.start_at,mode:"day"})})]}),Object(S.jsxs)("div",{className:"TournamentCard__Info-Main",children:[Object(S.jsxs)("div",{className:"TournamentCard__Info-Main-Registration",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_end_at})]})]})]}),Object(S.jsxs)("div",{className:"TournamentCard__Info-Main-Start",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041d\u0430\u0447\u0430\u043b\u043e \u0431\u043e\u0451\u0432"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.start_at,mode:"dayAndTime"})]})})]})]})]}),Object(S.jsxs)("div",{className:"TornamentCard__Footer",children:[Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button",mode:"outline",before:Object(S.jsx)(C.a,{}),onClick:function(){return t.setActiveModal(e.tournament_id)},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",getRootRef:t.shareTargetRef,onClick:function(){return t.openShareActionSheet(e)},children:Object(S.jsx)(w.a,{})}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsButtons[e.tournament_id]})]})]})]})}))}),this.state.snackbar]});else if("none"==this.props.mode)i=Object(S.jsx)("span",{});else i=Object(S.jsx)(h.u,{children:"\u041d\u0435\u0442 \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u0432 \u0441 \u043d\u0430\u0447\u0430\u0432\u0448\u0435\u0439\u0441\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439"});return i}}]),n}(s.a.Component),mt=Object(h.D)(Object(h.C)(bt,{viewWidth:!0})),Ot=new XMLHttpRequest;Ot.open("POST","https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=registration_finished",!1),Ot.send();var xt,ft,pt,vt,gt=JSON.parse(Ot.responseText),_t=gt.data.reduce((function(t,e){var n=new XMLHttpRequest;return n.open("POST","https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id="+e.tournament_id+"&fields=teams",!1),n.send(),t[e.tournament_id]=JSON.parse(n.responseText).data[e.tournament_id].teams,t}),{}),kt=!1,yt=[],wt={},Tt={},Ct={},St=[];gt.data.map((function(t){yt.push(t.tournament_id)})),wt=gt.data.reduce((function(t,e){return-1!=St.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),t}),{}),Tt=gt.data.reduce((function(t,e){return-1!=St.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}):t[e.tournament_id]=Object(S.jsx)(q.a,{}),t}),{}),Ct=gt.data.reduce((function(t,e){return-1!=St.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),t}),{});var Bt=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={activeModal:null,modalHistory:[],popout:null,snackbar:null,elem:null,bellsButtons:wt,bellsAndroid:Tt,bellsIOS:Ct},a.sendPost=a.sendPost.bind(Object(m.a)(a)),a.shareTargetRef=s.a.createRef(),a.shareLink=a.shareLink.bind(Object(m.a)(a)),a.closeActionSheet=function(){a.setState({popout:null})},a.modalBack=function(){a.setActiveModal(a.state.modalHistory[a.state.modalHistory.length-2])},a}return Object(d.a)(n,[{key:"subscribeToNotification",value:function(t){var e,n=this;-1==St.indexOf(t.tournament_id)?W(t).then((function(){St.push(t.tournament_id),Tt[t.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}),Ct[t.tournament_id]=Object(S.jsx)(G.a,{}),wt[t.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}),n.setState({bellsAndroid:Tt}),n.setState({bellsIOS:Ct}),n.setState({bellsButtons:wt}),e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0412\u044b \u0431\u0443\u0434\u0435\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u044b \u043e \u043d\u0430\u0447\u0430\u043b\u0435 \u0431\u043e\u0451\u0432 \u0442\u0443\u0440\u043d\u0438\u0440\u0430"}),n.setState({snackbar:e})})).catch((function(){e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"1500",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0435 \u043d\u0430 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435"}),n.setState({snackbar:e})})):F(t).then((function(){St.splice(St.indexOf(t.tournament_id),1),Tt[t.tournament_id]=Object(S.jsx)(q.a,{}),Ct[t.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),wt[t.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),n.setState({bellsAndroid:Tt}),n.setState({bellsIOS:Ct}),n.setState({bellsButtons:wt})})).catch((function(){e=Object(S.jsx)(h.x,{onClose:function(){return n.setState({snackbar:null})},duration:"1500",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0438\u0441\u043a\u0435 \u043e\u0442 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"}),n.setState({snackbar:e})}))}},{key:"buildRequest",value:function(t){return{message:'\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0430\u0441\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0430 \u0442\u0443\u0440\u043d\u0438\u0440 "'+t.title+'"\n\u041d\u0430\u0447\u0430\u043b\u043e \u0431\u043e\u0435\u0432: '+N(t.start_at)+"\n\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u0437\u043d\u0430\u0442\u044c \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438:",attachments:"https://vk.com/app7446072#"+t.tournament_id}}},{key:"sendPost",value:function(){var t=this,e=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"}),n=this.buildRequest(this.state.elem);o.a.send("VKWebAppShowWallPostBox",n).then((function(n){t.state.snackbar||t.setState({snackbar:e})}))}},{key:"shareLink",value:function(){var t=this,e=this.props.viewWidth>h.B.MOBILE,n=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:e?"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"}),a=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:e?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0438":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u0441\u044b\u043b\u043a\u0438"}),s="https://vk.com/app7446072#"+this.state.elem.tournament_id;e?navigator.clipboard.writeText(s).then((function(){t.state.snackbar||t.setState({snackbar:n})})).catch((function(){t.state.snackbar||t.setState({snackbar:a})})):o.a.send("VKWebAppShare",{link:s}).then((function(e){if(t.props.viewWidth>h.B.MOBILE){if(t.state.snackbar)return;t.setState({snackbar:n})}}))}},{key:"openShareActionSheet",value:function(t){var e=this;pt=!1,vt=event.target.closest(".vkuiButton").getBoundingClientRect().height,xt=event.target.closest(".vkuiButton").getBoundingClientRect().top,ft=event.target.closest(".vkuiButton").getBoundingClientRect().left;var n=this.props.viewWidth>h.B.MOBILE;this.setState({elem:t}),this.setState({popout:Object(S.jsxs)(h.b,{onClose:function(){return e.setState({popout:null})},iosCloseItem:Object(S.jsx)(h.c,{autoclose:!0,mode:"cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),header:"\u041a\u0430\u043a \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u043c?",toggleRef:this.shareTargetRef.current,children:[Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.sendPost()},children:"\u041d\u0430 \u0441\u0442\u0435\u043d\u0435"}),Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.shareLink()},children:n?"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})})}},{key:"setActiveModal",value:function(t){t=t||null;var e=this.state.modalHistory?Object(b.a)(this.state.modalHistory):[];null===t?e=[]:-1!==e.indexOf(t)?e=e.splice(0,e.indexOf(t)+1):e.push(t),this.setState({activeModal:t,modalHistory:e})}},{key:"componentDidMount",value:function(){var t=this;""==window.location.hash||kt||-1==yt.indexOf(Number(window.location.hash.slice(1)))||(this.setActiveModal(Number(window.location.hash.slice(1))),kt=!0);var e=new XMLHttpRequest;e.open("GET","https://wotbtournamentvkapp.ru/vkapp/activeSubscriptions".concat(window.location.search),!0),e.send(),e.onload=function(){try{St=JSON.parse(e.responseText)}catch(n){console.log(n)}wt=gt.data.reduce((function(t,e){return-1!=St.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:19,height:21}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:19,height:21}),t}),{}),Tt=gt.data.reduce((function(t,e){return-1!=St.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{width:28,height:28}):t[e.tournament_id]=Object(S.jsx)(q.a,{}),t}),{}),Ct=gt.data.reduce((function(t,e){return-1!=St.indexOf(e.tournament_id)?t[e.tournament_id]=Object(S.jsx)(G.a,{}):t[e.tournament_id]=Object(S.jsx)(q.a,{width:24,height:24}),t}),{}),t.setState({bellsAndroid:Tt}),t.setState({bellsIOS:Ct}),t.setState({bellsButtons:wt})}}},{key:"componentDidUpdate",value:function(){var t=document.getElementsByClassName("vkuiActionSheet--desktop");t[0]&&new MutationObserver((function(e){e&&!pt&&(document.documentElement.clientHeight-xt<150?xt=xt-t[0].getBoundingClientRect().height-5:xt+=vt+5,t[0].style.top=xt+"px",t[0].style.left=ft+"px",pt=!0)})).observe(t[0],{attributes:!0,attributeFilter:["style"]})}},{key:"render",value:function(){var t=this;window.addEventListener("scroll",(function(){null!=t.state.popout&&t.closeActionSheet()}));var e=this.props.viewWidth>h.B.MOBILE,n=this.props.viewWidth<=h.B.MOBILE,a=this.props.platform;if(0!==gt.data.length)var s=Object(S.jsx)(h.p,{activeModal:this.state.activeModal,onClose:this.modalBack,children:gt.data.map((function(e){return Object(S.jsx)(h.n,{id:e.tournament_id,onClose:t.modalBack,header:Object(S.jsx)(h.o,{left:n&&a===h.m&&Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsIOS[e.tournament_id]})||n&&a===h.a&&Object(S.jsx)(h.t,{onClick:t.modalBack}),right:n&&a===h.m&&Object(S.jsx)(h.s,{onClick:t.modalBack,children:Object(S.jsx)(R.a,{})})||n&&a===h.a&&Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsAndroid[e.tournament_id]})||Object(S.jsx)(h.s,{onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsAndroid[e.tournament_id]}),children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:Object(S.jsxs)("div",{className:"ModalPage__Content Turnament-Information__Group",children:[Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("h4",{children:e.title})}),Object(S.jsxs)(h.k,{className:"vkuiGroup--custom-separator",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsx)("span",{style:{display:"inline-flex",alignItems:"center"},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"})}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0431\u043e\u0451\u0432"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"green"}}),Object(S.jsx)(B,{timestamp:e.start_at})]})}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"rgb(200, 0, 0)"}}),Object(S.jsx)(B,{timestamp:e.end_at})]})}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041a\u043e\u043c\u0430\u043d\u0434\u044b"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",_t[e.tournament_id].max]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",_t[e.tournament_id].total]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u043e \u0443\u0447\u0430\u0441\u0442\u0438\u0435:\xa0"})," ",_t[e.tournament_id].confirmed]})]})]}),Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("p",{className:"Pre",children:e.description})})]})})}))}),i=Object(S.jsxs)(h.v,{modal:s,popout:this.state.popout,children:[Object(S.jsx)(h.i,{size:e?"m":"l",children:gt.data.map((function(e){return Object(S.jsxs)(h.h,{mode:"outline",children:[Object(S.jsx)("div",{className:e.status+" border"}),Object(S.jsxs)("div",{className:"TournamentCard",children:[Object(S.jsx)("div",{className:"TournamentCard__Header",children:e.title}),Object(S.jsxs)("div",{className:"TornamentCard__Info",children:[Object(S.jsxs)("div",{className:"TornamentCard__Info-Start",children:[Object(S.jsx)(x.a,{width:23,height:23}),Object(S.jsx)("div",{className:"TornamentCard__Info-Start-Text",children:Object(S.jsx)(B,{timestamp:e.start_at,mode:"day"})})]}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main TournamentCard__Info-Main-OneItem",children:Object(S.jsxs)("div",{className:"TournamentCard__Info-Main-Start",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041d\u0430\u0447\u0430\u043b\u043e \u0431\u043e\u0451\u0432"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.start_at})]})})]})})]}),Object(S.jsxs)("div",{className:"TornamentCard__Footer",children:[Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button",mode:"outline",before:Object(S.jsx)(C.a,{}),onClick:function(){return t.setActiveModal(e.tournament_id)},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",getRootRef:t.shareTargetRef,onClick:function(){return t.openShareActionSheet(e)},children:Object(S.jsx)(w.a,{})}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",onClick:function(){return t.subscribeToNotification(e)},children:t.state.bellsButtons[e.tournament_id]})]})]})]})}))}),this.state.snackbar]});else if("none"==this.props.mode)i=Object(S.jsx)("span",{});else i=Object(S.jsx)(h.u,{children:"\u041d\u0435\u0442 \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u0432 \u0441 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u043e\u0439 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439"});return i}}]),n}(s.a.Component),Nt=Object(h.D)(Object(h.C)(Bt,{viewWidth:!0})),It=new XMLHttpRequest;It.open("POST","https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=running",!1),It.send();var Mt,Lt,At,Rt,Wt=JSON.parse(It.responseText),Ht=Wt.data.reduce((function(t,e){var n=new XMLHttpRequest;return n.open("POST","https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id="+e.tournament_id+"&fields=teams",!1),n.send(),t[e.tournament_id]=JSON.parse(n.responseText).data[e.tournament_id].teams,t}),{}),Pt=!1,zt=[];Wt.data.map((function(t){zt.push(t.tournament_id)}));var Et=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={activeModal:null,modalHistory:[],popout:null,snackbar:null,elem:null},a.shareTargetRef=s.a.createRef(),a.sendPost=a.sendPost.bind(Object(m.a)(a)),a.shareLink=a.shareLink.bind(Object(m.a)(a)),a.closeActionSheet=function(){a.setState({popout:null})},a.modalBack=function(){a.setActiveModal(a.state.modalHistory[a.state.modalHistory.length-2])},a}return Object(d.a)(n,[{key:"setActiveModal",value:function(t){t=t||null;var e=this.state.modalHistory?Object(b.a)(this.state.modalHistory):[];null===t?e=[]:-1!==e.indexOf(t)?e=e.splice(0,e.indexOf(t)+1):e.push(t),this.setState({activeModal:t,modalHistory:e})}},{key:"buildRequest",value:function(t){return{message:'\u041d\u0430\u0447\u0430\u043b\u0441\u044f \u0442\u0443\u0440\u043d\u0438\u0440 "'+t.title+'"\n\u041e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435 \u0431\u043e\u0435\u0432: '+N(t.end_at,"dayAndTime")+"\n\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u0437\u043d\u0430\u0442\u044c \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438:",attachments:"https://vk.com/app7446072#"+t.tournament_id}}},{key:"sendPost",value:function(){var t=this,e=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"}),n=this.buildRequest(this.state.elem);o.a.send("VKWebAppShowWallPostBox",n).then((function(n){t.state.snackbar||t.setState({snackbar:e})}))}},{key:"shareLink",value:function(){var t=this,e=this.props.viewWidth>h.B.MOBILE,n=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:e?"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"}),a=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:e?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0438":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u0441\u044b\u043b\u043a\u0438"}),s="https://vk.com/app7446072#"+this.state.elem.tournament_id;e?navigator.clipboard.writeText(s).then((function(){t.state.snackbar||t.setState({snackbar:n})})).catch((function(){t.state.snackbar||t.setState({snackbar:a})})):o.a.send("VKWebAppShare",{link:s}).then((function(e){if(t.props.viewWidth>h.B.MOBILE){if(t.state.snackbar)return;t.setState({snackbar:n})}}))}},{key:"openShareActionSheet",value:function(t){var e=this;At=!1,Rt=event.target.closest(".vkuiButton").getBoundingClientRect().height,Mt=event.target.closest(".vkuiButton").getBoundingClientRect().top,Lt=event.target.closest(".vkuiButton").getBoundingClientRect().left;var n=this.props.viewWidth>h.B.MOBILE;this.setState({elem:t}),this.setState({popout:Object(S.jsxs)(h.b,{onClose:function(){return e.setState({popout:null})},iosCloseItem:Object(S.jsx)(h.c,{autoclose:!0,mode:"cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),header:"\u041a\u0430\u043a \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u043c?",toggleRef:this.shareTargetRef.current,children:[Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.sendPost()},children:"\u041d\u0430 \u0441\u0442\u0435\u043d\u0435"}),Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.shareLink()},children:n?"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})})}},{key:"componentDidMount",value:function(){""==window.location.hash||Pt||-1==zt.indexOf(Number(window.location.hash.slice(1)))||(this.setActiveModal(Number(window.location.hash.slice(1))),Pt=!0)}},{key:"componentDidUpdate",value:function(){var t=document.getElementsByClassName("vkuiActionSheet--desktop");t[0]&&new MutationObserver((function(e){e&&!At&&(document.documentElement.clientHeight-Mt<200?Mt=Mt-t[0].getBoundingClientRect().height-5:Mt+=Rt+5,t[0].style.top=Mt+"px",t[0].style.left=Lt+"px",At=!0)})).observe(t[0],{attributes:!0,attributeFilter:["style"]})}},{key:"render",value:function(){var t=this;window.addEventListener("scroll",(function(){null!=t.state.popout&&t.closeActionSheet()}));var e=this.props.viewWidth>h.B.MOBILE,n=this.props.viewWidth<=h.B.MOBILE,a=this.props.platform;if(0!==Wt.data.length)var s=Object(S.jsx)(h.p,{activeModal:this.state.activeModal,onClose:this.modalBack,children:Wt.data.map((function(e){return Object(S.jsx)(h.n,{id:e.tournament_id,onClose:t.modalBack,header:Object(S.jsx)(h.o,{right:n&&a==h.m&&Object(S.jsx)(h.s,{onClick:t.modalBack,children:Object(S.jsx)(R.a,{})}),left:n&&a===h.a&&Object(S.jsx)(h.t,{onClick:t.modalBack}),children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:Object(S.jsxs)("div",{className:"ModalPage__Content Turnament-Information__Group",children:[Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("h4",{children:e.title})}),Object(S.jsxs)(h.k,{className:"vkuiGroup--custom-separator",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsx)("span",{style:{display:"inline-flex",alignItems:"center"},children:"\u0418\u0434\u0443\u0442 \u0431\u043e\u0438"})}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0431\u043e\u0451\u0432"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"green"}}),Object(S.jsx)(B,{timestamp:e.start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"rgb(200, 0, 0)"}}),Object(S.jsx)(B,{timestamp:e.end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041a\u043e\u043c\u0430\u043d\u0434\u044b"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",Ht[e.tournament_id].max]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",Ht[e.tournament_id].total]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u043e \u0443\u0447\u0430\u0441\u0442\u0438\u0435:\xa0"})," ",Ht[e.tournament_id].confirmed]})]})]}),Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("p",{className:"Pre",children:e.description})})]})})}))}),i=Object(S.jsxs)(h.v,{modal:s,popout:this.state.popout,children:[Object(S.jsx)(h.i,{size:e?"m":"l",children:Wt.data.map((function(e){return Object(S.jsxs)(h.h,{mode:"outline",children:[Object(S.jsx)("div",{className:e.status+" border"}),Object(S.jsxs)("div",{className:"TournamentCard",children:[Object(S.jsx)("div",{className:"TournamentCard__Header",children:e.title}),Object(S.jsxs)("div",{className:"TornamentCard__Info",children:[Object(S.jsxs)("div",{className:"TornamentCard__Info-Start",children:[Object(S.jsx)(x.a,{width:23,height:23}),Object(S.jsx)("div",{className:"TornamentCard__Info-Start-Text",children:Object(S.jsx)(B,{timestamp:e.start_at,mode:"day"})})]}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main TournamentCard__Info-Main-OneItem",children:Object(S.jsxs)("div",{className:"TournamentCard__Info-Main-Start",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0431\u043e\u0451\u0432"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.end_at})]})]})]})})]}),Object(S.jsxs)("div",{className:"TornamentCard__Footer",children:[Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button",mode:"outline",before:Object(S.jsx)(C.a,{}),onClick:function(){return t.setActiveModal(e.tournament_id)},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",getRootRef:t.shareTargetRef,onClick:function(){return t.openShareActionSheet(e)},children:Object(S.jsx)(w.a,{})})]})]})]})}))}),this.state.snackbar]});else if("none"==this.props.mode)i=Object(S.jsx)("span",{});else i=Object(S.jsx)(h.u,{children:"\u041d\u0435\u0442 \u043d\u0430\u0447\u0430\u0432\u0448\u0438\u0445\u0441\u044f \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u0432"});return i}}]),n}(s.a.Component),Ft=Object(h.D)(Object(h.C)(Et,{viewWidth:!0})),qt=new XMLHttpRequest;qt.open("POST","https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=finished",!1),qt.send();var Gt,Dt,Jt,Xt,Kt=JSON.parse(qt.responseText),Vt=Kt.data.reduce((function(t,e){var n=new XMLHttpRequest;return n.open("POST","https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id="+e.tournament_id+"&fields=teams",!1),n.send(),t[e.tournament_id]=JSON.parse(n.responseText).data[e.tournament_id].teams,t}),{}),Ut=!1,Yt=[];Kt.data.map((function(t){Yt.push(t.tournament_id)}));var Qt=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={activeModal:null,modalHistory:[],popout:null,snackbar:null,elem:null},a.shareTargetRef=s.a.createRef(),a.sendPost=a.sendPost.bind(Object(m.a)(a)),a.shareLink=a.shareLink.bind(Object(m.a)(a)),a.closeActionSheet=function(){a.setState({popout:null})},a.modalBack=function(){a.setActiveModal(a.state.modalHistory[a.state.modalHistory.length-2])},a}return Object(d.a)(n,[{key:"buildRequest",value:function(t){return{message:N(t.end_at,"day")+' \u043f\u0440\u043e\u0448\u0435\u043b \u0442\u0443\u0440\u043d\u0438\u0440 "'+t.title+'"\n\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043c\u043e\u0436\u043d\u043e \u0443\u0437\u043d\u0430\u0442\u044c \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438:',attachments:"https://vk.com/app7446072#"+t.tournament_id}}},{key:"sendPost",value:function(){var t=this,e=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"}),n=this.buildRequest(this.state.elem);o.a.send("VKWebAppShowWallPostBox",n).then((function(n){t.state.snackbar||t.setState({snackbar:e})}))}},{key:"shareLink",value:function(){var t=this,e=this.props.viewWidth>h.B.MOBILE,n=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--green)"},children:Object(S.jsx)(M.a,{fill:"#fff",width:14,height:14})}),children:e?"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430":"\u0421\u0441\u044b\u043b\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"}),a=Object(S.jsx)(h.x,{onClose:function(){return t.setState({snackbar:null})},duration:"2000",before:Object(S.jsx)(h.f,{size:24,style:{background:"var(--red)"},children:Object(S.jsx)(A.a,{fill:"#fff",width:14,height:14})}),children:e?"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0438":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u0441\u044b\u043b\u043a\u0438"}),s="https://vk.com/app7446072#"+this.state.elem.tournament_id;e?navigator.clipboard.writeText(s).then((function(){t.state.snackbar||t.setState({snackbar:n})})).catch((function(){t.state.snackbar||t.setState({snackbar:a})})):o.a.send("VKWebAppShare",{link:s}).then((function(e){if(t.props.viewWidth>h.B.MOBILE){if(t.state.snackbar)return;t.setState({snackbar:n})}}))}},{key:"openShareActionSheetFinish",value:function(t){var e=this;Jt=!1,Xt=event.target.closest(".vkuiButton").getBoundingClientRect().height,Gt=event.target.closest(".vkuiButton").getBoundingClientRect().top,Dt=event.target.closest(".vkuiButton").getBoundingClientRect().left;var n=this.props.viewWidth>h.B.MOBILE;this.setState({elem:t}),this.setState({popout:Object(S.jsxs)(h.b,{onClose:function(){return e.setState({popout:null})},iosCloseItem:Object(S.jsx)(h.c,{autoclose:!0,mode:"cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),header:"\u041a\u0430\u043a \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u043c?",toggleRef:this.shareTargetRef.current,children:[Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.sendPost()},children:"\u041d\u0430 \u0441\u0442\u0435\u043d\u0435"}),Object(S.jsx)(h.c,{autoclose:!0,onClick:function(){return e.shareLink()},children:n?"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"})]})})}},{key:"setActiveModal",value:function(t){t=t||null;var e=this.state.modalHistory?Object(b.a)(this.state.modalHistory):[];null===t?e=[]:-1!==e.indexOf(t)?e=e.splice(0,e.indexOf(t)+1):e.push(t),this.setState({activeModal:t,modalHistory:e})}},{key:"componentDidMount",value:function(){""==window.location.hash||Ut||-1==Yt.indexOf(Number(window.location.hash.slice(1)))||(this.setActiveModal(Number(window.location.hash.slice(1))),Ut=!0)}},{key:"componentDidUpdate",value:function(){var t=document.getElementsByClassName("vkuiActionSheet--desktop");t[0]&&new MutationObserver((function(e){e&&!Jt&&(document.documentElement.clientHeight-Gt<200?Gt=Gt-t[0].getBoundingClientRect().height-5:Gt+=Xt+5,t[0].style.top=Gt+"px",t[0].style.left=Dt+"px",Jt=!0)})).observe(t[0],{attributes:!0,attributeFilter:["style"]})}},{key:"render",value:function(){var t=this;window.addEventListener("scroll",(function(){null!=t.state.popout&&t.closeActionSheet()}));var e=this.props.viewWidth>h.B.MOBILE,n=this.props.viewWidth<=h.B.MOBILE,a=this.props.platform;if(0!==Kt.data.length)var s=Object(S.jsx)(h.p,{activeModal:this.state.activeModal,onClose:this.modalBack,children:Kt.data.map((function(e){return Object(S.jsx)(h.n,{id:e.tournament_id,onClose:t.modalBack,header:Object(S.jsx)(h.o,{right:n&&a===h.m&&Object(S.jsx)(h.s,{onClick:t.modalBack,children:Object(S.jsx)(R.a,{})}),left:n&&a===h.a&&Object(S.jsx)(h.t,{onClick:t.modalBack}),children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:Object(S.jsxs)("div",{className:"ModalPage__Content Turnament-Information__Group",children:[Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("h4",{children:e.title})}),Object(S.jsxs)(h.k,{className:"vkuiGroup--custom-separator",children:[Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(S.jsx)("div",{style:{marginLeft:5},children:Object(S.jsx)("span",{style:{display:"inline-flex",alignItems:"center"},children:"\u0422\u0443\u0440\u043d\u0438\u0440 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d"})}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(k.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(p.a,{width:17,height:17}),Object(S.jsx)(B,{timestamp:e.registration_end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0431\u043e\u0451\u0432"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"green"}}),Object(S.jsx)(B,{timestamp:e.start_at})]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)(g.a,{width:17,height:17,style:{color:"rgb(200, 0, 0)"}}),Object(S.jsx)(B,{timestamp:e.end_at})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main-Title",children:"\u041a\u043e\u043c\u0430\u043d\u0434\u044b"}),Object(S.jsxs)("div",{style:{marginLeft:5},children:[Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043a\u043e\u043c\u0430\u043d\u0434:\xa0"})," ",Vt[e.tournament_id].max]}),Object(S.jsx)("br",{}),Object(S.jsxs)("span",{style:{display:"inline-flex",alignItems:"center"},children:[Object(S.jsx)("span",{style:{fontWeight:"450"},children:"\u041f\u0440\u0438\u043d\u044f\u043b\u043e \u0443\u0447\u0430\u0441\u0442\u0438\u0435:\xa0"})," ",Vt[e.tournament_id].total]})]})]}),Object(S.jsx)(h.k,{className:"vkuiGroup--custom-separator",children:Object(S.jsx)("p",{className:"Pre",children:e.description})})]})})}))}),i=Object(S.jsxs)(h.v,{modal:s,popout:this.state.popout,children:[Object(S.jsx)(h.i,{size:e?"m":"l",children:Kt.data.map((function(e){return Object(S.jsxs)(h.h,{mode:"outline",children:[Object(S.jsx)("div",{className:e.status+" border"}),Object(S.jsxs)("div",{className:"TournamentCard",children:[Object(S.jsx)("div",{className:"TournamentCard__Header",children:e.title}),Object(S.jsxs)("div",{className:"TornamentCard__Info",children:[Object(S.jsxs)("div",{className:"TornamentCard__Info-Start",children:[Object(S.jsx)(x.a,{width:23,height:23}),Object(S.jsx)("div",{className:"TornamentCard__Info-Start-Text",children:Object(S.jsx)(B,{timestamp:e.start_at,mode:"day"})})]}),Object(S.jsx)("div",{className:"TournamentCard__Info-Main",children:"\u0422\u0443\u0440\u043d\u0438\u0440 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d"})]}),Object(S.jsxs)("div",{className:"TornamentCard__Footer",children:[Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button",mode:"outline",before:Object(S.jsx)(C.a,{}),onClick:function(){return t.setActiveModal(e.tournament_id)},children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(S.jsx)(h.g,{className:"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton",mode:"outline",getRootRef:t.shareTargetRef,onClick:function(){return t.openShareActionSheetFinish(e)},children:Object(S.jsx)(w.a,{})})]})]})]})}))}),this.state.snackbar]});else if("none"==this.props.mode)i=Object(S.jsx)("span",{});else i=Object(S.jsx)(h.u,{children:"\u041d\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u044b\u0445 \u0442\u0443\u0440\u043d\u0438\u0440\u043e\u0432"});return i}}]),n}(s.a.Component),Zt=Object(h.D)(Object(h.C)(Qt,{viewWidth:!0})),$t=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)(mt,{mode:"none"}),Object(S.jsx)(tt,{mode:"none"}),Object(S.jsx)(Nt,{mode:"none"}),Object(S.jsx)(Ft,{mode:"none"}),Object(S.jsx)(Zt,{mode:"none"})]})}}]),n}(s.a.Component),te=function(t){Object(j.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={contextOpened:!1,mode:"all",activeTab:"all"},a}return Object(d.a)(n,[{key:"render",value:function(){var t,e=this;return"all"===this.state.activeTab&&(t=Object(S.jsx)($t,{})),"upcoming"===this.state.activeTab&&(t=Object(S.jsx)(tt,{})),"registration_started"===this.state.activeTab&&(t=Object(S.jsx)(mt,{})),"registration_finished"===this.state.activeTab&&(t=Object(S.jsx)(Nt,{})),"running"===this.state.activeTab&&(t=Object(S.jsx)(Ft,{})),"finish"===this.state.activeTab&&(t=Object(S.jsx)(Zt,{})),Object(S.jsx)(h.A,{children:Object(S.jsxs)(h.q,{children:[Object(S.jsx)(h.r,{children:"T\u0443\u0440\u043d\u0438\u0440\u044b WoT Blitz"}),Object(S.jsxs)(h.k,{style:{paddingTop:40},children:[Object(S.jsxs)(h.j,{vertical:"top",filled:!0,children:[Object(S.jsx)(h.y,{children:Object(S.jsxs)(h.l,{showArrows:!0,getScrollToLeft:function(t){return t-120},getScrollToRight:function(t){return t+120},children:[Object(S.jsx)(h.z,{onClick:function(){e.setState({activeTab:"all"}),window.scrollTo(0,0)},selected:"all"===this.state.activeTab,children:"\u0412\u0441\u0435"}),Object(S.jsx)(h.z,{onClick:function(){e.setState({activeTab:"registration_started"}),window.scrollTo(0,0)},selected:"registration_started"===this.state.activeTab,children:"\u0418\u0434\u0451\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(S.jsx)(h.z,{onClick:function(){e.setState({activeTab:"upcoming"}),window.scrollTo(0,0)},selected:"upcoming"===this.state.activeTab,children:"\u0417\u0430\u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435"}),Object(S.jsx)(h.z,{onClick:function(){e.setState({activeTab:"registration_finished"}),window.scrollTo(0,0)},selected:"registration_finished"===this.state.activeTab,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"}),Object(S.jsx)(h.z,{onClick:function(){e.setState({activeTab:"running"}),window.scrollTo(0,0)},selected:"running"===this.state.activeTab,children:"\u0418\u0434\u0443\u0442 \u0431\u043e\u0438"}),Object(S.jsx)(h.z,{onClick:function(){e.setState({activeTab:"finish"}),window.scrollTo(0,0)},selected:"finish"===this.state.activeTab,children:"\u0411\u043e\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u044b"})]})}),Object(S.jsx)(h.w,{wide:!0})]}),t]})]})})}}]),n}(s.a.Component),ee=function(){return Object(S.jsx)(h.d,{children:Object(S.jsx)(h.e,{children:Object(S.jsx)(te,{})})})};n(266);o.a.send("VKWebAppInit"),o.a.subscribe((function(t){"VKWebAppUpdateConfig"===t.detail.type&&document.body.setAttribute("scheme",t.detail.data.scheme)})),r.a.render(Object(S.jsx)(ee,{}),document.getElementById("root"))}},[[267,1,2]]]);
//# sourceMappingURL=main.8e414c3a.chunk.js.map