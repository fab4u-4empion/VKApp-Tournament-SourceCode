{"version":3,"sources":["time/TimeComponent.js","time/TimeString.js","getParams/search.js","notification/notification_subscribe.js","notification/notification_unsubscribe.js","getTournament/Upcoming.js","getTournament/RegistrationStart.js","getTournament/RegistrationFinish.js","getTournament/Running.js","getTournament/Finish.js","getTournament/all.js","App.js","index.js"],"names":["Time","props","time","Date","timestamp","hour","getHours","minute","getMinutes","day","getDate","monthNum","getMonth","year","getFullYear","monthNumeric","mode","TimeStr","getLaunchParams","window","location","search","replace","split","reduce","p","e","a","decodeURIComponent","subscribeResult","tournamentInfo","Promise","resolve","reject","params","bridge","send","then","url","tournament_id","vk_user_id","request","XMLHttpRequest","open","onload","JSON","parse","responseText","error","onerror","catch","unsubscribeResult","positionY","positionX","stylesIsUpdated","buttonHeight","isOpenedFirstTime","tournamentsID","bellArrayButtons","bellArrayModalAndroid","bellArrayModalIOS","activeBells","tournament","TournamentList","tournamentInfoRequest","data","teams","map","elem","push","indexOf","width","height","UpcommingComponent","state","activeModal","modalHistory","popout","snackbar","bellsButtons","bellsAndroid","bellsIOS","sendPost","bind","shareTargetRef","React","createRef","shareLink","modalBack","setActiveModal","length","setState","onClose","duration","before","size","style","background","fill","splice","start_at","title","registration_start_at","registration_end_at","successSnackbar","errorSnackbar","this","buildRequest","link","event","target","closest","getBoundingClientRect","top","left","iosCloseItem","autoclose","header","toggleRef","current","onClick","hash","Number","slice","activeSubscriptions","console","log","document","getElementsByClassName","MutationObserver","mutations","documentElement","clientHeight","observe","attributes","attributeFilter","isDesktop","viewWidth","ViewWidth","MOBILE","isMobile","platform","Modal","id","IOS","subscribeToNotification","ANDROID","right","className","marginLeft","display","alignItems","color","end_at","fontWeight","max","description","List","modal","status","getRootRef","openShareActionSheet","Component","Upcomming","withPlatform","withAdaptivity","RegStartComponent","total","confirmed","RegStart","RegFinishComponent","RegFinish","RunningComponent","Running","FinishComponent","openShareActionSheetFinish","Finish","All","Upcoming","Application","contextOpened","activeTab","content","paddingTop","vertical","filled","scrollTo","selected","wide","App","subscribe","detail","type","body","setAttribute","scheme","html","ReactDOM","render","getElementById"],"mappings":"goBAwDeA,MAtDf,SAAcC,GAEV,IAAIC,EAAO,IAAIC,KAAuB,IAAjBF,EAAMG,WAEvBC,EAAOH,EAAKI,WACZC,EAASL,EAAKM,aACdC,EAAMP,EAAKQ,UACXC,EAAWT,EAAKU,WAAa,EAC7BC,EAAOX,EAAKY,cACZC,EAAeJ,EA8BnB,OAZIJ,EAAS,KACTA,EAAS,IAAIA,GAGbI,EAAW,KACXI,EAAe,IAAIJ,GAGnBF,EAAM,KACNA,EAAM,IAAIA,GAGNR,EAAMe,MACV,IAAK,MACD,OAAS,+BAAOP,EAAI,IA9BhB,CACR,UACA,uCACA,6CACA,iCACA,uCACA,qBACA,2BACA,2BACA,6CACA,mDACA,6CACA,uCACA,8CAiBkCE,GAAU,IAAKE,IAEjD,IAAK,OACD,OAAS,+BAAOR,EAAK,IAAIE,IAE7B,IAAK,aACD,OAAS,+BAAOE,EAAI,IAAIM,EAAa,KAAKV,EAAK,IAAIE,IAEvD,QACI,OAAS,+BAAOE,EAAI,IAAIM,EAAa,IAAIF,EAAK,KAAKR,EAAK,IAAIE,MCCzDU,MArDf,SAAkBb,EAAWY,GACzB,IAAId,EAAO,IAAIC,KAAe,IAAVC,GAEhBC,EAAOH,EAAKI,WACZC,EAASL,EAAKM,aACdC,EAAMP,EAAKQ,UACXC,EAAWT,EAAKU,WAAa,EAC7BC,EAAOX,EAAKY,cACZC,EAAeJ,EA8BnB,OAZIJ,EAAS,KACTA,EAAS,IAAIA,GAGbI,EAAW,KACXI,EAAe,IAAIJ,GAGnBF,EAAM,KACNA,EAAM,IAAMA,GAGRO,GACJ,IAAK,MACD,OAAQd,EAAKQ,UAAY,IA9BrB,CACR,UACA,uCACA,6CACA,iCACA,uCACA,qBACA,2BACA,2BACA,6CACA,mDACA,6CACA,uCACA,8CAiByCC,GAAY,IAAME,EAE3D,IAAK,OACD,OAASR,EAAK,IAAIE,EAEtB,IAAK,aACD,OAASE,EAAI,IAAIM,EAAa,KAAKV,EAAK,IAAIE,EAEhD,QACI,OAASE,EAAI,IAAIM,EAAa,IAAIF,EAAK,KAAKR,EAAK,IAAIE,I,2CC/BlDW,MAlBf,WAEI,OACIC,OACKC,SACAC,OACAC,QAAQ,IAAK,IACbC,MAAM,KACNC,QACG,SAACC,EAAGC,GACA,IAAIC,EAAID,EAAEH,MAAM,KAEhB,OADAE,EAAEG,mBAAmBD,EAAE,KAAOC,mBAAmBD,EAAE,IAC5CF,IAEX,KCoBDI,MA/Bf,SAAyBC,GA4BrB,OA3BgB,IAAIC,SAAQ,SAACC,EAASC,GAClC,IAAIC,EAAShB,IACbiB,IACKC,KAAK,8BACLC,MAAK,WACF,IAAIC,EAAG,wDAAoDnB,OAAOC,SAASC,OAApE,0BAA4FS,EAAeS,cAA3G,oBAAoIL,EAAOM,YAC9IC,EAAU,IAAIC,eAClBD,EAAQE,KAAK,MAAOL,GAAK,GACzBG,EAAQL,OACRK,EAAQG,OAAS,WACb,IAC4C,KAApCC,KAAKC,MAAML,EAAQM,cACnBf,IAEAC,IACN,MAAOe,GACLf,MAGRQ,EAAQQ,QAAU,WACdhB,QAGPiB,OAAM,WACHjB,WCFDkB,ICHXC,EACAC,EACAC,EACAC,EDAWJ,EAxBf,SAA2BrB,GAqBvB,OApBkB,IAAIC,SAAQ,SAACC,EAASC,GACpC,IAAIC,EAAShB,IACToB,EAAG,yEAAqER,EAAeS,cAApF,oBAA6GL,EAAOM,YACvHC,EAAU,IAAIC,eAClBD,EAAQE,KAAK,MAAOL,GAAK,GACzBG,EAAQL,OACRK,EAAQG,OAAS,WACb,IAC4C,KAApCC,KAAKC,MAAML,EAAQM,cACnBf,IAEAC,IACN,MAAOe,GACLf,MAGRQ,EAAQQ,QAAU,WACdhB,S,kBCCRuB,GAAoB,EACpBC,EAAgB,GAKhBC,EAAmB,GACnBC,EAAwB,GACxBC,EAAoB,GACpBC,EAAc,GASlB,IAAIC,EAAa,IAAIpB,eACjBoB,EAAWnB,KAAK,OAAQ,kHAAkH,GAC1ImB,EAAW1B,OAEX,IAAI2B,EAAiBlB,KAAKC,MAAMgB,EAAWf,cAEvCjB,EAAiBiC,EAAc,KAASvC,QACxC,SAASC,EAAEC,GACP,IAAIsC,EAAwB,IAAItB,eAIhC,OAHAsB,EAAsBrB,KAAK,OAAQ,gHAAkHjB,EAAEa,cAAgB,iBAAiB,GACxLyB,EAAsB5B,OACtBX,EAAEC,EAAC,eAAqBmB,KAAKC,MAAMkB,EAAsBjB,cAAckB,KAAKvC,EAAC,eAAmBwC,MACzFzC,IAEX,IAGJsC,EAAc,KAASI,KAAI,SAACC,GACxBX,EAAcY,KAAKD,EAAK7B,kBAG5BmB,EAAmBK,EAAc,KAASvC,QACtC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,EAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAGPkC,EAAwBI,EAAc,KAASvC,QAC3C,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,EAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAClBd,IACR,IAGPmC,EAAoBG,EAAc,KAASvC,QACvC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,EAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAErBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,I,IAGLgD,G,kDACF,WAAYxE,GAAQ,IAAD,8BACf,cAAMA,IAEDyE,MAAQ,CACTC,YAAa,KACbC,aAAc,GACdC,OAAQ,KACRC,SAAU,KACVV,KAAM,KACNW,aAAcrB,EACdsB,aAAcrB,EACdsB,SAAUrB,GAGd,EAAKsB,SAAW,EAAKA,SAASC,KAAd,gBAChB,EAAKC,eAAiBC,IAAMC,YAC5B,EAAKC,UAAY,EAAKA,UAAUJ,KAAf,gBAEjB,EAAKK,UAAY,WACb,EAAKC,eAAe,EAAKf,MAAME,aAAa,EAAKF,MAAME,aAAac,OAAS,KAnBlE,E,2DAuBnB,SAAwBtB,GAAO,IACvBU,EADsB,QAEsB,GAA5CjB,EAAYS,QAAQF,EAAK7B,eACzBV,EAAgBuC,GACX/B,MAAK,WACFwB,EAAYQ,KAAKD,EAAK7B,eACtBoB,EAAsBS,EAAK7B,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAC/FZ,EAAkBQ,EAAK7B,eAAiB,cAAC,IAAD,IACxCmB,EAAiBU,EAAK7B,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAC1F,EAAKmB,SAAS,CAACX,aAAcrB,IAC7B,EAAKgC,SAAS,CAACV,SAAUrB,IACzB,EAAK+B,SAAS,CAACZ,aAAcrB,IAC7BoB,EACI,cAAC,IAAD,CACIc,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,6RAOJ,EAAKmB,SAAS,CAACb,SAAWA,OAE7B5B,OAAM,WACH4B,EACI,cAAC,IAAD,CACIc,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,sMASJ,EAAKmB,SAAS,CAACb,SAAWA,OAGlC3B,EAAkBiB,GACb/B,MAAK,WACFwB,EAAYsC,OAAOtC,EAAYS,QAAQF,EAAK7B,eAAgB,GAC5DoB,EAAsBS,EAAK7B,eAAiB,cAAC,IAAD,IAC5CqB,EAAkBQ,EAAK7B,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACzFd,EAAiBU,EAAK7B,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACxF,EAAKmB,SAAS,CAACX,aAAcrB,IAC7B,EAAKgC,SAAS,CAACV,SAAUrB,IACzB,EAAK+B,SAAS,CAACZ,aAAcrB,OAEhCR,OAAM,WACH4B,EACI,cAAC,IAAD,CACIc,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,gMASJ,EAAKmB,SAAS,CAACb,SAAWA,S,0BAK1C,SAAaV,GAWT,MAJU,CACN,QANUnD,EAAQmD,EAAKgC,SAAU,OAAS,mHAA4BhC,EAAKiC,MAAjEpF,iHAC6BA,EAAQmD,EAAKkC,sBAAuB,cACjE,gIAA8BrF,EAAQmD,EAAKmC,oBAAqB,cAChE,sEAAsBtF,EAAQmD,EAAKgC,SAAU,cAC7C,oMAGV,YAAe,6BAA+BhC,EAAK7B,iB,sBAK3D,WAAY,IAAD,OACDiE,EACF,cAAC,IAAD,CACIZ,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,2HAQEiC,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,uKAUA/B,EAAUiE,KAAKC,aAAaD,KAAKhC,MAAMN,MAE3CjC,IACKC,KAAK,0BAA2BK,GAChCJ,MAAK,SAAA4B,GACE,EAAKS,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU0B,OAE5BtD,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,uBAIrC,WAAa,IAAD,OACFA,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,2JAUAoC,EAAO,6BAA+BF,KAAKhC,MAAMN,KAAK7B,cAE1DJ,IACKC,KAAK,gBAAiB,CAAC,KAAQwE,IAC/B1D,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,kCAIrC,SAAqB/E,GAAI,IAAD,OAtNxB4B,GAAkB,EAClBC,EAAesD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBxC,OAC3EpB,EAAYyD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBC,IACxE5D,EAAYwD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBE,KAqNpER,KAAKf,SAAS,CAACvB,KAAM1C,IACrBgF,KAAKf,SAAS,CAAEd,OACZ,eAAC,IAAD,CACIe,QAAS,kBAAM,EAAKD,SAAS,CAAEd,OAAQ,QACvCsC,aAAc,cAAC,IAAD,CAAiBC,WAAS,EAACpG,KAAK,SAAhC,8DACdqG,OAAO,sLACPC,UAAWZ,KAAKtB,eAAemC,QAJnC,UAMI,cAAC,IAAD,CAAiBH,WAAS,EAACI,QAAS,kBAAM,EAAKtC,YAA/C,yDAGA,cAAC,IAAD,CAAiBkC,WAAS,EAACI,QAAS,kBAAM,EAAKjC,aAA/C,gH,4BAOZ,SAAeZ,GACXA,EAAcA,GAAe,KAC7B,IAAIC,EAAe8B,KAAKhC,MAAME,aAAX,YAA8B8B,KAAKhC,MAAME,cAAgB,GAExD,OAAhBD,EACAC,EAAe,IAC+B,IAAvCA,EAAaN,QAAQK,GAC5BC,EAAeA,EAAauB,OAAO,EAAGvB,EAAaN,QAAQK,GAAe,GAE1EC,EAAaP,KAAKM,GAGtB+B,KAAKf,SAAS,CACVhB,cACAC,mB,+BAIR,WAAqB,IAAD,OACY,IAAxBzD,OAAOC,SAASqG,MAAejE,IAAsF,GAAjEC,EAAca,QAAQoD,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,OAC5GjB,KAAKjB,eAAeiC,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,KACtDnE,GAAoB,GAGxB,IAAIoE,EAAsB,IAAIlF,eAC1BR,EAAShB,IACb0G,EAAoBjF,KAAK,MAAzB,2EAAoGT,EAAOM,aAAc,GACzHoF,EAAoBxF,OACpBwF,EAAoBhF,OAAS,WACzB,IACIiB,EAAchB,KAAKC,MAAM8E,EAAoB7E,cAC/C,MAAOC,GACL6E,QAAQC,IAAI9E,GAEhBU,EAAmBK,EAAc,KAASvC,QACtC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,EAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAEPkC,EAAwBI,EAAc,KAASvC,QAC3C,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,EAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAClBd,IACR,IAEPmC,EAAoBG,EAAc,KAASvC,QACvC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,EAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAErBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAEP,EAAKkE,SAAS,CAACX,aAAcrB,IAC7B,EAAKgC,SAAS,CAACV,SAAUrB,IACzB,EAAK+B,SAAS,CAACZ,aAAcrB,O,gCAIrC,WACI,IAAIU,EAAO2D,SAASC,uBAAuB,4BACvC5D,EAAK,IACU,IAAI6D,kBAAiB,SAASC,GACrCA,IAAc5E,IACVyE,SAASI,gBAAgBC,aAAehF,EAAY,IACpDA,EAAYA,EAAYgB,EAAK,GAAG4C,wBAAwBxC,OAAS,EAEjEpB,GAAaG,EAAe,EAEhCa,EAAK,GAAG4B,MAAMiB,IAAM7D,EAAY,KAChCgB,EAAK,GAAG4B,MAAMkB,KAAO7D,EAAY,KACjCC,GAAkB,MAIjB+E,QAAQjE,EAAK,GAAI,CAAEkE,YAAa,EAAMC,gBAAkB,CAAC,a,oBAI1E,WAAU,IAAD,OAECC,EAAY9B,KAAKzG,MAAMwI,UAAYC,IAAUC,OAC7CC,EAAWlC,KAAKzG,MAAMwI,WAAaC,IAAUC,OAE7CE,EAAWnC,KAAKzG,MAAM4I,SAE5B,GAAmC,IAA/B9E,EAAeE,KAAKyB,OACpB,IAAMoD,EACF,cAAC,IAAD,CAAWnE,YAAa+B,KAAKhC,MAAMC,YAAaiB,QAASc,KAAKlB,UAA9D,SAEQzB,EAAc,KAASI,KAAI,SAACC,GAAD,OACvB,cAAC,IAAD,CAAW2E,GAAI3E,EAAK7B,cAChBqD,QAAS,EAAKJ,UACd6B,OACI,cAAC,IAAD,CACIH,KACK0B,GAAYC,IAAaG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMO,SAASb,EAAK7B,kBAEhIqG,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAkB1B,QAAS,EAAKhC,YAEzE2D,MACIP,GAAaC,IAAaG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,EAAKhC,UAAjC,SAA4C,cAAC,IAAD,OAE5EoD,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAmB1B,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMM,aAAaZ,EAAK7B,kBAExI,cAAC,IAAD,CAAmBiF,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMM,aAAaZ,EAAK7B,iBAX7G,0EAHR,SAqBI,sBAAK6G,UAAU,kDAAf,UACI,cAAC,IAAD,CAAOA,UAAU,8BAAjB,SACI,6BAAKhF,EAAKiC,UAEd,eAAC,IAAD,CAAO+C,UAAU,8BAAjB,UACI,qBAAKA,UAAU,kCAAf,kDACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,sBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,wFAIJ,uBACA,qBAAKH,UAAU,kCAAf,gFACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKkC,2BAE5E,uBACA,uBAAMN,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKmC,4BAGjF,uBAEA,qBAAK6C,UAAU,kCAAf,6IACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,WAAW,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKgC,cAEzF,uBACA,uBAAMJ,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,oBAAoB,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKqF,eAGtG,uBAEA,qBAAKL,UAAU,kCAAf,wDACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,+JADJ,IAC+E5H,EAAesC,EAAI,eAAmBuF,YAI7H,cAAC,IAAD,CAAOP,UAAU,8BAAjB,SACI,mBAAGA,UAAU,MAAb,SACKhF,EAAKwF,0BAUlCC,EACA,eAAC,IAAD,CAAMC,MAAOhB,EAAOjE,OAAQ6B,KAAKhC,MAAMG,OAAvC,UACI,cAAC,IAAD,CAAUkB,KAAMyC,EAAY,IAAM,IAAlC,SAEQzE,EAAc,KAASI,KAAI,SAACC,GAAD,OACnB,eAAC,IAAD,CAAMpD,KAAK,UAAX,UACQ,qBAAKoI,UAAWhF,EAAK2F,OAAS,YAC9B,sBAAKX,UAAU,iBAAf,UACI,qBAAKA,UAAU,yBAAf,SAAyChF,EAAKiC,QAC9C,sBAAK+C,UAAU,sBAAf,UACI,sBAAKA,UAAU,4BAAf,UACI,cAAC,IAAD,CAAuB7E,MAAO,GAAIC,OAAQ,KAC1C,qBAAK4E,UAAU,iCAAf,SACI,cAAC,EAAD,CAAMhJ,UAAWgE,EAAKgC,SAAUpF,KAAK,aAG7C,sBAAKoI,UAAU,4BAAf,UACI,sBAAKA,UAAU,yCAAf,UACI,qBAAKA,UAAU,kCAAf,gFACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKkC,2BAE5E,uBACA,uBAAMN,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKmC,+BAIrF,sBAAK6C,UAAU,kCAAf,UACI,qBAAKA,UAAU,kCAAf,2EACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKgC,SAAUpF,KAAK,6BAM/F,sBAAKoI,UAAU,wBAAf,UACI,cAAC,IAAD,CAAQA,UAAU,+BAA+BpI,KAAK,UAAU8E,OAAQ,cAAC,IAAD,IAAsB0B,QAAS,kBAAM,EAAK/B,eAAerB,EAAK7B,gBAAtI,oEACA,cAAC,IAAD,CAAQ6G,UAAU,iEAAiEpI,KAAK,UAAUgJ,WAAY,EAAK5E,eAAgBoC,QAAS,kBAAM,EAAKyC,qBAAqB7F,IAA5K,SAAmL,cAAC,IAAD,MACnL,cAAC,IAAD,CAAQgF,UAAU,iEAAiEpI,KAAK,UAAUwG,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA9I,SAAsJ,EAAKM,MAAMK,aAAaX,EAAK7B,+BAQlNmE,KAAKhC,MAAMI,iBAIpB,GAAuB,QAAnB4B,KAAKzG,MAAMe,KACX6I,EAAQ,8BAEJA,EAAS,cAAC,IAAD,6KAGrB,OAAOA,M,GA5ZkBxE,IAAM6E,WAkaxBC,GAFGC,YAAaC,YAAe5F,GAAoB,CAAEgE,WAAW,KCpe3E3E,GAAa,IAAIpB,eACjBoB,GAAWnB,KAAK,OAAQ,8HAA8H,GACtJmB,GAAW1B,OAEX,IAeAgB,GACAC,GACAC,GACAC,GAlBIQ,GAAiBlB,KAAKC,MAAMgB,GAAWf,cAEvCjB,GAAiBiC,GAAc,KAASvC,QACxC,SAASC,EAAEC,GACP,IAAIsC,EAAwB,IAAItB,eAIhC,OAHAsB,EAAsBrB,KAAK,OAAQ,gHAAkHjB,EAAEa,cAAgB,iBAAiB,GACxLyB,EAAsB5B,OACtBX,EAAEC,EAAC,eAAqBmB,KAAKC,MAAMkB,EAAsBjB,cAAckB,KAAKvC,EAAC,eAAmBwC,MACzFzC,IAEX,IAGJ+B,IAAoB,EACpBC,GAAgB,GAKhBC,GAAmB,GACnBC,GAAwB,GACxBC,GAAoB,GACpBC,GAAc,GAElBE,GAAc,KAASI,KAAI,SAACC,GACxBX,GAAcY,KAAKD,EAAK7B,kBAU5BmB,GAAmBK,GAAc,KAASvC,QACtC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAGPkC,GAAwBI,GAAc,KAASvC,QAC3C,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAClBd,IACR,IAGPmC,GAAoBG,GAAc,KAASvC,QACvC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAErBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,I,IAGD6I,G,kDACF,WAAYrK,GAAQ,IAAD,8BACf,cAAMA,IAEDyE,MAAQ,CACTC,YAAa,KACbC,aAAc,GACdC,OAAQ,KACRC,SAAU,KACVV,KAAM,KACNW,aAAcrB,GACdsB,aAAcrB,GACdsB,SAAUrB,IAGd,EAAKwB,eAAiBC,IAAMC,YAC5B,EAAKJ,SAAW,EAAKA,SAASC,KAAd,gBAChB,EAAKI,UAAY,EAAKA,UAAUJ,KAAf,gBAEjB,EAAKK,UAAY,WACb,EAAKC,eAAe,EAAKf,MAAME,aAAa,EAAKF,MAAME,aAAac,OAAS,KAnBlE,E,2DAuBnB,SAAwBtB,GAAO,IACvBU,EADsB,QAEsB,GAA5CjB,GAAYS,QAAQF,EAAK7B,eACzBV,EAAgBuC,GACX/B,MAAK,WACFwB,GAAYQ,KAAKD,EAAK7B,eACtBoB,GAAsBS,EAAK7B,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAC/FZ,GAAkBQ,EAAK7B,eAAiB,cAAC,IAAD,IACxCmB,GAAiBU,EAAK7B,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAC1F,EAAKmB,SAAS,CAACX,aAAcrB,KAC7B,EAAKgC,SAAS,CAACV,SAAUrB,KACzB,EAAK+B,SAAS,CAACZ,aAAcrB,KAC7BoB,EACI,cAAC,IAAD,CACIc,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,4OAOJ,EAAKmB,SAAS,CAACb,SAAWA,OAE7B5B,OAAM,WACH4B,EACI,cAAC,IAAD,CACIc,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,sMASJ,EAAKmB,SAAS,CAACb,SAAWA,OAGlC3B,EAAkBiB,GACb/B,MAAK,WACFwB,GAAYsC,OAAOtC,GAAYS,QAAQF,EAAK7B,eAAgB,GAC5DoB,GAAsBS,EAAK7B,eAAiB,cAAC,IAAD,IAC5CqB,GAAkBQ,EAAK7B,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACzFd,GAAiBU,EAAK7B,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACxF,EAAKmB,SAAS,CAACX,aAAcrB,KAC7B,EAAKgC,SAAS,CAACV,SAAUrB,KACzB,EAAK+B,SAAS,CAACZ,aAAcrB,QAEhCR,OAAM,WACH4B,EACI,cAAC,IAAD,CACIc,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,gMASJ,EAAKmB,SAAS,CAACb,SAAWA,S,4BAK1C,SAAeH,GACXA,EAAcA,GAAe,KAC7B,IAAIC,EAAe8B,KAAKhC,MAAME,aAAX,YAA8B8B,KAAKhC,MAAME,cAAgB,GAExD,OAAhBD,EACAC,EAAe,IAC+B,IAAvCA,EAAaN,QAAQK,GAC5BC,EAAeA,EAAauB,OAAO,EAAGvB,EAAaN,QAAQK,GAAe,GAE1EC,EAAaP,KAAKM,GAGtB+B,KAAKf,SAAS,CACVhB,cACAC,mB,0BAIR,SAAaR,GAUT,MAJU,CACN,QALY,+MAA6CA,EAAKiC,MAAlD,iIAC8BpF,EAAQmD,EAAKmC,oBAAqB,cAChE,oEAAoBtF,EAAQmD,EAAKgC,SAAU,cAC3C,oMAGZ,YAAe,6BAA+BhC,EAAK7B,iB,sBAK3D,WAAY,IAAD,OACDiE,EACF,cAAC,IAAD,CACIZ,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,2HAQEiC,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,uKAUA/B,EAAUiE,KAAKC,aAAaD,KAAKhC,MAAMN,MAC3CjC,IACCC,KAAK,0BAA2BK,GAChCJ,MAAK,SAAA4B,GACE,EAAKS,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU0B,OAE5BtD,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,uBAIjC,WAAa,IAAD,OACFA,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,2JAUAoC,EAAO,6BAA+BF,KAAKhC,MAAMN,KAAK7B,cAE1DJ,IACKC,KAAK,gBAAiB,CAAC,KAAQwE,IAC/B1D,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,kCAIrC,SAAqB/E,GAAI,IAAD,OAjNxB4B,IAAkB,EAClBC,GAAesD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBxC,OAC3EpB,GAAYyD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBC,IACxE5D,GAAYwD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBE,KAgNpER,KAAKf,SAAS,CAACvB,KAAM1C,IACrBgF,KAAKf,SAAS,CAAEd,OACZ,eAAC,IAAD,CACIe,QAAS,kBAAM,EAAKD,SAAS,CAAEd,OAAQ,QACvCsC,aAAc,cAAC,IAAD,CAAiBC,WAAS,EAACpG,KAAK,SAAhC,8DACdqG,OAAO,sLACPC,UAAWZ,KAAKtB,eAAemC,QAJnC,UAMI,cAAC,IAAD,CAAiBH,WAAS,EAACI,QAAS,kBAAM,EAAKtC,YAA/C,yDAGA,cAAC,IAAD,CAAiBkC,WAAS,EAACI,QAAS,kBAAM,EAAKjC,aAA/C,gH,+BAOZ,WAAqB,IAAD,OACY,IAAxBpE,OAAOC,SAASqG,MAAejE,KAAsF,GAAjEC,GAAca,QAAQoD,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,OAC5GjB,KAAKjB,eAAeiC,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,KACtDnE,IAAoB,GAGxB,IAAIoE,EAAsB,IAAIlF,eAC1BR,EAAShB,IACb0G,EAAoBjF,KAAK,MAAzB,2EAAoGT,EAAOM,aAAc,GACzHoF,EAAoBxF,OACpBwF,EAAoBhF,OAAS,WACzB,IACIiB,GAAchB,KAAKC,MAAM8E,EAAoB7E,cAC/C,MAAOC,GACL6E,QAAQC,IAAI9E,GAEhBU,GAAmBK,GAAc,KAASvC,QACtC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAEPkC,GAAwBI,GAAc,KAASvC,QAC3C,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAClBd,IACR,IAEPmC,GAAoBG,GAAc,KAASvC,QACvC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAErBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAEP,EAAKkE,SAAS,CAACX,aAAcrB,KAC7B,EAAKgC,SAAS,CAACV,SAAUrB,KACzB,EAAK+B,SAAS,CAACZ,aAAcrB,Q,gCAIrC,WACI,IAAIU,EAAO2D,SAASC,uBAAuB,4BACvC5D,EAAK,IACU,IAAI6D,kBAAiB,SAASC,GACrCA,IAAc5E,KACVyE,SAASI,gBAAgBC,aAAehF,GAAY,IACpDA,GAAYA,GAAYgB,EAAK,GAAG4C,wBAAwBxC,OAAS,EAEjEpB,IAAaG,GAAe,EAEhCa,EAAK,GAAG4B,MAAMiB,IAAM7D,GAAY,KAChCgB,EAAK,GAAG4B,MAAMkB,KAAO7D,GAAY,KACjCC,IAAkB,MAIjB+E,QAAQjE,EAAK,GAAI,CAAEkE,YAAa,EAAMC,gBAAkB,CAAC,a,oBAI1E,WAAU,IAAD,OAECC,EAAY9B,KAAKzG,MAAMwI,UAAYC,IAAUC,OAC7CC,EAAWlC,KAAKzG,MAAMwI,WAAaC,IAAUC,OAE7CE,EAAWnC,KAAKzG,MAAM4I,SAE5B,GAAmC,IAA/B9E,GAAeE,KAAKyB,OACpB,IAAMoD,EACF,cAAC,IAAD,CAAWnE,YAAa+B,KAAKhC,MAAMC,YAAaiB,QAASc,KAAKlB,UAA9D,SAEQzB,GAAc,KAASI,KAAI,SAACC,GAAD,OACvB,cAAC,IAAD,CAAW2E,GAAI3E,EAAK7B,cAChBqD,QAAS,EAAKJ,UACd6B,OACI,cAAC,IAAD,CACIH,KACK0B,GAAYC,IAAaG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMO,SAASb,EAAK7B,kBAEhIqG,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAkB1B,QAAS,EAAKhC,YAEzE2D,MACIP,GAAaC,IAAaG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,EAAKhC,UAAjC,SAA4C,cAAC,IAAD,OAE5EoD,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAmB1B,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMM,aAAaZ,EAAK7B,kBAExI,cAAC,IAAD,CAAmBiF,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMM,aAAaZ,EAAK7B,iBAX7G,0EAHR,SAqBI,sBAAK6G,UAAU,kDAAf,UACI,cAAC,IAAD,CAAOA,UAAU,8BAAjB,SACI,6BAAKhF,EAAKiC,UAEd,eAAC,IAAD,CAAO+C,UAAU,8BAAjB,UACI,qBAAKA,UAAU,kCAAf,kDACI,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,sBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,2GAIR,uBAEA,qBAAKH,UAAU,kCAAf,gFACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKkC,2BAE5E,uBACA,uBAAMN,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKmC,4BAGjF,uBAEA,qBAAK6C,UAAU,kCAAf,6IACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,WAAW,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKgC,cAEzF,uBACA,uBAAMJ,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,oBAAoB,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKqF,eAGtG,uBAEA,qBAAKL,UAAU,kCAAf,wDACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,+JADJ,IAC+E5H,GAAesC,EAAI,eAAmBuF,OAErH,uBACA,uBAAM3D,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,kGADJ,IACoE5H,GAAesC,EAAI,eAAmBmG,SAE1G,uBACA,uBAAMvE,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,gIADJ,IACyE5H,GAAesC,EAAI,eAAmBoG,mBAKvH,cAAC,IAAD,CAAOpB,UAAU,8BAAjB,SACI,mBAAGA,UAAU,MAAb,SACKhF,EAAKwF,0BAUlCC,EACA,eAAC,IAAD,CAAMC,MAAOhB,EAAOjE,OAAQ6B,KAAKhC,MAAMG,OAAvC,UACI,cAAC,IAAD,CAAUkB,KAAMyC,EAAY,IAAM,IAAlC,SAEQzE,GAAc,KAASI,KAAI,SAACC,GAAD,OACnB,eAAC,IAAD,CAAMpD,KAAK,UAAX,UACQ,qBAAKoI,UAAWhF,EAAK2F,OAAS,YAC9B,sBAAKX,UAAU,iBAAf,UACI,qBAAKA,UAAU,yBAAf,SAAyChF,EAAKiC,QAC9C,sBAAK+C,UAAU,sBAAf,UACI,sBAAKA,UAAU,4BAAf,UACI,cAAC,IAAD,CAAuB7E,MAAO,GAAIC,OAAQ,KAC1C,qBAAK4E,UAAU,iCAAf,SACI,cAAC,EAAD,CAAMhJ,UAAWgE,EAAKgC,SAAUpF,KAAK,aAG7C,sBAAKoI,UAAU,4BAAf,UACI,sBAAKA,UAAU,yCAAf,UACI,qBAAKA,UAAU,kCAAf,gFACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKkC,2BAE5E,uBACA,uBAAMN,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKmC,+BAIrF,sBAAK6C,UAAU,kCAAf,UACI,qBAAKA,UAAU,kCAAf,2EACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKgC,SAAUpF,KAAK,6BAM/F,sBAAKoI,UAAU,wBAAf,UACI,cAAC,IAAD,CAAQA,UAAU,+BAA+BpI,KAAK,UAAU8E,OAAQ,cAAC,IAAD,IAAsB0B,QAAS,kBAAM,EAAK/B,eAAerB,EAAK7B,gBAAtI,oEACA,cAAC,IAAD,CAAQ6G,UAAU,iEAAiEpI,KAAK,UAAUgJ,WAAY,EAAK5E,eAAgBoC,QAAS,kBAAM,EAAKyC,qBAAqB7F,IAA5K,SAAmL,cAAC,IAAD,MACnL,cAAC,IAAD,CAAQgF,UAAU,iEAAiEpI,KAAK,UAASwG,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA7I,SAAqJ,EAAKM,MAAMK,aAAaX,EAAK7B,+BAQjNmE,KAAKhC,MAAMI,iBAIpB,GAAuB,QAAnB4B,KAAKzG,MAAMe,KACX6I,EAAQ,8BAEJA,EAAS,cAAC,IAAD,+NAGrB,OAAOA,M,GApaiBxE,IAAM6E,WA0avBO,GAFEL,YAAaC,YAAeC,GAAmB,CAAC7B,WAAW,KC9exE3E,GAAa,IAAIpB,eACjBoB,GAAWnB,KAAK,OAAQ,+HAA+H,GACvJmB,GAAW1B,OAEX,IAeIgB,GACAC,GACAC,GACAC,GAlBAQ,GAAiBlB,KAAKC,MAAMgB,GAAWf,cAEvCjB,GAAiBiC,GAAc,KAASvC,QACxC,SAASC,EAAEC,GACP,IAAIsC,EAAwB,IAAItB,eAIhC,OAHAsB,EAAsBrB,KAAK,OAAQ,gHAAkHjB,EAAEa,cAAgB,iBAAiB,GACxLyB,EAAsB5B,OACtBX,EAAEC,EAAC,eAAqBmB,KAAKC,MAAMkB,EAAsBjB,cAAckB,KAAKvC,EAAC,eAAmBwC,MACzFzC,IAEX,IAGA+B,IAAoB,EACpBC,GAAgB,GAKhBC,GAAmB,GACnBC,GAAwB,GACxBC,GAAoB,GACpBC,GAAc,GASlBE,GAAc,KAASI,KAAI,SAACC,GACxBX,GAAcY,KAAKD,EAAK7B,kBAG5BmB,GAAmBK,GAAc,KAASvC,QACtC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAGPkC,GAAwBI,GAAc,KAASvC,QAC3C,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAClBd,IACR,IAGPmC,GAAoBG,GAAc,KAASvC,QACvC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAErBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,I,IAILiJ,G,kDACF,WAAYzK,GAAQ,IAAD,8BACf,cAAMA,IAEDyE,MAAQ,CACTC,YAAa,KACbC,aAAc,GACdC,OAAQ,KACRC,SAAU,KACVV,KAAM,KACNW,aAAcrB,GACdsB,aAAcrB,GACdsB,SAAUrB,IAGd,EAAKsB,SAAW,EAAKA,SAASC,KAAd,gBAChB,EAAKC,eAAiBC,IAAMC,YAC5B,EAAKC,UAAY,EAAKA,UAAUJ,KAAf,gBAEjB,EAAKK,UAAY,WACb,EAAKC,eAAe,EAAKf,MAAME,aAAa,EAAKF,MAAME,aAAac,OAAS,KAnBlE,E,2DAuBnB,SAAwBtB,GAAO,IACvBU,EADsB,QAEsB,GAA5CjB,GAAYS,QAAQF,EAAK7B,eACzBV,EAAgBuC,GACX/B,MAAK,WACFwB,GAAYQ,KAAKD,EAAK7B,eACtBoB,GAAsBS,EAAK7B,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAC/FZ,GAAkBQ,EAAK7B,eAAiB,cAAC,IAAD,IACxCmB,GAAiBU,EAAK7B,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAC1F,EAAKmB,SAAS,CAACX,aAAcrB,KAC7B,EAAKgC,SAAS,CAACV,SAAUrB,KACzB,EAAK+B,SAAS,CAACZ,aAAcrB,KAC7BoB,EACI,cAAC,IAAD,CACIc,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,4OAOJ,EAAKmB,SAAS,CAACb,SAAWA,OAE7B5B,OAAM,WACH4B,EACI,cAAC,IAAD,CACIc,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,sMASJ,EAAKmB,SAAS,CAACb,SAAWA,OAGlC3B,EAAkBiB,GACb/B,MAAK,WACFwB,GAAYsC,OAAOtC,GAAYS,QAAQF,EAAK7B,eAAgB,GAC5DoB,GAAsBS,EAAK7B,eAAiB,cAAC,IAAD,IAC5CqB,GAAkBQ,EAAK7B,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACzFd,GAAiBU,EAAK7B,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACxF,EAAKmB,SAAS,CAACX,aAAcrB,KAC7B,EAAKgC,SAAS,CAACV,SAAUrB,KACzB,EAAK+B,SAAS,CAACZ,aAAcrB,QAEhCR,OAAM,WACH4B,EACI,cAAC,IAAD,CACIc,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,gMASJ,EAAKmB,SAAS,CAACb,SAAWA,S,0BAK1C,SAAaV,GAST,MAJU,CACN,QAJU,4LAAyCA,EAAKiC,MAA9C,qEACoBpF,EAAQmD,EAAKgC,UACjC,oMAGV,YAAe,6BAA+BhC,EAAK7B,iB,sBAK3D,WAAY,IAAD,OACDiE,EACF,cAAC,IAAD,CACIZ,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,2HAQEiC,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,uKAUA/B,EAAUiE,KAAKC,aAAaD,KAAKhC,MAAMN,MAE3CjC,IACKC,KAAK,0BAA2BK,GAChCJ,MAAK,SAAA4B,GACE,EAAKS,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU0B,OAE5BtD,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,uBAIrC,WAAa,IAAD,OACFA,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,2JAUAoC,EAAO,6BAA+BF,KAAKhC,MAAMN,KAAK7B,cAE1DJ,IACKC,KAAK,gBAAiB,CAAC,KAAQwE,IAC/B1D,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,kCAIrC,SAAqB/E,GAAI,IAAD,OApMpB4B,IAAkB,EAClBC,GAAesD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBxC,OAC3EpB,GAAYyD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBC,IACxE5D,GAAYwD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBE,KAmMxER,KAAKf,SAAS,CAACvB,KAAM1C,IACrBgF,KAAKf,SAAS,CAAEd,OACZ,eAAC,IAAD,CACIe,QAAS,kBAAM,EAAKD,SAAS,CAAEd,OAAQ,QACvCsC,aAAc,cAAC,IAAD,CAAiBC,WAAS,EAACpG,KAAK,SAAhC,8DACdqG,OAAO,sLACPC,UAAWZ,KAAKtB,eAAemC,QAJnC,UAMI,cAAC,IAAD,CAAiBH,WAAS,EAACI,QAAS,kBAAM,EAAKtC,YAA/C,yDAGA,cAAC,IAAD,CAAiBkC,WAAS,EAACI,QAAS,kBAAM,EAAKjC,aAA/C,gH,4BAOZ,SAAeZ,GACXA,EAAcA,GAAe,KAC7B,IAAIC,EAAe8B,KAAKhC,MAAME,aAAX,YAA8B8B,KAAKhC,MAAME,cAAgB,GAExD,OAAhBD,EACAC,EAAe,IAC+B,IAAvCA,EAAaN,QAAQK,GAC5BC,EAAeA,EAAauB,OAAO,EAAGvB,EAAaN,QAAQK,GAAe,GAE1EC,EAAaP,KAAKM,GAGtB+B,KAAKf,SAAS,CACVhB,cACAC,mB,+BAIR,WAAqB,IAAD,OACY,IAAxBzD,OAAOC,SAASqG,MAAejE,KAAsF,GAAjEC,GAAca,QAAQoD,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,OAC5GjB,KAAKjB,eAAeiC,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,KACtDnE,IAAoB,GAGxB,IAAIoE,EAAsB,IAAIlF,eAC1BR,EAAShB,IACb0G,EAAoBjF,KAAK,MAAzB,2EAAoGT,EAAOM,aAAc,GACzHoF,EAAoBxF,OACpBwF,EAAoBhF,OAAS,WACzB,IACIiB,GAAchB,KAAKC,MAAM8E,EAAoB7E,cAC/C,MAAOC,GACL6E,QAAQC,IAAI9E,GAEhBU,GAAmBK,GAAc,KAASvC,QACtC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAEPkC,GAAwBI,GAAc,KAASvC,QAC3C,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAAgCgC,MAAO,GAAIC,OAAQ,KAExE/C,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAClBd,IACR,IAEPmC,GAAoBG,GAAc,KAASvC,QACvC,SAACC,EAAGC,GAKA,OAJ6C,GAAzCmC,GAAYS,QAAQ5C,EAAEa,eACtBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,IAErBd,EAAEC,EAAEa,eAAiB,cAAC,IAAD,CAA8BgC,MAAO,GAAIC,OAAQ,KACnE/C,IACR,IAEP,EAAKkE,SAAS,CAACX,aAAcrB,KAC7B,EAAKgC,SAAS,CAACV,SAAUrB,KACzB,EAAK+B,SAAS,CAACZ,aAAcrB,Q,gCAIrC,WACI,IAAIU,EAAO2D,SAASC,uBAAuB,4BACvC5D,EAAK,IACU,IAAI6D,kBAAiB,SAASC,GACrCA,IAAc5E,KACVyE,SAASI,gBAAgBC,aAAehF,GAAY,IACpDA,GAAYA,GAAYgB,EAAK,GAAG4C,wBAAwBxC,OAAS,EAEjEpB,IAAaG,GAAe,EAEhCa,EAAK,GAAG4B,MAAMiB,IAAM7D,GAAY,KAChCgB,EAAK,GAAG4B,MAAMkB,KAAO7D,GAAY,KACjCC,IAAkB,MAIjB+E,QAAQjE,EAAK,GAAI,CAAEkE,YAAa,EAAMC,gBAAkB,CAAC,a,oBAI1E,WAAU,IAAD,OAECC,EAAY9B,KAAKzG,MAAMwI,UAAYC,IAAUC,OAC7CC,EAAWlC,KAAKzG,MAAMwI,WAAaC,IAAUC,OAE7CE,EAAWnC,KAAKzG,MAAM4I,SAE5B,GAAmC,IAA/B9E,GAAeE,KAAKyB,OACpB,IAAMoD,EACF,cAAC,IAAD,CAAWnE,YAAa+B,KAAKhC,MAAMC,YAAaiB,QAASc,KAAKlB,UAA9D,SAEQzB,GAAc,KAASI,KAAI,SAACC,GAAD,OACvB,cAAC,IAAD,CAAW2E,GAAI3E,EAAK7B,cAChBqD,QAAS,EAAKJ,UACd6B,OACI,cAAC,IAAD,CACIH,KACK0B,GAAYC,IAAaG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMO,SAASb,EAAK7B,kBAEhIqG,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAkB1B,QAAS,EAAKhC,YAEzE2D,MACIP,GAAaC,IAAaG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,EAAKhC,UAAjC,SAA4C,cAAC,IAAD,OAE5EoD,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAmB1B,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMM,aAAaZ,EAAK7B,kBAExI,cAAC,IAAD,CAAmBiF,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA/D,SAAuE,EAAKM,MAAMM,aAAaZ,EAAK7B,iBAX7G,0EAHR,SAqBI,sBAAK6G,UAAU,kDAAf,UACI,cAAC,IAAD,CAAOA,UAAU,8BAAjB,SACI,6BAAKhF,EAAKiC,UAEd,eAAC,IAAD,CAAO+C,UAAU,8BAAjB,UACI,qBAAKA,UAAU,kCAAf,kDACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,sBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,yIAIJ,uBACA,qBAAKH,UAAU,kCAAf,gFACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKkC,2BAE5E,uBACA,uBAAMN,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKmC,4BAGjF,uBACA,qBAAK6C,UAAU,kCAAf,6IACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,WAAW,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKgC,gBAG7F,qBAAKJ,MAAO,CAACqD,WAAY,GAAzB,SACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,oBAAoB,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKqF,cAGtG,uBACA,qBAAKL,UAAU,kCAAf,wDACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,+JADJ,IAC+E5H,GAAesC,EAAI,eAAmBuF,OAErH,uBACA,uBAAM3D,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,kGADJ,IACoE5H,GAAesC,EAAI,eAAmBmG,SAE1G,uBACA,uBAAMvE,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,gIADJ,IACyE5H,GAAesC,EAAI,eAAmBoG,mBAIvH,cAAC,IAAD,CAAOpB,UAAU,8BAAjB,SACI,mBAAGA,UAAU,MAAb,SACKhF,EAAKwF,0BAUlCC,EACA,eAAC,IAAD,CAAMC,MAAOhB,EAAOjE,OAAQ6B,KAAKhC,MAAMG,OAAvC,UACI,cAAC,IAAD,CAAUkB,KAAMyC,EAAY,IAAM,IAAlC,SAEQzE,GAAc,KAASI,KAAI,SAACC,GAAD,OACnB,eAAC,IAAD,CAAMpD,KAAK,UAAX,UACQ,qBAAKoI,UAAWhF,EAAK2F,OAAS,YAC9B,sBAAKX,UAAU,iBAAf,UACI,qBAAKA,UAAU,yBAAf,SAAyChF,EAAKiC,QAC9C,sBAAK+C,UAAU,sBAAf,UACI,sBAAKA,UAAU,4BAAf,UACI,cAAC,IAAD,CAAuB7E,MAAO,GAAIC,OAAQ,KAC1C,qBAAK4E,UAAU,iCAAf,SACI,cAAC,EAAD,CAAMhJ,UAAWgE,EAAKgC,SAAUpF,KAAK,aAG7C,qBAAKoI,UAAU,8DAAf,SACI,sBAAKA,UAAU,kCAAf,UACI,qBAAKA,UAAU,kCAAf,2EACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKgC,wBAM5F,sBAAKgD,UAAU,wBAAf,UACI,cAAC,IAAD,CAAQA,UAAU,+BAA+BpI,KAAK,UAAU8E,OAAQ,cAAC,IAAD,IAAsB0B,QAAS,kBAAM,EAAK/B,eAAerB,EAAK7B,gBAAtI,oEACA,cAAC,IAAD,CAAQ6G,UAAU,iEAAiEpI,KAAK,UAAUgJ,WAAY,EAAK5E,eAAgBoC,QAAS,kBAAM,EAAKyC,qBAAqB7F,IAA5K,SAAmL,cAAC,IAAD,MACnL,cAAC,IAAD,CAAQgF,UAAU,iEAAiEpI,KAAK,UAASwG,QAAS,kBAAM,EAAKyB,wBAAwB7E,IAA7I,SAAqJ,EAAKM,MAAMK,aAAaX,EAAK7B,+BAQjNmE,KAAKhC,MAAMI,iBAIpB,GAAuB,QAAnB4B,KAAKzG,MAAMe,KACX6I,EAAQ,8BAEJA,EAAS,cAAC,IAAD,qOAGrB,OAAOA,M,GArZkBxE,IAAM6E,WA2ZxBS,GAFGP,YAAaC,YAAeK,GAAoB,CAACjC,WAAW,KCpe1E3E,GAAa,IAAIpB,eACjBoB,GAAWnB,KAAK,OAAQ,iHAAiH,GACzImB,GAAW1B,OAEX,IAcAgB,GACAC,GACAC,GACAC,GAjBIQ,GAAiBlB,KAAKC,MAAMgB,GAAWf,cACvCjB,GAAiBiC,GAAc,KAASvC,QACxC,SAASC,EAAEC,GACP,IAAIsC,EAAwB,IAAItB,eAIhC,OAHAsB,EAAsBrB,KAAK,OAAQ,gHAAkHjB,EAAEa,cAAgB,iBAAiB,GACxLyB,EAAsB5B,OACtBX,EAAEC,EAAC,eAAqBmB,KAAKC,MAAMkB,EAAsBjB,cAAckB,KAAKvC,EAAC,eAAmBwC,MACzFzC,IAEX,IAGJ+B,IAAoB,EACpBC,GAAgB,GAMpBM,GAAc,KAASI,KAAI,SAACC,GACxBX,GAAcY,KAAKD,EAAK7B,kB,IAUtBqI,G,kDACF,WAAY3K,GAAQ,IAAD,8BACf,cAAMA,IAEDyE,MAAQ,CACXC,YAAa,KACbC,aAAc,GACdC,OAAQ,KACRC,SAAU,KACVV,KAAM,MAGR,EAAKgB,eAAiBC,IAAMC,YAC5B,EAAKJ,SAAW,EAAKA,SAASC,KAAd,gBAChB,EAAKI,UAAY,EAAKA,UAAUJ,KAAf,gBAEjB,EAAKK,UAAY,WACf,EAAKC,eAAe,EAAKf,MAAME,aAAa,EAAKF,MAAME,aAAac,OAAS,KAhBhE,E,kDAoBnB,SAAef,GACXA,EAAcA,GAAe,KAC7B,IAAIC,EAAe8B,KAAKhC,MAAME,aAAX,YAA8B8B,KAAKhC,MAAME,cAAgB,GAExD,OAAhBD,EACFC,EAAe,IACiC,IAAvCA,EAAaN,QAAQK,GAC9BC,EAAeA,EAAauB,OAAO,EAAGvB,EAAaN,QAAQK,GAAe,GAE1EC,EAAaP,KAAKM,GAGpB+B,KAAKf,SAAS,CACZhB,cACAC,mB,0BAIN,SAAaR,GAST,MAJU,CACN,QAJY,oFAAsBA,EAAKiC,MAA3B,uFACuBpF,EAAQmD,EAAKqF,OAAQ,cAC5C,oMAGZ,YAAe,6BAA+BrF,EAAK7B,iB,sBAK3D,WAAY,IAAD,OACDiE,EACF,cAAC,IAAD,CACIZ,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,2HAQEiC,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,uKAUA/B,EAAUiE,KAAKC,aAAaD,KAAKhC,MAAMN,MAC3CjC,IACCC,KAAK,0BAA2BK,GAChCJ,MAAK,SAAA4B,GACE,EAAKS,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU0B,OAE5BtD,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,uBAIjC,WAAa,IAAD,OACFA,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,2JAUAoC,EAAO,6BAA+BF,KAAKhC,MAAMN,KAAK7B,cAE1DJ,IACKC,KAAK,gBAAiB,CAAC,KAAQwE,IAC/B1D,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,kCAIrC,SAAqB/E,GAAI,IAAD,OAjHxB4B,IAAkB,EAClBC,GAAesD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBxC,OAC3EpB,GAAYyD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBC,IACxE5D,GAAYwD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBE,KAgHpER,KAAKf,SAAS,CAACvB,KAAM1C,IACrBgF,KAAKf,SAAS,CAAEd,OACZ,eAAC,IAAD,CACIe,QAAS,kBAAM,EAAKD,SAAS,CAAEd,OAAQ,QACvCsC,aAAc,cAAC,IAAD,CAAiBC,WAAS,EAACpG,KAAK,SAAhC,8DACdqG,OAAO,sLACPC,UAAWZ,KAAKtB,eAAemC,QAJnC,UAMI,cAAC,IAAD,CAAiBH,WAAS,EAACI,QAAS,kBAAM,EAAKtC,YAA/C,yDAGA,cAAC,IAAD,CAAiBkC,WAAS,EAACI,QAAS,kBAAM,EAAKjC,aAA/C,gH,+BAOZ,WACgC,IAAxBpE,OAAOC,SAASqG,MAAejE,KAAsF,GAAjEC,GAAca,QAAQoD,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,OAC5GjB,KAAKjB,eAAeiC,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,KACtDnE,IAAoB,K,gCAI5B,WACI,IAAIY,EAAO2D,SAASC,uBAAuB,4BACvC5D,EAAK,IACU,IAAI6D,kBAAiB,SAASC,GACrCA,IAAc5E,KACVyE,SAASI,gBAAgBC,aAAehF,GAAY,IACpDA,GAAYA,GAAYgB,EAAK,GAAG4C,wBAAwBxC,OAAS,EAEjEpB,IAAaG,GAAe,EAEhCa,EAAK,GAAG4B,MAAMiB,IAAM7D,GAAY,KAChCgB,EAAK,GAAG4B,MAAMkB,KAAO7D,GAAY,KACjCC,IAAkB,MAIjB+E,QAAQjE,EAAK,GAAI,CAAEkE,YAAa,EAAMC,gBAAkB,CAAC,a,oBAK1E,WAAU,IAAD,OAECC,EAAY9B,KAAKzG,MAAMwI,UAAYC,IAAUC,OAC7CC,EAAWlC,KAAKzG,MAAMwI,WAAaC,IAAUC,OAE7CE,EAAWnC,KAAKzG,MAAM4I,SAE5B,GAAmC,IAA/B9E,GAAeE,KAAKyB,OACpB,IAAMoD,EACF,cAAC,IAAD,CAAWnE,YAAa+B,KAAKhC,MAAMC,YAAaiB,QAASc,KAAKlB,UAA9D,SAEQzB,GAAc,KAASI,KAAI,SAACC,GAAD,OACvB,cAAC,IAAD,CAAW2E,GAAI3E,EAAK7B,cAChBqD,QAAS,EAAKJ,UACd6B,OACI,cAAC,IAAD,CACI8B,MAAOP,GAAYC,GAAYG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,EAAKhC,UAAjC,SAA4C,cAAC,IAAD,MAClF0B,KAAM0B,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAkB1B,QAAS,EAAKhC,YAF9E,0EAHR,SAWI,sBAAK4D,UAAU,kDAAf,UACI,cAAC,IAAD,CAAOA,UAAU,8BAAjB,SACI,6BAAKhF,EAAKiC,UAEd,eAAC,IAAD,CAAO+C,UAAU,8BAAjB,UACI,qBAAKA,UAAU,kCAAf,kDACI,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,sBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,2DAIR,uBAEA,qBAAKH,UAAU,kCAAf,gFACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKkC,2BAE5E,uBACA,uBAAMN,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKmC,4BAGjF,uBAEA,qBAAK6C,UAAU,kCAAf,6IACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,WAAW,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKgC,cAEzF,uBACA,uBAAMJ,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,oBAAoB,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKqF,eAGtG,uBACA,qBAAKL,UAAU,kCAAf,wDACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,+JADJ,IAC+E5H,GAAesC,EAAI,eAAmBuF,OAErH,uBACA,uBAAM3D,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,kGADJ,IACoE5H,GAAesC,EAAI,eAAmBmG,SAE1G,uBACA,uBAAMvE,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,gIADJ,IACyE5H,GAAesC,EAAI,eAAmBoG,mBAIvH,cAAC,IAAD,CAAOpB,UAAU,8BAAjB,SACI,mBAAGA,UAAU,MAAb,SACKhF,EAAKwF,0BAUlCC,EACA,eAAC,IAAD,CAAMC,MAAOhB,EAAOjE,OAAQ6B,KAAKhC,MAAMG,OAAvC,UACI,cAAC,IAAD,CAAUkB,KAAMyC,EAAY,IAAM,IAAlC,SAEQzE,GAAc,KAASI,KAAI,SAACC,GAAD,OACnB,eAAC,IAAD,CAAMpD,KAAK,UAAX,UACQ,qBAAKoI,UAAWhF,EAAK2F,OAAS,YAC9B,sBAAKX,UAAU,iBAAf,UACI,qBAAKA,UAAU,yBAAf,SAAyChF,EAAKiC,QAC9C,sBAAK+C,UAAU,sBAAf,UACI,sBAAKA,UAAU,4BAAf,UACI,cAAC,IAAD,CAAuB7E,MAAO,GAAIC,OAAQ,KAC1C,qBAAK4E,UAAU,iCAAf,SACI,cAAC,EAAD,CAAMhJ,UAAWgE,EAAKgC,SAAUpF,KAAK,aAG7C,qBAAKoI,UAAU,8DAAf,SACI,sBAAKA,UAAU,kCAAf,UACI,qBAAKA,UAAU,kCAAf,6IACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKgC,cAE5E,uBACA,uBAAMJ,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKqF,uBAM7F,sBAAKL,UAAU,wBAAf,UACI,cAAC,IAAD,CAAQA,UAAU,+BAA+BpI,KAAK,UAAU8E,OAAQ,cAAC,IAAD,IAAsB0B,QAAS,kBAAM,EAAK/B,eAAerB,EAAK7B,gBAAtI,oEACA,cAAC,IAAD,CAAQ6G,UAAU,iEAAiEpI,KAAK,UAAUgJ,WAAY,EAAK5E,eAAgBoC,QAAS,kBAAM,EAAKyC,qBAAqB7F,IAA5K,SAAmL,cAAC,IAAD,oBAQlNsC,KAAKhC,MAAMI,iBAIpB,GAAuB,QAAnB4B,KAAKzG,MAAMe,KACX6I,EAAQ,8BAEJA,EAAS,cAAC,IAAD,+IAGrB,OAAOA,M,GApSgBxE,IAAM6E,WA0StBW,GAFCT,YAAaC,YAAeO,GAAkB,CAAEnC,WAAW,KC1UvE3E,GAAa,IAAIpB,eACjBoB,GAAWnB,KAAK,OAAQ,kHAAkH,GAC1ImB,GAAW1B,OAEX,IAeAgB,GACAC,GACAC,GACAC,GAlBIQ,GAAiBlB,KAAKC,MAAMgB,GAAWf,cAEvCjB,GAAiBiC,GAAc,KAASvC,QACxC,SAASC,EAAEC,GACP,IAAIsC,EAAwB,IAAItB,eAIhC,OAHAsB,EAAsBrB,KAAK,OAAQ,gHAAkHjB,EAAEa,cAAgB,iBAAiB,GACxLyB,EAAsB5B,OACtBX,EAAEC,EAAC,eAAqBmB,KAAKC,MAAMkB,EAAsBjB,cAAckB,KAAKvC,EAAC,eAAmBwC,MACzFzC,IAEX,IAGJ+B,IAAoB,EACpBC,GAAgB,GAMpBM,GAAc,KAASI,KAAI,SAACC,GACxBX,GAAcY,KAAKD,EAAK7B,kB,IAUtBuI,G,kDACF,WAAY7K,GAAQ,IAAD,8BACf,cAAMA,IAEDyE,MAAQ,CACXC,YAAa,KACbC,aAAc,GACdC,OAAQ,KACRC,SAAU,KACVV,KAAM,MAGR,EAAKgB,eAAiBC,IAAMC,YAC5B,EAAKJ,SAAW,EAAKA,SAASC,KAAd,gBAChB,EAAKI,UAAY,EAAKA,UAAUJ,KAAf,gBAEjB,EAAKK,UAAY,WACb,EAAKC,eAAe,EAAKf,MAAME,aAAa,EAAKF,MAAME,aAAac,OAAS,KAhBlE,E,gDAoBnB,SAAatB,GAQT,MAJU,CACN,QAHUnD,EAAQmD,EAAKqF,OAAQ,OAAS,+EAAsBrF,EAAKiC,MAAzDpF,qMAIV,YAAe,6BAA+BmD,EAAK7B,iB,sBAK3D,WAAY,IAAD,OACDiE,EACF,cAAC,IAAD,CACIZ,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,2HAQEiC,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,uKAUA/B,EAAUiE,KAAKC,aAAaD,KAAKhC,MAAMN,MAE3CjC,IACKC,KAAK,0BAA2BK,GAChCJ,MAAK,SAAA4B,GACE,EAAKS,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU0B,OAE5BtD,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,uBAIrC,WAAa,IAAD,OACFD,EACF,cAAC,IAAD,CACIZ,QAAS,kBAAM,EAAKD,SAAS,CAAEb,SAAU,QACzCe,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,gBAAvC,SAAyD,cAAC,IAAD,CAAYC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OAHhH,+GAQEiC,EACF,cAAC,IAAD,CACIb,QAAS,kBACL,EAAKD,SAAS,CAAEb,SAAU,QAE9Be,SAAS,OACTC,OAAQ,cAAC,IAAD,CAAQC,KAAM,GAAIC,MAAO,CAAEC,WAAY,cAAvC,SAAuD,cAAC,IAAD,CAAcC,KAAK,OAAO3B,MAAO,GAAIC,OAAQ,OALhH,2JAUAoC,EAAO,6BAA+BF,KAAKhC,MAAMN,KAAK7B,cAE1DJ,IACKC,KAAK,gBAAiB,CAAC,KAAQwE,IAC/BvE,MAAK,SAAA4B,GAEF,GADkB,EAAKhE,MAAMwI,UAAYC,IAAUC,OACpC,CACX,GAAI,EAAKjE,MAAMI,SAAU,OACzB,EAAKa,SAAS,CAACb,SAAU0B,QAGhCtD,OAAM,SAAAF,GACC,EAAK0B,MAAMI,UACf,EAAKa,SAAS,CAACb,SAAU2B,S,wCAIrC,SAA2B/E,GAAI,IAAD,OA/G9B4B,IAAkB,EAClBC,GAAesD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBxC,OAC3EpB,GAAYyD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBC,IACxE5D,GAAYwD,MAAMC,OAAOC,QAAQ,eAAeC,wBAAwBE,KA8GpER,KAAKf,SAAS,CAACvB,KAAM1C,IACrBgF,KAAKf,SAAS,CAAEd,OACZ,eAAC,IAAD,CACIe,QAAS,kBAAM,EAAKD,SAAS,CAAEd,OAAQ,QACvCsC,aAAc,cAAC,IAAD,CAAiBC,WAAS,EAACpG,KAAK,SAAhC,8DACdqG,OAAO,sLACPC,UAAWZ,KAAKtB,eAAemC,QAJnC,UAMI,cAAC,IAAD,CAAiBH,WAAS,EAACI,QAAS,kBAAM,EAAKtC,YAA/C,yDAGA,cAAC,IAAD,CAAiBkC,WAAS,EAACI,QAAS,kBAAM,EAAKjC,aAA/C,gH,4BAOZ,SAAeZ,GACXA,EAAcA,GAAe,KAC7B,IAAIC,EAAe8B,KAAKhC,MAAME,aAAX,YAA8B8B,KAAKhC,MAAME,cAAgB,GAExD,OAAhBD,EACAC,EAAe,IAC+B,IAAvCA,EAAaN,QAAQK,GAC5BC,EAAeA,EAAauB,OAAO,EAAGvB,EAAaN,QAAQK,GAAe,GAE1EC,EAAaP,KAAKM,GAGtB+B,KAAKf,SAAS,CACZhB,cACAC,mB,+BAIN,WACgC,IAAxBzD,OAAOC,SAASqG,MAAejE,KAAsF,GAAjEC,GAAca,QAAQoD,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,OAC5GjB,KAAKjB,eAAeiC,OAAOvG,OAAOC,SAASqG,KAAKE,MAAM,KACtDnE,IAAoB,K,gCAI5B,WACI,IAAIY,EAAO2D,SAASC,uBAAuB,4BACvC5D,EAAK,IACU,IAAI6D,kBAAiB,SAASC,GACrCA,IAAc5E,KACVyE,SAASI,gBAAgBC,aAAehF,GAAY,IACpDA,GAAYA,GAAYgB,EAAK,GAAG4C,wBAAwBxC,OAAS,EAEjEpB,IAAaG,GAAe,EAEhCa,EAAK,GAAG4B,MAAMiB,IAAM7D,GAAY,KAChCgB,EAAK,GAAG4B,MAAMkB,KAAO7D,GAAY,KACjCC,IAAkB,MAIjB+E,QAAQjE,EAAK,GAAI,CAAEkE,YAAa,EAAMC,gBAAkB,CAAC,a,oBAM1E,WAAU,IAAD,OAECC,EAAY9B,KAAKzG,MAAMwI,UAAYC,IAAUC,OAC7CC,EAAWlC,KAAKzG,MAAMwI,WAAaC,IAAUC,OAE7CE,EAAWnC,KAAKzG,MAAM4I,SAE5B,GAAmC,IAA/B9E,GAAeE,KAAKyB,OACpB,IAAMoD,EACF,cAAC,IAAD,CAAWnE,YAAa+B,KAAKhC,MAAMC,YAAaiB,QAASc,KAAKlB,UAA9D,SAEQzB,GAAc,KAASI,KAAI,SAACC,GAAD,OACvB,cAAC,IAAD,CAAW2E,GAAI3E,EAAK7B,cAChBqD,QAAS,EAAKJ,UACd6B,OACI,cAAC,IAAD,CACI8B,MAAOP,GAAYC,IAAaG,KAAO,cAAC,IAAD,CAAmBxB,QAAS,EAAKhC,UAAjC,SAA4C,cAAC,IAAD,MACnF0B,KAAM0B,GAAYC,IAAaK,KAAW,cAAC,IAAD,CAAkB1B,QAAS,EAAKhC,YAF9E,0EAHR,SAWI,sBAAK4D,UAAU,kDAAf,UACI,cAAC,IAAD,CAAOA,UAAU,8BAAjB,SACI,6BAAKhF,EAAKiC,UAEd,eAAC,IAAD,CAAO+C,UAAU,8BAAjB,UACI,qBAAKA,UAAU,kCAAf,kDACA,qBAAKpD,MAAO,CAACqD,WAAY,GAAzB,SACI,sBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,qGAIJ,uBACA,qBAAKH,UAAU,kCAAf,gFACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA0BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKkC,2BAE5E,uBACA,uBAAMN,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAA2BhF,MAAO,GAAIC,OAAQ,KAAK,cAAC,EAAD,CAAMpE,UAAWgE,EAAKmC,4BAGjF,uBACA,qBAAK6C,UAAU,kCAAf,6IACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,WAAW,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKgC,cAEzF,uBACA,uBAAMJ,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,cAAC,IAAD,CAAchF,MAAO,GAAIC,OAAQ,GAAIwB,MAAO,CAACwD,MAAO,oBAAoB,cAAC,EAAD,CAAMpJ,UAAWgE,EAAKqF,eAGtG,uBACA,qBAAKL,UAAU,kCAAf,wDACA,sBAAKpD,MAAO,CAACqD,WAAY,GAAzB,UACI,uBAAMrD,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,+JADJ,IAC+E5H,GAAesC,EAAI,eAAmBuF,OAErH,uBACA,uBAAM3D,MAAO,CAACsD,QAAS,cAAeC,WAAY,UAAlD,UACI,sBAAMvD,MAAO,CAAC0D,WAAY,OAA1B,wGADJ,IACqE5H,GAAesC,EAAI,eAAmBmG,eAInH,cAAC,IAAD,CAAOnB,UAAU,8BAAjB,SACI,mBAAGA,UAAU,MAAb,SACKhF,EAAKwF,0BAUlCC,EACA,eAAC,IAAD,CAAMC,MAAOhB,EAAOjE,OAAQ6B,KAAKhC,MAAMG,OAAvC,UACI,cAAC,IAAD,CAAUkB,KAAMyC,EAAY,IAAM,IAAlC,SAEQzE,GAAc,KAASI,KAAI,SAACC,GAAD,OACvB,eAAC,IAAD,CAAMpD,KAAK,UAAX,UACQ,qBAAKoI,UAAWhF,EAAK2F,OAAS,YAC9B,sBAAKX,UAAU,iBAAf,UACI,qBAAKA,UAAU,yBAAf,SAAyChF,EAAKiC,QAC9C,sBAAK+C,UAAU,sBAAf,UACI,sBAAKA,UAAU,4BAAf,UACI,cAAC,IAAD,CAAuB7E,MAAO,GAAIC,OAAQ,KAC1C,qBAAK4E,UAAU,iCAAf,SACI,cAAC,EAAD,CAAMhJ,UAAWgE,EAAKgC,SAAUpF,KAAK,aAG7C,qBAAKoI,UAAU,4BAAf,sGAIJ,sBAAKA,UAAU,wBAAf,UACI,cAAC,IAAD,CAAQA,UAAU,+BAA+BpI,KAAK,UAAU8E,OAAQ,cAAC,IAAD,IAAsB0B,QAAS,kBAAM,EAAK/B,eAAerB,EAAK7B,gBAAtI,oEACA,cAAC,IAAD,CAAQ6G,UAAU,iEAAiEpI,KAAK,UAAUgJ,WAAY,EAAK5E,eAAgBoC,QAAS,kBAAM,EAAKuD,2BAA2B3G,IAAlL,SAAyL,cAAC,IAAD,oBAQpNsC,KAAKhC,MAAMI,iBAIpB,GAAuB,QAAnB4B,KAAKzG,MAAMe,KACX6I,EAAQ,8BAEJA,EAAS,cAAC,IAAD,qJAGrB,OAAOA,M,GApSexE,IAAM6E,WA0SrBc,GAFAZ,YAAaC,YAAeS,GAAiB,CAAErC,WAAW,KCrU1DwC,G,4JAdX,WACI,OACI,gCACI,cAAC,GAAD,CAAUjK,KAAK,SACf,cAACkK,GAAD,CAAUlK,KAAK,SACf,cAAC,GAAD,CAAWA,KAAK,SAChB,cAAC,GAAD,CAASA,KAAK,SACd,cAAC,GAAD,CAAQA,KAAK,gB,GARXqE,IAAM6E,WCGlBiB,G,kDACL,WAAYlL,GAAQ,IAAD,8BACjB,cAAMA,IAEDyE,MAAQ,CACR0G,eAAe,EACfpK,KAAM,MACZqK,UAAW,OANO,E,0CAUnB,WAAU,IACLC,EADI,OAoBR,MAlB6B,QAAzB5E,KAAKhC,MAAM2G,YACdC,EAAU,cAAC,GAAD,KAEkB,aAAzB5E,KAAKhC,MAAM2G,YACdC,EAAU,cAACJ,GAAD,KAEkB,yBAAzBxE,KAAKhC,MAAM2G,YACdC,EAAU,cAAC,GAAD,KAEkB,0BAAzB5E,KAAKhC,MAAM2G,YACdC,EAAU,cAAC,GAAD,KAEkB,YAAzB5E,KAAKhC,MAAM2G,YACdC,EAAU,cAAC,GAAD,KAEkB,WAAzB5E,KAAKhC,MAAM2G,YACdC,EAAU,cAAC,GAAD,KAIV,aADA,CACC,IAAD,UACC,eAAC,IAAD,WACC,cAAC,IAAD,8DACA,eAAC,IAAD,CAAOtF,MAAO,CAACuF,WAAY,IAA3B,UACC,eAAC,IAAD,CAAaC,SAAS,MAAMC,QAAM,EAAlC,UACC,cAAC,IAAD,CAAMzK,KAAK,UAAX,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CACCwG,QAAS,WACP,EAAK7B,SAAS,CAAC0F,UAAW,QAC1BlK,OAAOuK,SAAS,EAAG,IAGrBC,SAAmC,QAAzBjF,KAAKhC,MAAM2G,UANtB,gCAQA,cAAC,IAAD,CACC7D,QAAS,WACP,EAAK7B,SAAS,CAAC0F,UAAW,yBAC1BlK,OAAOuK,SAAS,EAAG,IAGrBC,SAAmC,yBAAzBjF,KAAKhC,MAAM2G,UANtB,yGAQA,cAAC,IAAD,CACC7D,QAAS,WACP,EAAK7B,SAAS,CAAC0F,UAAW,aAC1BlK,OAAOuK,SAAS,EAAG,IAGrBC,SAAmC,aAAzBjF,KAAKhC,MAAM2G,UANtB,wGAQA,cAAC,IAAD,CACC7D,QAAS,WACP,EAAK7B,SAAS,CAAC0F,UAAW,0BAC1BlK,OAAOuK,SAAS,EAAG,IAGrBC,SAAmC,0BAAzBjF,KAAKhC,MAAM2G,UANtB,uIAQA,cAAC,IAAD,CACC7D,QAAS,WACP,EAAK7B,SAAS,CAAC0F,UAAW,YAC1BlK,OAAOuK,SAAS,EAAG,IAGrBC,SAAmC,YAAzBjF,KAAKhC,MAAM2G,UANtB,yDAQA,cAAC,IAAD,CACC7D,QAAS,WACP,EAAK7B,SAAS,CAAC0F,UAAW,WAC1BlK,OAAOuK,SAAS,EAAG,IAGrBC,SAAmC,WAAzBjF,KAAKhC,MAAM2G,UANtB,4FAUF,cAAC,IAAD,CAAWO,MAAI,OAEfN,c,GA5FmBjG,IAAM6E,WAiHjB2B,GAVH,WACX,OACC,cAAC,IAAD,UACC,cAAC,IAAD,UACC,cAAC,GAAD,S,OCzGJ1J,IAAOC,KAAK,gBAEZD,IAAO2J,WAAU,SAACpK,GACQ,yBAAlBA,EAAEqK,OAAOC,OACTjE,SAASkE,KAAKC,aAAa,SAAUxK,EAAEqK,OAAO9H,KAAKkI,QACnDpE,SAASqE,KAAKF,aAAa,SAAUxK,EAAEqK,OAAO9H,KAAKkI,YAI3DE,IAASC,OAAO,cAAC,GAAD,IAASvE,SAASwE,eAAe,W","file":"static/js/main.5f512469.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction Time(props) {\r\n\r\n    var time = new Date((props.timestamp)*1000);\r\n\r\n    var hour = time.getHours();\r\n    var minute = time.getMinutes();\r\n    var day = time.getDate();\r\n    var monthNum = time.getMonth() + 1; \r\n    var year = time.getFullYear();\r\n    var monthNumeric = monthNum;\r\n\r\n    var month = [\r\n        \"default\",\r\n        \"января\",\r\n        \"февраля\",\r\n        \"марта\",\r\n        \"апреля\",\r\n        \"мая\",\r\n        \"июня\",\r\n        \"июля\",\r\n        \"августа\",\r\n        \"сентября\",\r\n        \"октября\",\r\n        \"ноября\",\r\n        \"декабря\"\r\n    ];\r\n\r\n    if (minute < 10) {\r\n        minute = \"0\"+minute; \r\n    }\r\n\r\n    if (monthNum < 10) {\r\n        monthNumeric = \"0\"+monthNum; \r\n    }\r\n\r\n    if (day < 10) {\r\n        day = \"0\"+day; \r\n    }\r\n\r\n    switch (props.mode) {\r\n        case \"day\":\r\n            return ( <span>{day+\" \"+month[monthNum]+\" \"+ year}</span> )\r\n\r\n        case \"time\":\r\n            return ( <span>{hour+\":\"+minute}</span> )\r\n\r\n        case \"dayAndTime\":\r\n            return ( <span>{day+\".\"+monthNumeric+\", \"+hour+\":\"+minute}</span> )    \r\n            \r\n        default:            \r\n            return ( <span>{day+\".\"+monthNumeric+\".\"+year+\", \"+hour+\":\"+minute}</span> ); \r\n    }  \r\n}\r\n\r\nexport default Time","function TimeStr (timestamp, mode) {\r\n    var time = new Date(timestamp*1000);\r\n\r\n    var hour = time.getHours();\r\n    var minute = time.getMinutes();\r\n    var day = time.getDate();\r\n    var monthNum = time.getMonth() + 1; \r\n    var year = time.getFullYear();\r\n    var monthNumeric = monthNum;\r\n\r\n    var month = [\r\n        \"default\",\r\n        \"января\",\r\n        \"февраля\",\r\n        \"марта\",\r\n        \"апреля\",\r\n        \"мая\",\r\n        \"июня\",\r\n        \"июля\",\r\n        \"августа\",\r\n        \"сентября\",\r\n        \"октября\",\r\n        \"ноября\",\r\n        \"декабря\"\r\n    ];\r\n\r\n    if (minute < 10) {\r\n        minute = \"0\"+minute; \r\n    }\r\n\r\n    if (monthNum < 10) {\r\n        monthNumeric = \"0\"+monthNum; \r\n    }\r\n\r\n    if (day < 10) {\r\n        day = \"0\" + day; \r\n    }\r\n\r\n    switch (mode) {\r\n        case \"day\":\r\n            return (time.getDate() + \" \" + month[monthNum] + \" \" + year)\r\n\r\n        case \"time\":\r\n            return ( hour+\":\"+minute )\r\n\r\n        case \"dayAndTime\":\r\n            return ( day+\".\"+monthNumeric+\", \"+hour+\":\"+minute )    \r\n            \r\n        default:            \r\n            return ( day+\".\"+monthNumeric+\".\"+year+\", \"+hour+\":\"+minute); \r\n    }  \r\n}\r\n\r\nexport default TimeStr","function getLaunchParams() {\r\n    var launchParams\r\n    return launchParams = \r\n        window\r\n            .location\r\n            .search\r\n            .replace('?', '')\r\n            .split('&')\r\n            .reduce(\r\n                (p, e) => {\r\n                    var a = e.split('=')\r\n                    p[decodeURIComponent(a[0])] = decodeURIComponent(a[1])\r\n                    return p\r\n                },\r\n                {}\r\n            )\r\n}\r\n\r\nexport default getLaunchParams","import getLaunchParams from '../getParams/search'\r\nimport bridge from \"@vkontakte/vk-bridge\"\r\n\r\nfunction subscribeResult(tournamentInfo) {\r\n    var subscribe = new Promise((resolve, reject) => {\r\n        var params = getLaunchParams()\r\n        bridge\r\n            .send(\"VKWebAppAllowNotifications\")\r\n            .then(() => {\r\n                var url = `https://wotbtournamentvkapp.ru/vkapp/subscribe${window.location.search}&tournament_id=${tournamentInfo.tournament_id}&user_id=${params.vk_user_id}`\r\n                var request = new XMLHttpRequest()\r\n                request.open('GET', url, true)\r\n                request.send()\r\n                request.onload = () => {\r\n                    try {\r\n                        if (JSON.parse(request.responseText) == 200)\r\n                            resolve()\r\n                        else\r\n                            reject()\r\n                    } catch (error) {\r\n                        reject()\r\n                    }\r\n                }\r\n                request.onerror = () => {\r\n                    reject()\r\n                }\r\n            })   \r\n            .catch(() => {\r\n                reject()\r\n            })             \r\n    })\r\n    return subscribe\r\n}\r\n\r\nexport default subscribeResult","import getLaunchParams from '../getParams/search'\r\n\r\nfunction unsubscribeResult(tournamentInfo) {\r\n    var unsubscribe = new Promise((resolve, reject) => {\r\n        var params = getLaunchParams()\r\n        var url = `https://wotbtournamentvkapp.ru/vkapp/unsubscribe?tournament_id=${tournamentInfo.tournament_id}&user_id=${params.vk_user_id}`\r\n        var request = new XMLHttpRequest()\r\n        request.open('GET', url, true)\r\n        request.send()\r\n        request.onload = () => {\r\n            try {\r\n                if (JSON.parse(request.responseText) == 200)\r\n                    resolve()\r\n                else\r\n                    reject()\r\n            } catch (error) {\r\n                reject()\r\n            }\r\n        }\r\n        request.onerror = () => {\r\n            reject()\r\n        }  \r\n    })\r\n    return unsubscribe\r\n}\r\n\r\nexport default unsubscribeResult","import React from 'react';\r\nimport {Root, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, withAdaptivity, ViewWidth, withPlatform, ANDROID, PanelHeaderClose, IOS} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar, ActionSheetItem, ActionSheet} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\nimport subscribeResult from '../notification/notification_subscribe'\r\nimport unsubscribeResult from '../notification/notification_unsubscribe';\r\nimport { Icon28NotificationAddOutline } from '@vkontakte/icons';\r\nimport { Icon24NotificationCheckOutline } from '@vkontakte/icons';\r\nimport getLaunchParams from '../getParams/search'\r\n\r\nvar isOpenedFirstTime = false \r\nvar tournamentsID = []  \r\nvar positionY \r\nvar positionX\r\nvar stylesIsUpdated\r\nvar buttonHeight\r\nvar bellArrayButtons = {}\r\nvar bellArrayModalAndroid = {}\r\nvar bellArrayModalIOS = {}\r\nvar activeBells = []\r\n\r\nfunction getPosition() {\r\n    stylesIsUpdated = false\r\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n}\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=upcoming\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\n    TournamentList['data'].map((elem) => {\r\n        tournamentsID.push(elem.tournament_id)\r\n    })\r\n\r\n    bellArrayButtons = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            if (activeBells.indexOf(e.tournament_id) != -1) \r\n                p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n            else\r\n                p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalAndroid = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            if (activeBells.indexOf(e.tournament_id) != -1)\r\n                p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n            else\r\n                p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalIOS = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            if (activeBells.indexOf(e.tournament_id) != -1)\r\n                p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n            else    \r\n                p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\nclass UpcommingComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            activeModal: null,\r\n            modalHistory: [],\r\n            popout: null,\r\n            snackbar: null,\r\n            elem: null,\r\n            bellsButtons: bellArrayButtons,\r\n            bellsAndroid: bellArrayModalAndroid,\r\n            bellsIOS: bellArrayModalIOS\r\n        };\r\n        \r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareTargetRef = React.createRef()\r\n        this.shareLink = this.shareLink.bind(this)\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n        };\r\n    }\r\n\r\n    subscribeToNotification(elem) {\r\n        var snackbar\r\n        if (activeBells.indexOf(elem.tournament_id) == -1) {\r\n            subscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.push(elem.tournament_id)\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => this.setState({ snackbar: null })}\r\n                            duration=\"2000\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Вы будете уведомлены о начале регистрации на турнир\r\n                        </Snackbar>\r\n                    this.setState({snackbar : snackbar})    \r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при подписке на уведомление\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})       \r\n                })\r\n        } else {\r\n            unsubscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.splice(activeBells.indexOf(elem.tournament_id), 1)\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при отписке от уведомления\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})     \r\n                })\r\n        }\r\n    }\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message = TimeStr(elem.start_at, \"day\") + \" запланирован турнир \\\"\" + elem.title + \"\\\"\" +\r\n                      \"\\n\\nНачало регистрации: \" + TimeStr(elem.registration_start_at, \"dayAndTime\") +\r\n                      \"\\nОкончание регистрации: \" + TimeStr(elem.registration_end_at, \"dayAndTime\") +\r\n                      \"\\n\\nНачало боев: \" + TimeStr(elem.start_at, \"dayAndTime\") +\r\n                      \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при публикации записи\r\n            </Snackbar>\r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n\r\n        bridge\r\n            .send(\"VKWebAppShowWallPostBox\", request)\r\n            .then(data => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})\r\n            }) \r\n            .catch(error => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})\r\n            })      \r\n    }\r\n\r\n    shareLink() {\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при отправке ссылки\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .catch(error => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})\r\n            })      \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => this.setState({ popout: null })}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    Отправить ссылку\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n            modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n            modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n            activeModal,\r\n            modalHistory\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n\r\n        var activeSubscriptions = new XMLHttpRequest()\r\n        var params = getLaunchParams()\r\n        activeSubscriptions.open('GET', `https://wotbtournamentvkapp.ru/vkapp/activeSubscriptions?user_id=${params.vk_user_id}`, true)\r\n        activeSubscriptions.send()\r\n        activeSubscriptions.onload = () => {\r\n            try {\r\n                activeBells = JSON.parse(activeSubscriptions.responseText)  \r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n            bellArrayButtons = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1) \r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    else\r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    return p\r\n                }, {}\r\n            )\r\n            bellArrayModalAndroid = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1)\r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    else\r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    return p\r\n                }, {}\r\n            )\r\n            bellArrayModalIOS = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1)\r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    else    \r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    return p\r\n                }, {}\r\n            ) \r\n            this.setState({bellsAndroid: bellArrayModalAndroid})\r\n            this.setState({bellsIOS: bellArrayModalIOS})\r\n            this.setState({bellsButtons: bellArrayButtons})\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 200) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5    \r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader \r\n                                        left={\r\n                                            (isMobile && platform === IOS && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsIOS[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>)\r\n                                        }\r\n                                        right={\r\n                                            isMobile && (platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton> )\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (<PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                        }\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                Запланирован\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        \r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                        </div>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Registration\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                                                </span>\r\n                                                                <br/>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Начало боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16Recent width={17} height={17}/><Time timestamp={elem.start_at} mode=\"dayAndTime\"/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsButtons[elem.tournament_id]}</Button>\r\n                                                </div> \r\n                                            </div>\r\n                                    </Card>\r\n                            \r\n                            )\r\n                        }\r\n                    </CardGrid> \r\n                    {this.state.snackbar}\r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет запланированных турниров</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst Upcomming = withPlatform(withAdaptivity(UpcommingComponent, { viewWidth: true }))\r\n\r\nexport default Upcomming;","import React from 'react';\r\nimport {ActionSheet, ActionSheetItem, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, Root, withAdaptivity, ViewWidth, withPlatform, IOS, PanelHeaderClose, ANDROID} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\nimport subscribeResult from '../notification/notification_subscribe'\r\nimport unsubscribeResult from '../notification/notification_unsubscribe';\r\nimport { Icon28NotificationAddOutline } from '@vkontakte/icons';\r\nimport { Icon24NotificationCheckOutline } from '@vkontakte/icons';\r\nimport getLaunchParams from '../getParams/search'\r\n\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=registration_started\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\nvar isOpenedFirstTime = false \r\nvar tournamentsID = []  \r\nvar positionY \r\nvar positionX\r\nvar stylesIsUpdated\r\nvar buttonHeight\r\nvar bellArrayButtons = {}\r\nvar bellArrayModalAndroid = {}\r\nvar bellArrayModalIOS = {}\r\nvar activeBells = []\r\n\r\nTournamentList['data'].map((elem) => {\r\n    tournamentsID.push(elem.tournament_id)\r\n})\r\n\r\nfunction getPosition() {\r\n    stylesIsUpdated = false\r\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n}  \r\n\r\nbellArrayButtons = TournamentList['data'].reduce(\r\n    (p, e) => {\r\n        if (activeBells.indexOf(e.tournament_id) != -1) \r\n            p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n        else\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n        return p\r\n    }, {}\r\n)\r\n\r\nbellArrayModalAndroid = TournamentList['data'].reduce(\r\n    (p, e) => {\r\n        if (activeBells.indexOf(e.tournament_id) != -1)\r\n            p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n        else\r\n            p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n        return p\r\n    }, {}\r\n)\r\n\r\nbellArrayModalIOS = TournamentList['data'].reduce(\r\n    (p, e) => {\r\n        if (activeBells.indexOf(e.tournament_id) != -1)\r\n            p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n        else    \r\n            p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n        return p\r\n    }, {}\r\n)\r\n\r\nclass RegStartComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            activeModal: null,\r\n            modalHistory: [],\r\n            popout: null,\r\n            snackbar: null,\r\n            elem: null,\r\n            bellsButtons: bellArrayButtons,\r\n            bellsAndroid: bellArrayModalAndroid,\r\n            bellsIOS: bellArrayModalIOS\r\n        };\r\n\r\n        this.shareTargetRef = React.createRef();\r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareLink = this.shareLink.bind(this)\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n        };\r\n    }\r\n\r\n    subscribeToNotification(elem) {\r\n        var snackbar\r\n        if (activeBells.indexOf(elem.tournament_id) == -1) {\r\n            subscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.push(elem.tournament_id)\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => this.setState({ snackbar: null })}\r\n                            duration=\"2000\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Вы будете уведомлены о начале боёв турнира\r\n                        </Snackbar>\r\n                    this.setState({snackbar : snackbar})    \r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при подписке на уведомление\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})       \r\n                })\r\n        } else {\r\n            unsubscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.splice(activeBells.indexOf(elem.tournament_id), 1)\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при отписке от уведомления\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})     \r\n                })\r\n        }\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n            modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n            modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n            activeModal,\r\n            modalHistory\r\n        });\r\n    };\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message =   \"Началась регистрация на турнир турнир \\\"\" + elem.title + \"\\\"\" +\r\n                        \"\\nОкончание регистрации: \" + TimeStr(elem.registration_end_at, \"dayAndTime\") +\r\n                        \"\\nНачало боев: \" + TimeStr(elem.start_at, \"dayAndTime\") +\r\n                        \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() =>\r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при публикации записи\r\n            </Snackbar>\r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n        bridge\r\n        .send(\"VKWebAppShowWallPostBox\", request)\r\n        .then(data => {\r\n            if (this.state.snackbar) return\r\n            this.setState({snackbar: successSnackbar})\r\n        }) \r\n        .catch(error => {\r\n            if (this.state.snackbar) return\r\n            this.setState({snackbar: errorSnackbar})\r\n        })     \r\n    }\r\n\r\n    shareLink() {\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при отправке ссылки\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .catch(error => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})\r\n            })      \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => this.setState({ popout: null })}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    Отправить ссылку\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n\r\n        var activeSubscriptions = new XMLHttpRequest()\r\n        var params = getLaunchParams()\r\n        activeSubscriptions.open('GET', `https://wotbtournamentvkapp.ru/vkapp/activeSubscriptions?user_id=${params.vk_user_id}`, true)\r\n        activeSubscriptions.send()\r\n        activeSubscriptions.onload = () => {\r\n            try {\r\n                activeBells = JSON.parse(activeSubscriptions.responseText)  \r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n            bellArrayButtons = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1) \r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    else\r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    return p\r\n                }, {}\r\n            )\r\n            bellArrayModalAndroid = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1)\r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    else\r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    return p\r\n                }, {}\r\n            )\r\n            bellArrayModalIOS = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1)\r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    else    \r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    return p\r\n                }, {}\r\n            ) \r\n            this.setState({bellsAndroid: bellArrayModalAndroid})\r\n            this.setState({bellsIOS: bellArrayModalIOS})\r\n            this.setState({bellsButtons: bellArrayButtons})\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 200) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5\r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader \r\n                                        left={\r\n                                            (isMobile && platform === IOS && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsIOS[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>)\r\n                                        }\r\n                                        right={\r\n                                            isMobile && (platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton> )\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (<PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                        }\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                            <div style={{marginLeft: 5}}>\r\n                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                    Идёт регистрация\r\n                                                </span>\r\n                                            </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        \r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Создано команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Подтвердило участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].confirmed}\r\n                                            </span>\r\n                                        </div>\r\n                                        \r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Registration\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                                                </span>\r\n                                                                <br/>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Начало боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16Recent width={17} height={17}/><Time timestamp={elem.start_at} mode=\"dayAndTime\"/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\"onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsButtons[elem.tournament_id]}</Button>\r\n                                                </div> \r\n                                            </div>\r\n                                    </Card>\r\n                                \r\n                            )\r\n                        }\r\n                    </CardGrid>\r\n                    {this.state.snackbar}\r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет турниров с начавшейся регистрацией</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst RegStart = withPlatform(withAdaptivity(RegStartComponent, {viewWidth: true}))\r\n\r\nexport default RegStart;","import React from 'react';\r\nimport {Root, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, withAdaptivity, ViewWidth, withPlatform, IOS, ANDROID, PanelHeaderClose} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar, ActionSheetItem, ActionSheet} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\nimport subscribeResult from '../notification/notification_subscribe'\r\nimport unsubscribeResult from '../notification/notification_unsubscribe';\r\nimport { Icon28NotificationAddOutline } from '@vkontakte/icons';\r\nimport { Icon24NotificationCheckOutline } from '@vkontakte/icons';\r\nimport getLaunchParams from '../getParams/search'\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=registration_finished\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\n    var isOpenedFirstTime = false \r\n    var tournamentsID = []  \r\n    var positionY \r\n    var positionX\r\n    var stylesIsUpdated\r\n    var buttonHeight\r\n    var bellArrayButtons = {}\r\n    var bellArrayModalAndroid = {}\r\n    var bellArrayModalIOS = {}\r\n    var activeBells = []\r\n\r\n    function getPosition() {\r\n        stylesIsUpdated = false\r\n        buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n        positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n        positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n    }\r\n    \r\n    TournamentList['data'].map((elem) => {\r\n        tournamentsID.push(elem.tournament_id)\r\n    })\r\n\r\n    bellArrayButtons = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            if (activeBells.indexOf(e.tournament_id) != -1) \r\n                p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n            else\r\n                p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalAndroid = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            if (activeBells.indexOf(e.tournament_id) != -1)\r\n                p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n            else\r\n                p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n            return p\r\n        }, {}\r\n    )\r\n\r\n    bellArrayModalIOS = TournamentList['data'].reduce(\r\n        (p, e) => {\r\n            if (activeBells.indexOf(e.tournament_id) != -1)\r\n                p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n            else    \r\n                p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n            return p\r\n        }, {}\r\n    )\r\n    \r\n\r\nclass RegFinishComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n            activeModal: null,\r\n            modalHistory: [],\r\n            popout: null,\r\n            snackbar: null,\r\n            elem: null,\r\n            bellsButtons: bellArrayButtons,\r\n            bellsAndroid: bellArrayModalAndroid,\r\n            bellsIOS: bellArrayModalIOS\r\n        };\r\n\r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareTargetRef = React.createRef();\r\n        this.shareLink = this.shareLink.bind(this)\r\n    \r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n        };\r\n    }\r\n\r\n    subscribeToNotification(elem) {\r\n        var snackbar\r\n        if (activeBells.indexOf(elem.tournament_id) == -1) {\r\n            subscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.push(elem.tournament_id)\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => this.setState({ snackbar: null })}\r\n                            duration=\"2000\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Вы будете уведомлены о начале боёв турнира\r\n                        </Snackbar>\r\n                    this.setState({snackbar : snackbar})    \r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при подписке на уведомление\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})       \r\n                })\r\n        } else {\r\n            unsubscribeResult(elem)\r\n                .then(() => {\r\n                    activeBells.splice(activeBells.indexOf(elem.tournament_id), 1)\r\n                    bellArrayModalAndroid[elem.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    bellArrayModalIOS[elem.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    bellArrayButtons[elem.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    this.setState({bellsAndroid: bellArrayModalAndroid})\r\n                    this.setState({bellsIOS: bellArrayModalIOS})\r\n                    this.setState({bellsButtons: bellArrayButtons})\r\n                })\r\n                .catch(() => {\r\n                    snackbar =\r\n                        <Snackbar\r\n                            onClose={() => \r\n                                this.setState({ snackbar: null })\r\n                            }\r\n                            duration=\"1500\"\r\n                            before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n                        >\r\n                            Ошибка при отписке от уведомления\r\n                        </Snackbar> \r\n                    this.setState({snackbar : snackbar})     \r\n                })\r\n        }\r\n    }\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message = \"Завершилась регистрация на турнир \\\"\" + elem.title + \"\\\"\" +\r\n                      \"\\nНачало боев: \" + TimeStr(elem.start_at) +\r\n                      \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при публикации записи\r\n            </Snackbar>\r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n\r\n        bridge\r\n            .send(\"VKWebAppShowWallPostBox\", request)\r\n            .then(data => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: successSnackbar})\r\n            }) \r\n            .catch(error => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})\r\n            })      \r\n    }\r\n\r\n    shareLink() {\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при отправке ссылки\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .catch(error => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})\r\n            })      \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => this.setState({ popout: null })}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    Отправить ссылку\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n            modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n            modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n            activeModal,\r\n            modalHistory\r\n        });\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n\r\n        var activeSubscriptions = new XMLHttpRequest()\r\n        var params = getLaunchParams()\r\n        activeSubscriptions.open('GET', `https://wotbtournamentvkapp.ru/vkapp/activeSubscriptions?user_id=${params.vk_user_id}`, true)\r\n        activeSubscriptions.send()\r\n        activeSubscriptions.onload = () => {\r\n            try {\r\n                activeBells = JSON.parse(activeSubscriptions.responseText)  \r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n            bellArrayButtons = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1) \r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline width={19} height={21}/>\r\n                    else\r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline width={19} height={21}/>\r\n                    return p\r\n                }, {}\r\n            )\r\n            bellArrayModalAndroid = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1)\r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline width={28} height={28}/>\r\n                    else\r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline/>\r\n                    return p\r\n                }, {}\r\n            )\r\n            bellArrayModalIOS = TournamentList['data'].reduce(\r\n                (p, e) => {\r\n                    if (activeBells.indexOf(e.tournament_id) != -1)\r\n                        p[e.tournament_id] = <Icon24NotificationCheckOutline/>\r\n                    else    \r\n                        p[e.tournament_id] = <Icon28NotificationAddOutline width={24} height={24}/>\r\n                    return p\r\n                }, {}\r\n            ) \r\n            this.setState({bellsAndroid: bellArrayModalAndroid})\r\n            this.setState({bellsIOS: bellArrayModalIOS})\r\n            this.setState({bellsButtons: bellArrayButtons})\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 150) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5\r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n    render() {\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader\r\n                                        left={\r\n                                            (isMobile && platform === IOS && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsIOS[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>)\r\n                                        }\r\n                                        right={\r\n                                            isMobile && (platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton> )\r\n                                            ||\r\n                                            (isMobile && platform === ANDROID && <PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                            ||\r\n                                            (<PanelHeaderButton onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsAndroid[elem.tournament_id]}</PanelHeaderButton>)\r\n                                        }\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                Регистрация завершена\r\n                                            </span>\r\n                                        </div>    \r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Создано команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Подтвердило участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].confirmed}\r\n                                            </span>\r\n                                        </div>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main TournamentCard__Info-Main-OneItem\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Начало боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.start_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\"onClick={() => this.subscribeToNotification(elem)}>{this.state.bellsButtons[elem.tournament_id]}</Button>\r\n                                                </div> \r\n                                            </div>\r\n                                    </Card>\r\n                                \r\n                            )\r\n                        }\r\n                    </CardGrid>\r\n                    {this.state.snackbar} \r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет турниров с завершённой регистрацией</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst RegFinish = withPlatform(withAdaptivity(RegFinishComponent, {viewWidth: true}))\r\n\r\nexport default RegFinish;","import React from 'react';\r\nimport {ActionSheet, Root, ActionSheetItem, CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, Group, Placeholder, ViewWidth, withAdaptivity, withPlatform, ANDROID, PanelHeaderClose, IOS} from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\r\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\r\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\r\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\r\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\r\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\r\nimport Time from \"../time/TimeComponent\";\r\nimport TimeStr from \"../time/TimeString\";\r\nimport {Snackbar, Avatar} from '@vkontakte/vkui'\r\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Icon24Dismiss } from '@vkontakte/icons';\r\n\r\nvar tournament = new XMLHttpRequest();\r\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=running\", false)\r\n    tournament.send();\r\n\r\n    var TournamentList = JSON.parse(tournament.responseText);\r\n    var tournamentInfo = TournamentList['data'].reduce(\r\n        function(p,e){\r\n            var tournamentInfoRequest = new XMLHttpRequest();\r\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\r\n            tournamentInfoRequest.send();\r\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\r\n            return p;\r\n        },\r\n        {}\r\n    );\r\n\r\nvar isOpenedFirstTime = false \r\nvar tournamentsID = []  \r\nvar positionY \r\nvar positionX\r\nvar stylesIsUpdated\r\nvar buttonHeight\r\n\r\nTournamentList['data'].map((elem) => {\r\n    tournamentsID.push(elem.tournament_id)\r\n})\r\n\r\nfunction getPosition() {\r\n    stylesIsUpdated = false\r\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\r\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\r\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\r\n}   \r\n\r\nclass RunningComponent extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n          activeModal: null,\r\n          modalHistory: [],\r\n          popout: null,\r\n          snackbar: null,\r\n          elem: null\r\n        };\r\n\r\n        this.shareTargetRef = React.createRef();\r\n        this.sendPost = this.sendPost.bind(this)\r\n        this.shareLink = this.shareLink.bind(this)\r\n    \r\n        this.modalBack = () => {\r\n          this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n        };\r\n    }\r\n\r\n    setActiveModal(activeModal) {\r\n        activeModal = activeModal || null;\r\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n    \r\n        if (activeModal === null) {\r\n          modalHistory = [];\r\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n          modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n        } else {\r\n          modalHistory.push(activeModal);\r\n        }\r\n    \r\n        this.setState({\r\n          activeModal,\r\n          modalHistory\r\n        });\r\n    };\r\n\r\n    buildRequest(elem) {\r\n        let request\r\n        let message =   \"Начался турнир \\\"\" + elem.title + \"\\\"\" +\r\n                        \"\\nОкончание боев: \" + TimeStr(elem.end_at, \"dayAndTime\") +\r\n                        \"\\nПодробнее можно узнать в приложении:\"\r\n        request = {\r\n            \"message\": message,\r\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\r\n        }\r\n        return request\r\n    }\r\n\r\n    sendPost() {\r\n        const successSnackbar =\r\n            <Snackbar\r\n                onClose={() => this.setState({ snackbar: null })}\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Запись опубликована\r\n            </Snackbar> \r\n\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })  \r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при публикации записи\r\n            </Snackbar>\r\n\r\n        let request = this.buildRequest(this.state.elem)\r\n        bridge\r\n        .send(\"VKWebAppShowWallPostBox\", request)\r\n        .then(data => {\r\n            if (this.state.snackbar) return\r\n            this.setState({snackbar: successSnackbar})\r\n        }) \r\n        .catch(error => {\r\n            if (this.state.snackbar) return\r\n            this.setState({snackbar: errorSnackbar})\r\n        })       \r\n    }\r\n\r\n    shareLink() {\r\n        const errorSnackbar =\r\n            <Snackbar\r\n                onClose={() => \r\n                    this.setState({ snackbar: null })\r\n                }\r\n                duration=\"2000\"\r\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\r\n            >\r\n                Ошибка при отправке ссылки\r\n            </Snackbar>\r\n\r\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\r\n\r\n        bridge\r\n            .send(\"VKWebAppShare\", {\"link\": link})\r\n            .catch(error => {\r\n                if (this.state.snackbar) return\r\n                this.setState({snackbar: errorSnackbar})\r\n            })      \r\n    }\r\n\r\n    openShareActionSheet(e) {\r\n        getPosition()\r\n        this.setState({elem: e})\r\n        this.setState({ popout:\r\n            <ActionSheet \r\n                onClose={() => this.setState({ popout: null })}\r\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\r\n                header=\"Как вы хотите поделиться турниром?\"\r\n                toggleRef={this.shareTargetRef.current}\r\n            >\r\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\r\n                    На стене\r\n                </ActionSheetItem>\r\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\r\n                    Отправить ссылку\r\n                </ActionSheetItem>\r\n          </ActionSheet>\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\r\n            this.setActiveModal(Number(window.location.hash.slice(1)))\r\n            isOpenedFirstTime = true\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\r\n        if (elem[0]) {\r\n            var observer = new MutationObserver(function(mutations) {\r\n                if (mutations && !stylesIsUpdated) {\r\n                    if (document.documentElement.clientHeight - positionY < 200) {\r\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \r\n                    } else {\r\n                        positionY += buttonHeight + 5    \r\n                    }\r\n                    elem[0].style.top = positionY + \"px\"\r\n                    elem[0].style.left = positionX + \"px\"\r\n                    stylesIsUpdated = true\r\n                } \r\n            });\r\n            \r\n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \r\n        } \r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\r\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\r\n\r\n        const platform = this.props.platform\r\n\r\n        if (TournamentList.data.length !== 0) {\r\n            const Modal = (\r\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\r\n                    {\r\n                        TournamentList['data'].map((elem) =>\r\n                            <ModalPage id={elem.tournament_id}\r\n                                onClose={this.modalBack}\r\n                                header={\r\n                                    <ModalPageHeader\r\n                                        right={isMobile && platform == IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton>}\r\n                                        left={isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}></PanelHeaderClose>}\r\n                                    >\r\n                                        Информация \r\n                                    </ModalPageHeader>\r\n                                }\r\n                            >\r\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <h4>{elem.title}</h4>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\r\n                                            <div style={{marginLeft: 5}}>\r\n                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                    Идут бои\r\n                                                </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\r\n                                            </span>\r\n                                        </div>\r\n                                        <br/>\r\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\r\n                                        <div style={{marginLeft: 5}}>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Создано команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\r\n                                            </span>\r\n                                            <br/>\r\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                <span style={{fontWeight: \"450\"}}>Подтвердило участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].confirmed}\r\n                                            </span>\r\n                                        </div>\r\n                                    </Group>\r\n                                    <Group className=\"vkuiGroup--custom-separator\">\r\n                                        <p className=\"Pre\">\r\n                                            {elem.description}\r\n                                        </p>\r\n                                    </Group>\r\n                                </div>\r\n                            </ModalPage>    \r\n                        )\r\n                    }\r\n                </ModalRoot>\r\n            );\r\n            \r\n            var List = (\r\n                <Root modal={Modal} popout={this.state.popout}>\r\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\r\n                        {\r\n                            TournamentList['data'].map((elem) => \r\n                                    <Card mode=\"outline\">\r\n                                            <div className={elem.status + \" border\"}></div>\r\n                                            <div className=\"TournamentCard\">\r\n                                                <div className=\"TournamentCard__Header\">{elem.title}</div>\r\n                                                <div className=\"TornamentCard__Info\">\r\n                                                    <div className=\"TornamentCard__Info-Start\">\r\n                                                        <Icon20CalendarOutline width={23} height={23}/>\r\n                                                        <div className=\"TornamentCard__Info-Start-Text\">\r\n                                                            <Time timestamp={elem.start_at} mode=\"day\"/>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"TournamentCard__Info-Main TournamentCard__Info-Main-OneItem\">\r\n                                                        <div className=\"TournamentCard__Info-Main-Start\">\r\n                                                            <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\r\n                                                            <div style={{marginLeft: 5}}>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.start_at}/>\r\n                                                                </span>\r\n                                                                <br/>\r\n                                                                <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\r\n                                                                    <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.end_at}/>\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"TornamentCard__Footer\">\r\n                                                    <Button className=\"TornamentCard__Footer-Button\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \r\n                                                    <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheet(elem)}><Icon16ReplyOutline/></Button>\r\n                                                </div>  \r\n                                            </div>\r\n                                    </Card>\r\n                                \r\n                            )\r\n                        }\r\n                    </CardGrid>\r\n                    {this.state.snackbar}                    \r\n                </Root>\r\n            )\r\n        } else {\r\n            if (this.props.mode == \"none\") {\r\n                List = (<span></span>)\r\n            } else {\r\n                var List = ( <Placeholder>Нет начавшихся турниров</Placeholder>);\r\n            }\r\n        }\r\n        return(List);\r\n    }\r\n}\r\n\r\nconst Running = withPlatform(withAdaptivity(RunningComponent, { viewWidth: true }))\r\n\r\nexport default Running;","import React from 'react';\nimport {CardGrid, Card, Button, ModalPage, ModalRoot, ModalPageHeader, PanelHeaderButton, IOS, ANDROID, withPlatform, Group, Placeholder, ActionSheet, ActionSheetItem, Root, ViewWidth, withAdaptivity, PanelHeaderClose} from \"@vkontakte/vkui\";\nimport Icon20CalendarOutline from '@vkontakte/icons/dist/20/calendar_outline';\nimport Icon16CancelCircleOutline from '@vkontakte/icons/dist/16/cancel_circle_outline';\nimport Icon16Recent from '@vkontakte/icons/dist/16/recent';\nimport Icon16CheckCircleOutline from '@vkontakte/icons/dist/16/check_circle_outline';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\nimport Icon16InfoOutline from '@vkontakte/icons/dist/16/info_outline';\nimport Time from \"../time/TimeComponent\";\nimport TimeStr from \"../time/TimeString\";\nimport {Snackbar, Avatar} from '@vkontakte/vkui'\nimport Icon16Done from '@vkontakte/icons/dist/16/done'\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel'\nimport bridge from \"@vkontakte/vk-bridge\";\nimport { Icon24Dismiss } from '@vkontakte/icons';\n\nvar tournament = new XMLHttpRequest();\n    tournament.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/list/?application_id=132530213b8f23d4c0e1d1f423c307a9&status=finished\", false)\n    tournament.send();\n\n    var TournamentList = JSON.parse(tournament.responseText);\n\n    var tournamentInfo = TournamentList['data'].reduce(\n        function(p,e){\n            var tournamentInfoRequest = new XMLHttpRequest();\n            tournamentInfoRequest.open(\"POST\", \"https://api.wotblitz.ru/wotb/tournaments/info/?application_id=132530213b8f23d4c0e1d1f423c307a9&tournament_id=\" + e.tournament_id + \"&fields=teams\", false)\n            tournamentInfoRequest.send();\n            p[e[\"tournament_id\"]] = JSON.parse(tournamentInfoRequest.responseText).data[e[\"tournament_id\"]].teams;\n            return p;\n        },\n        {}\n    );   \n\nvar isOpenedFirstTime = false \nvar tournamentsID = []  \nvar positionY \nvar positionX\nvar stylesIsUpdated\nvar buttonHeight\n\nTournamentList['data'].map((elem) => {\n    tournamentsID.push(elem.tournament_id)\n})\n\nfunction getPosition() {\n    stylesIsUpdated = false\n    buttonHeight = event.target.closest(\".vkuiButton\").getBoundingClientRect().height\n    positionY = event.target.closest(\".vkuiButton\").getBoundingClientRect().top\n    positionX = event.target.closest(\".vkuiButton\").getBoundingClientRect().left\n}\n    \nclass FinishComponent extends React.Component {\n    constructor(props) {\n        super(props);\n    \n        this.state = {\n          activeModal: null,\n          modalHistory: [],\n          popout: null,\n          snackbar: null,\n          elem: null\n        };\n\n        this.shareTargetRef = React.createRef();\n        this.sendPost = this.sendPost.bind(this)\n        this.shareLink = this.shareLink.bind(this)\n    \n        this.modalBack = () => {\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\n        };\n    }\n\n    buildRequest(elem) {\n        let request\n        let message = TimeStr(elem.end_at, \"day\") + \" прошел турнир \\\"\" + elem.title + \"\\\"\" +\n                      \"\\nПодробнее можно узнать в приложении:\"\n        request = {\n            \"message\": message,\n            \"attachments\": \"https://vk.com/app7446072#\" + elem.tournament_id\n        }\n        return request\n    }\n\n    sendPost() {\n        const successSnackbar =\n            <Snackbar\n                onClose={() => this.setState({ snackbar: null })}\n                duration=\"2000\"\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\n            >\n                Запись опубликована\n            </Snackbar> \n\n        const errorSnackbar =\n            <Snackbar\n                onClose={() => \n                    this.setState({ snackbar: null })\n                }\n                duration=\"2000\"\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\n            >\n                Ошибка при публикации записи\n            </Snackbar>\n\n        let request = this.buildRequest(this.state.elem)\n\n        bridge\n            .send(\"VKWebAppShowWallPostBox\", request)\n            .then(data => {\n                if (this.state.snackbar) return\n                this.setState({snackbar: successSnackbar})\n            }) \n            .catch(error => {\n                if (this.state.snackbar) return\n                this.setState({snackbar: errorSnackbar})\n            })      \n    }\n\n    shareLink() {\n        const successSnackbar =\n            <Snackbar\n                onClose={() => this.setState({ snackbar: null })}\n                duration=\"2000\"\n                before={<Avatar size={24} style={{ background: 'var(--green)' }}><Icon16Done fill=\"#fff\" width={14} height={14} /></Avatar>}\n            >\n                Ссылка отправлена\n            </Snackbar> \n\n        const errorSnackbar =\n            <Snackbar\n                onClose={() => \n                    this.setState({ snackbar: null })\n                }\n                duration=\"2000\"\n                before={<Avatar size={24} style={{ background: 'var(--red)' }}><Icon16Cancel fill=\"#fff\" width={14} height={14} /></Avatar>}\n            >\n                Ошибка при отправке ссылки\n            </Snackbar>\n\n        let link = \"https://vk.com/app7446072#\" + this.state.elem.tournament_id\n\n        bridge\n            .send(\"VKWebAppShare\", {\"link\": link})\n            .then(data => {\n                const isDesktop = this.props.viewWidth > ViewWidth.MOBILE\n                if (isDesktop) {\n                    if (this.state.snackbar) return\n                    this.setState({snackbar: successSnackbar})    \n                }\n            })\n            .catch(error => {\n                if (this.state.snackbar) return\n                this.setState({snackbar: errorSnackbar})\n            })     \n    }\n\n    openShareActionSheetFinish(e) {\n        getPosition()\n        this.setState({elem: e})\n        this.setState({ popout:\n            <ActionSheet \n                onClose={() => this.setState({ popout: null })}\n                iosCloseItem={<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n                header=\"Как вы хотите поделиться турниром?\"\n                toggleRef={this.shareTargetRef.current}\n            >\n                <ActionSheetItem autoclose onClick={() => this.sendPost()}>\n                    На стене\n                </ActionSheetItem>\n                <ActionSheetItem autoclose onClick={() => this.shareLink()}>\n                    Отправить ссылку\n                </ActionSheetItem>\n          </ActionSheet>\n        });\n    }\n\n    setActiveModal(activeModal) {\n        activeModal = activeModal || null;\n        let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\n    \n        if (activeModal === null) {\n            modalHistory = [];\n        } else if (modalHistory.indexOf(activeModal) !== -1) {\n            modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\n        } else {\n            modalHistory.push(activeModal);\n        }\n    \n        this.setState({\n          activeModal,\n          modalHistory\n        });\n    };\n\n    componentDidMount() {\n        if (window.location.hash != '' && !isOpenedFirstTime && tournamentsID.indexOf(Number(window.location.hash.slice(1))) != -1) {\n            this.setActiveModal(Number(window.location.hash.slice(1)))\n            isOpenedFirstTime = true\n        }\n    }\n\n    componentDidUpdate() {\n        var elem = document.getElementsByClassName(\"vkuiActionSheet--desktop\")\n        if (elem[0]) {\n            var observer = new MutationObserver(function(mutations) {\n                if (mutations && !stylesIsUpdated) {\n                    if (document.documentElement.clientHeight - positionY < 200) {\n                        positionY = positionY - elem[0].getBoundingClientRect().height - 5    \n                    } else {\n                        positionY += buttonHeight + 5    \n                    }\n                    elem[0].style.top = positionY + \"px\"\n                    elem[0].style.left = positionX + \"px\"\n                    stylesIsUpdated = true\n                } \n            });\n            \n            observer.observe(elem[0], { attributes : true, attributeFilter : ['style'] }); \n        } \n    }\n\n    \n\n    render() {\n        \n        const isDesktop = this.props.viewWidth > ViewWidth.MOBILE;\n        const isMobile = this.props.viewWidth <= ViewWidth.MOBILE;\n\n        const platform = this.props.platform;\n\n        if (TournamentList.data.length !== 0) {\n            const Modal = (\n                <ModalRoot activeModal={this.state.activeModal} onClose={this.modalBack}>\n                    {\n                        TournamentList['data'].map((elem) =>\n                            <ModalPage id={elem.tournament_id}\n                                onClose={this.modalBack}\n                                header={\n                                    <ModalPageHeader \n                                        right={isMobile && platform === IOS && <PanelHeaderButton onClick={this.modalBack}><Icon24Dismiss/></PanelHeaderButton>}\n                                        left={isMobile && platform === ANDROID && <PanelHeaderClose onClick={this.modalBack}/>}\n                                    >\n                                        Информация \n                                    </ModalPageHeader>\n                                }\n                            >\n                                <div className=\"ModalPage__Content Turnament-Information__Group\">\n                                    <Group className=\"vkuiGroup--custom-separator\">\n                                        <h4>{elem.title}</h4>\n                                    </Group>\n                                    <Group className=\"vkuiGroup--custom-separator\">\n                                        <div className=\"TournamentCard__Info-Main-Title\">Статус</div>\n                                        <div style={{marginLeft: 5}}>\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n                                                Турнир завершён\n                                            </span>\n                                        </div>\n                                        <br/>\n                                        <div className=\"TournamentCard__Info-Main-Title\">Регистрация</div>\n                                        <div style={{marginLeft: 5}}>\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n                                                <Icon16CheckCircleOutline width={17} height={17}/><Time timestamp={elem.registration_start_at}/>\n                                            </span>\n                                            <br/>\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n                                                <Icon16CancelCircleOutline width={17} height={17}/><Time timestamp={elem.registration_end_at}/>\n                                            </span>\n                                        </div>\n                                        <br/>\n                                        <div className=\"TournamentCard__Info-Main-Title\">Продолжительность боёв</div>\n                                        <div style={{marginLeft: 5}}>\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n                                                <Icon16Recent width={17} height={17} style={{color: \"green\"}}/><Time timestamp={elem.start_at}/>\n                                            </span>\n                                            <br/>\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n                                                <Icon16Recent width={17} height={17} style={{color: \"rgb(200, 0, 0)\"}}/><Time timestamp={elem.end_at}/>\n                                            </span>\n                                        </div>\n                                        <br/>\n                                        <div className=\"TournamentCard__Info-Main-Title\">Команды</div>\n                                        <div style={{marginLeft: 5}}>\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n                                                <span style={{fontWeight: \"450\"}}>Максимальное число команд:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].max}\n                                            </span>\n                                            <br/>\n                                            <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n                                                <span style={{fontWeight: \"450\"}}>Приняло участие:&nbsp;</span> {tournamentInfo[elem[\"tournament_id\"]].total}\n                                            </span>\n                                        </div>\n                                    </Group>\n                                    <Group className=\"vkuiGroup--custom-separator\">\n                                        <p className=\"Pre\">\n                                            {elem.description}\n                                        </p>\n                                    </Group>\n                                </div>\n                            </ModalPage>    \n                        )\n                    }\n                </ModalRoot>\n            );\n\n            var List = (\n                <Root modal={Modal} popout={this.state.popout}>\n                    <CardGrid size={isDesktop ? \"m\" : \"l\"}>\n                        {\n                            TournamentList['data'].map((elem) => \n                                <Card mode=\"outline\">\n                                        <div className={elem.status + \" border\"}></div>\n                                        <div className=\"TournamentCard\">\n                                            <div className=\"TournamentCard__Header\">{elem.title}</div>\n                                            <div className=\"TornamentCard__Info\">\n                                                <div className=\"TornamentCard__Info-Start\">\n                                                    <Icon20CalendarOutline width={23} height={23}/>\n                                                    <div className=\"TornamentCard__Info-Start-Text\">\n                                                        <Time timestamp={elem.start_at} mode=\"day\"/>\n                                                    </div>\n                                                </div>\n                                                <div className=\"TournamentCard__Info-Main\">\n                                                    Турнир завершён\n                                                </div>\n                                            </div>\n                                            <div className=\"TornamentCard__Footer\">\n                                                <Button className=\"TornamentCard__Footer-Button\" mode=\"outline\" before={<Icon16InfoOutline/>} onClick={() => this.setActiveModal(elem.tournament_id)}>Подробнее</Button> \n                                                <Button className=\"TornamentCard__Footer-Button TornamentCard__Footer-SmallButton\" mode=\"outline\" getRootRef={this.shareTargetRef} onClick={() => this.openShareActionSheetFinish(elem)}><Icon16ReplyOutline/></Button>\n                                            </div> \n                                        </div>\n                                </Card>\n                            \n                            )\n                        }\n                    </CardGrid>\n                    {this.state.snackbar}\n                </Root>\n            )\n        } else {\n            if (this.props.mode == \"none\") {\n                List = (<span></span>)\n            } else {\n                var List = ( <Placeholder>Нет завершённых турниров</Placeholder>);\n            }\n        }\n        return(List);\n    }\n}\n\nconst Finish = withPlatform(withAdaptivity(FinishComponent, { viewWidth: true }));\n\nexport default Finish;","import React from 'react';\r\nimport Upcoming from \"./Upcoming\";\r\nimport RegStart from \"./RegistrationStart\";\r\nimport RegFinish from \"./RegistrationFinish\";\r\nimport Running from \"./Running\";\r\nimport Finish from \"./Finish\";\r\n\r\nclass All extends React.Component {\r\n    render() {\r\n        return(\r\n            <div>\r\n                <RegStart mode=\"none\"/>\r\n                <Upcoming mode=\"none\"/>\r\n                <RegFinish mode=\"none\"/>\r\n                <Running mode=\"none\"/>\r\n                <Finish mode=\"none\"/>\r\n            </div>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default All;","import React from 'react';\nimport {View, Panel, PanelHeader, Group, Tabs, HorizontalScroll, TabsItem, AppRoot, AdaptivityProvider, ConfigProvider, FixedLayout, Separator} from '@vkontakte/vkui';\nimport Upcoming from \"./getTournament/Upcoming\";\nimport All from \"./getTournament/all\";\nimport RegStart from \"./getTournament/RegistrationStart\";\nimport RegFinish from \"./getTournament/RegistrationFinish\";\nimport Running from \"./getTournament/Running\";\nimport Finish from \"./getTournament/Finish\";\n\n\t\nclass Application extends React.Component {\n\tconstructor(props) {\n\t  super(props);\n\n\t  this.state = {\n        contextOpened: false,\n        mode: 'all',\n\t\tactiveTab: 'all'\n\t  };\n\t}\n\n\trender() {\n\t\tlet content;\n\t\tif (this.state.activeTab === 'all') {\n\t\t\tcontent = <All/>\n\t\t}\n\t\tif (this.state.activeTab === 'upcoming') {\n\t\t\tcontent = <Upcoming/>;\n\t\t}\n\t\tif (this.state.activeTab === 'registration_started') {\n\t\t\tcontent = <RegStart/>;\n\t\t}\n\t\tif (this.state.activeTab === 'registration_finished') {\n\t\t\tcontent = <RegFinish/>;\n\t\t}\n\t\tif (this.state.activeTab === 'running') {\n\t\t\tcontent = <Running/>;\n\t\t}\n\t\tif (this.state.activeTab === 'finish') {\n\t\t\tcontent = <Finish/>;\n\t\t}\n\t\treturn (\n\t\t\t//<ConfigProvider platform=\"ios\">\n\t\t\t<View>\n\t\t\t\t<Panel>\n\t\t\t\t\t<PanelHeader>Tурниры WoT Blitz</PanelHeader>\n\t\t\t\t\t<Group style={{paddingTop: 35}}>\n\t\t\t\t\t\t<FixedLayout vertical=\"top\" filled>\n\t\t\t\t\t\t\t<Tabs mode=\"buttons\">\n\t\t\t\t\t\t\t\t<HorizontalScroll>\n\t\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'all'})\n\t\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'all'}\n\t\t\t\t\t\t\t\t\t>Все</TabsItem>\n\t\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'registration_started'})\n\t\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'registration_started'}\n\t\t\t\t\t\t\t\t\t>Идёт регистрация</TabsItem>\n\t\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'upcoming'})\n\t\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'upcoming'}\n\t\t\t\t\t\t\t\t\t>Запланированные</TabsItem>\n\t\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => { \n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'registration_finished'})\n\t\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'registration_finished'}\n\t\t\t\t\t\t\t\t\t>Регистрация завершена</TabsItem>\n\t\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'running'})\n\t\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'running'}\n\t\t\t\t\t\t\t\t\t>Идут бои</TabsItem>\n\t\t\t\t\t\t\t\t\t<TabsItem\n\t\t\t\t\t\t\t\t\t\tonClick={() => { \n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({activeTab: 'finish'})\n\t\t\t\t\t\t\t\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tselected={this.state.activeTab === 'finish'}\n\t\t\t\t\t\t\t\t\t>Бои завершены</TabsItem>\n\t\t\t\t\t\t\t\t</HorizontalScroll>\n\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t<Separator wide />\n\t\t\t\t\t\t</FixedLayout>\n\t\t\t\t\t\t{content}\n\t\t\t\t\t</Group>\n\t\t\t\t</Panel>\n\t\t\t</View>\n\t\t\t//</ConfigProvider>\n\t\t);\n\t}\n}\n\n\n\nconst App = () => {\n\treturn (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t<Application/>\n\t\t\t</AppRoot>\n\t\t</AdaptivityProvider>\n\t);\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport '@vkontakte/vkui/dist/vkui.css';\nimport App from \"./App\";\nimport './style.css';\nimport getLaunchParams from './getParams/search'\n\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nbridge.subscribe((e) => {\n    if (e.detail.type === \"VKWebAppUpdateConfig\") {\n        document.body.setAttribute(\"scheme\", e.detail.data.scheme);\n        document.html.setAttribute(\"scheme\", e.detail.data.scheme);\n    }\n});\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n    //import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n\n"],"sourceRoot":""}